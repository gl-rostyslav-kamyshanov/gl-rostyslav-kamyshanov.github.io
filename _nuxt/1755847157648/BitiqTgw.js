import{_ as k}from"./DuOXD_T7.js";import{a as j}from"./BQ4KkwTu.js";import{d as V,aD as x,f as y,aK as S,c,a as f,C as _,s as b,i as g,h as z,t as p,j as d,T as O,aF as q,aH as C,m as D,bp as I,r as P,k as U}from"./DerHuaWG.js";const Y={key:0,class:"flex content-center items-center justify-between"},M=["for"],G={key:1,class:"flex content-center items-center justify-between"},T=["for"],H={key:0,class:"u-label-text"},J={key:2,class:"u-label-text"},K={key:3,class:"u-error-text"},R={key:4,class:"u-help-text mt-2"},Z=V({__name:"FormGroup",props:{name:{},label:{},description:{},help:{},hint:{},error:{type:[String,Boolean],default:void 0},required:{type:Boolean},disabled:{type:Boolean},inline:{type:Boolean},containerClass:{},size:{},icon:{}},setup(e){const t=e,a=x("form-errors",null),i=y(()=>t.name),l=y(()=>t.error&&typeof t.error=="string"||typeof t.error=="boolean"?t.error:a?.value?.find(r=>r.path===t.name)?.message);return S("form-group",{error:l,name:y(()=>t.name),size:y(()=>t.size),disabled:y(()=>t.disabled)}),(r,u)=>{const n=k;return f(),c("div",{class:_(["u-form-group",r.inline&&"u-form-group-inline"])},[r.label&&t.icon?(f(),c("div",Y,[g("label",{for:d(i),class:"flex w-full justify-between"},[g("p",{class:_(["u-label-text",[t.required?"u-label-text--required":"",t.disabled?"u-label-text--disabled":""]])},p(r.label),3)],8,M),z(n,{name:t.icon},null,8,["name"])])):r.label?(f(),c("div",G,[g("label",{for:d(i)},[g("p",{class:_(["u-label-text",[t.required?"u-label-text--required":"",t.disabled?"u-label-text--disabled":""]])},p(r.label),3)],8,T),r.hint?(f(),c("span",H,p(r.hint),1)):b("",!0)])):b("",!0),r.description?(f(),c("p",J,p(r.description),1)):b("",!0),g("div",{class:_(d(j)([r.label?r.inline?"relative":"mt-2 relative":"",r.containerClass]))},[O(r.$slots,"default",q(C({error:d(l)})))],2),d(l)&&typeof d(l)!="boolean"?(f(),c("p",K,p(d(l)),1)):b("",!0),r.help||r.$slots.help?(f(),c("p",R,[O(r.$slots,"help"),D(" "+p(r.help),1)])):b("",!0)],2)}}}),le=Object.assign(Z,{__name:"UFormGroup"}),L=V({__name:"Form",props:{state:{},validate:{type:Function,default:()=>[]},validateOn:{default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:t,emit:a}){class i extends Error{constructor(o){super(o),this.message=o,Object.setPrototypeOf(this,i.prototype)}}const l=a,r=e,u=I("form-bus");u.on(async s=>{s.type!=="submit"&&r.validateOn?.includes(s.type)&&await w(s.path,{silent:!0})});const n=P([]);S("form-errors",n),S("form-events",u);async function m(){return await r.validate(r.state)}async function w(s,o={silent:!1}){if(s){const v=n.value.filter(A=>A.path!==s),$=(await m()).filter(A=>A.path===s);n.value=v.concat($)}else n.value=await m();if(!o.silent&&n.value.length>0)throw new i(`Form validation failed: ${JSON.stringify(n.value,null,2)}`);return r.state}async function F(){try{r.validateOn?.includes("submit")&&await w(),l("submit",r.state)}catch(s){if(!(s instanceof i))throw s;l("error",n.value)}}return t({validate:w,errors:n,setErrors(s,o){n.value=s,o?n.value=n.value.filter(v=>v.path!==o).concat(s):n.value=s},getErrors(s){return s?n.value.filter(o=>o.path===s):n.value},clear(s){s?n.value=n.value.filter(o=>o.path===s):n.value=[]}}),(s,o)=>(f(),c("form",{onSubmit:U(F,["prevent"])},[O(s.$slots,"default")],32))}}),ue=Object.assign(L,{__name:"UForm"});function E(e,t){return Array.isArray(e)?e[0]:e[t]}function Q(e){return e==null}function W(e){return Array.isArray(e)&&e.length===0}function h(e){return!!(e==null||e===""||Array.isArray(e)&&e.length===0)}function X(e){return Q(e)||W(e)||e===!1?!1:!!String(e).trim().length}function ee(e){if(h(e))return!0;const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-z\-0-9]+\.)+[a-z]{2,}))$/i;return Array.isArray(e)?e.every(a=>t.test(String(a))):t.test(String(e))}function te(e){if(h(e))return!0;const t=/^https?:\/\/(?:www\.)?[-\w@:%.+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b[-\w()@:%+.~#?&/=]*$/;return Array.isArray(e)?e.every(a=>t.test(String(a))):t.test(String(e))}function re(e){return h(e)?!0:/^#[a-f0-9]{6}$/i.test(String(e))}function N(e,t){if(h(e))return!0;const a=E(t,"length");return Array.isArray(e)?e.every(i=>N(i,{length:a})):[...String(e)].length>=Number(a)}function B(e,t){if(h(e))return!0;const a=E(t,"length");return Array.isArray(e)?e.every(i=>B(i,{length:a})):[...String(e)].length<=Number(a)}function ne(e){if(h(e))return!0;const t=String(e).replace(/\D/g,"");return/^\d+$/.test(t)&&t.length>=4&&t.length<=15}function se(e,t,a){if(!e||!t||!a)return!1;const i=new Date().getFullYear(),l=i-120,r=Number.parseInt(e),u=Number.parseInt(t),n=Number.parseInt(a);if(u<1||u>12||r<1||r>31||n<l||n>i)return!1;const m=new Date(n,u-1,r);return m.getFullYear()===n&&m.getMonth()===u-1&&m.getDate()===r}const ce={email:ee,required:X,min:N,max:B,hex:re,url:te,phone:ne,dateOfBirth:se};export{le as _,ue as a,ce as v};
