{"version":3,"file":"464Lxf1r.js","sources":["../../../../app/composables/use-signup-navigation.ts","../../../../app/pages/auth/sign-up/personalization.vue"],"sourcesContent":["export function useSignupNavigation() {\n  const runtimeConfig = useRuntimeConfig().public;\n\n  const nextPath = computed(() => {\n    if (runtimeConfig.APP_FLAGS.hasPayments && runtimeConfig.APP_CUSTOMER.enable_signup_onboarding_payment) {\n      return \"/auth/sign-up/subscription/\";\n    }\n    if (runtimeConfig.APP_CUSTOMER.enable_signup_onboarding_follow) {\n      return runtimeConfig.APP_CUSTOMER.enable_leagues_view ? \"/auth/sign-up/following/league\" : \"/auth/sign-up/following/category\";\n    }\n    return \"/\";\n  });\n\n  return nextPath;\n}\n","<script lang=\"ts\" setup>\nimport useAsync from \"~/composables/use-async\";\nimport { SEGMENT_TRACK_EVENTS } from \"~/constants\";\nimport UserAPI from \"~/services/user\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst router = useRouter();\nconst toaster = useToast();\nconst { t, te } = useI18n();\nconst segment = useSegment();\nconst nextPath = useSignupNavigation();\nconst runtimeConfig = useRuntimeConfig().public;\n\nconst onSkip = () => {\n  return segment.track(SEGMENT_TRACK_EVENTS.KYC_SKIPPED);\n};\n\nconst onError = (error: Error) => {\n  const { message } = getErrorLocalePathMessage(error.message, { t, te });\n  return toaster.error(message);\n};\n\nconst onSuccess = () => {\n  router.push({ path: nextPath.value });\n};\n\nconst { loading, run: updateUser } = useAsync(UserAPI.update, { onSuccess, onError });\n\nconst formFields: { [key: string]: boolean } = runtimeConfig.APP_CUSTOMER.form_fields;\nconst canSkip = computed(() => Object.keys(formFields)\n  .filter(key => key.includes(\"required\") && (key !== \"is_full_name_required\" && key !== \"is_email_required\" && key !== \"is_password_required\"))\n  .every(key => formFields[key as keyof typeof formFields] === false));\n\nconst onSubmit = (data: Partial<IModelUser>) => {\n  segment.track(SEGMENT_TRACK_EVENTS.KYC_COMPLETED);\n  updateUser(data);\n};\n\nuseHead({ title: computed(() => `${t(\"labels.sign_up\")} | ${t(\"labels.personalization\")}`) });\ndefinePageMeta({ middleware: \"auth\", layout: \"auth\" });\n</script>\n\n<template>\n  <AuthHeader transparent absolute class=\"my-2 sm:my-0\">\n    <template #append-end>\n      <BaseButton\n        v-if=\"canSkip\"\n        tag=\"nuxt-link\"\n        type=\"icon\"\n        :to=\"{ path: nextPath }\"\n        name=\"skip\"\n        class=\"text-sm\"\n        outline\n        size=\"small\"\n        @click.capture=\"onSkip\"\n      >\n        <p class=\"text-gray-500 border border-gray-500 px-2 rounded-md\">\n          {{ t(\"labels.skip\") }}\n        </p>\n      </BaseButton>\n    </template>\n  </AuthHeader>\n  <BaseMain>\n    <div class=\"flex items-center min-h-screen px-4 sm:px-0 py-20\">\n      <div class=\"w-full max-w-[25rem] mx-auto\">\n        <AccountForm\n          :title=\"t('labels.tell_us_about_yourself')\"\n          :disabled=\"loading\"\n          @submit=\"onSubmit\"\n        />\n        <AuthTerms class=\"pb-2 text-center\" />\n      </div>\n    </div>\n  </BaseMain>\n</template>\n"],"names":["useSignupNavigation","runtimeConfig","useRuntimeConfig","computed","router","useRouter","toaster","useToast","t","te","useI18n","segment","useSegment","nextPath","onSkip","SEGMENT_TRACK_EVENTS","onError","error","message","getErrorLocalePathMessage","onSuccess","loading","updateUser","useAsync","UserAPI","formFields","canSkip","key","onSubmit","data","useHead","_createVNode","_component_AuthHeader","_unref","_createBlock","_component_BaseButton","_createElementVNode","_hoisted_1","_toDisplayString","_component_BaseMain","_hoisted_2","_hoisted_3","_component_AccountForm","_component_AuthTerms"],"mappings":"uzBAAO,SAASA,GAAsB,CACpC,MAAMC,EAAgBC,IAAmB,OAYzC,OAViBC,EAAS,IACpBF,EAAc,UAAU,aAAeA,EAAc,aAAa,iCAC7D,8BAELA,EAAc,aAAa,gCACtBA,EAAc,aAAa,oBAAsB,iCAAmC,mCAEtF,GACR,CAGH,uNCRA,MAAMG,EAASC,EAAA,EACTC,EAAUC,EAAA,EACV,CAAE,EAAAC,EAAG,GAAAC,CAAA,EAAOC,EAAA,EACZC,EAAUC,EAAA,EACVC,EAAWb,EAAA,EACXC,EAAgBC,IAAmB,OAEnCY,EAAS,IACNH,EAAQ,MAAMI,EAAqB,WAAW,EAGjDC,EAAWC,GAAiB,CAChC,KAAM,CAAE,QAAAC,GAAYC,EAA0BF,EAAM,QAAS,CAAE,EAAAT,EAAG,GAAAC,EAAI,EACtE,OAAOH,EAAQ,MAAMY,CAAO,CAC9B,EAEME,EAAY,IAAM,CACtBhB,EAAO,KAAK,CAAE,KAAMS,EAAS,MAAO,CACtC,EAEM,CAAE,QAAAQ,EAAS,IAAKC,GAAeC,EAASC,EAAQ,OAAQ,CAAE,UAAAJ,EAAW,QAAAJ,EAAS,EAE9ES,EAAyCxB,EAAc,aAAa,YACpEyB,EAAUvB,EAAS,IAAM,OAAO,KAAKsB,CAAU,EAClD,OAAOE,GAAOA,EAAI,SAAS,UAAU,GAAMA,IAAQ,yBAA2BA,IAAQ,qBAAuBA,IAAQ,sBAAuB,EAC5I,MAAMA,GAAOF,EAAWE,CAA8B,IAAM,EAAK,CAAC,EAE/DC,EAAYC,GAA8B,CAC9ClB,EAAQ,MAAMI,EAAqB,aAAa,EAChDO,EAAWO,CAAI,CACjB,EAEA,OAAAC,EAAQ,CAAE,MAAO3B,EAAS,IAAM,GAAGK,EAAE,gBAAgB,CAAC,MAAMA,EAAE,wBAAwB,CAAC,EAAE,EAAG,yDAK1FuB,EAkBaC,EAAA,CAlBD,YAAA,GAAY,SAAA,GAAS,MAAM,cAAA,GAC1B,eACT,IAca,CAbLC,EAAAP,CAAA,OADRQ,EAcaC,EAAA,OAZX,IAAI,YACJ,KAAK,OACJ,SAAYF,EAAApB,CAAA,CAAA,EACb,KAAK,OACL,MAAM,UACN,QAAA,GACA,KAAK,uBACWC,CAAA,aAEhB,IAEI,CAFJsB,EAEI,IAFJC,EAEIC,EADCL,EAAAzB,CAAA,EAAC,aAAA,CAAA,EAAA,CAAA,CAAA,oCAKZuB,EAWWQ,EAAA,KAAA,WAVT,IASM,CATNH,EASM,MATNI,EASM,CARJJ,EAOM,MAPNK,EAOM,CANJV,EAIEW,EAAA,CAHC,MAAOT,EAAAzB,CAAA,EAAC,+BAAA,EACR,SAAUyB,EAAAZ,CAAA,EACV,SAAAO,CAAA,+BAEHG,EAAsCY,EAAA,CAA3B,MAAM,mBAAkB,CAAA"}