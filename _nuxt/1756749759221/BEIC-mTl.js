import{_ as W}from"./CsXSxKHI.js";import{d as q,u as G,f as O,r as S,ax as Q,B as X,c as m,a as f,C as A,T as p,H as Y,s as v,h as k,I as Z,j as o,w as V,_ as ee,k as le,i as _,l as re,t as D,F as te,D as se,S as ae,ay as ne,z as oe,ad as ie}from"./CKHG8x2g.js";import{_ as F}from"./Bwl1GRiL.js";const ue={key:0},de=["name","aria-labelledby"],ce={key:0,role:"option",class:"baseSelect__listOption"},fe=["data-test-id","aria-selected","onClick"],me={key:0},pe={inheritAttrs:!1},_e=q({...pe,__name:"Select",props:{disabled:{type:Boolean},hasError:{type:Boolean},errorMessage:{},label:{},name:{},modelValue:{},placeholder:{},searchPlaceholder:{},rootClass:{},options:{},optionsItemClass:{},optionsKeyTitle:{default:"title"},optionsKeyValue:{default:"value"},hasSearch:{type:Boolean},emittedKey:{},multiple:{type:Boolean},optionsClass:{},hasEmptyInput:{type:Boolean},hasOptionTitle:{type:Boolean,default:!0},readonly:{type:Boolean,default:!0}},emits:["update:modelValue","select"],setup(M,{emit:N}){const{t:I}=G(),E=N,r=M,j=O(()=>r.searchPlaceholder||I("labels.search")),C=S(null),b=S(""),d=S(!1),T=S(null),t=e=>typeof e=="string"||typeof e=="number";function L(e,l,s){return!l||Array.isArray(l)&&!l.length?!1:t(e)&&t(l)?l===e:Array.isArray(l)?t(e)?!1:s?!!l.find(a=>t(a)?e[s]===a:e[s]===a[s]):!1:s?!t(e)&&!t(l)?l[s]===e[s]:t(e)&&!t(l)?l[s]===e:!t(e)&&t(l)?l===e[s]:!1:!1}function R(e,l,s){return e.filter(a=>t(l)&&t(a)?a!==l:s?!t(l)&&!t(a)?a[s]!==l[s]:t(l)&&!t(a)?a[s]!==l:!t(l)&&t(a)?a!==l[s]:!0:!0)}function z(e,l,s){if(!l)return e;const a=u=>`${u}`.toLowerCase().includes(l?.toLowerCase().trim());return s?e.filter(u=>a(u[s])):e.filter(u=>t(u)?a(u):e)}const x=O(()=>z(r.options||[],b.value,r.optionsKeyTitle)),i=e=>L(e,r.modelValue,r.emittedKey||r.optionsKeyValue),K=e=>r.emittedKey?t(e)?e:e[r.emittedKey]:e,w=e=>t(e)?e:e[r.optionsKeyValue],$=e=>Array.isArray(e)?t(e[0])?e.join(", "):JSON.stringify(e):t(e)?e:e[r.optionsKeyTitle],g=e=>E("update:modelValue",e),B=()=>{d.value=!0,ne(()=>C.value&&C.value.focus())},y=()=>d.value=!1,U=()=>b.value="",h=()=>d.value=!d.value,P=e=>{const l=K(e);if(E("select",e),r.multiple){if(!Array.isArray(r.modelValue)){console.error("Invalid `modelValue`! When `multiple` prop set - must be an array!");return}const s=Array.isArray(r.modelValue)?r.modelValue:[];if(i(e)){const a=R(s,e,r.emittedKey||r.optionsKeyValue);g(a)}else g([...s,l])}else i(e)?g(void 0):g(l),y()},c=O(()=>r.multiple?(r.options||[]).reduce((e,l)=>(i(l)&&e.push(l),e),[]):(r.options||[]).find(i));return Q(T,()=>y()),(e,l)=>{const s=W,a=ee,u=ie,H=X("motion-slide-top");return f(),m("div",{ref_key:"selectElRef",ref:T,class:A(["baseSelect",r.rootClass])},[p(e.$slots,"toggle",{open:B,close:y,toggle:h,isOpen:o(d),isSelected:Array.isArray(o(c))?o(c).length>0:!!o(c),value:r.modelValue},()=>[k(F,Z(e.$attrs,{"model-value":r.hasEmptyInput?"":o(c)&&$(o(c)),name:r.name,label:r.label,type:"text",class:"truncate",disabled:r.disabled,placeholder:r.placeholder,"has-error":r.hasError,"error-message":r.errorMessage,readonly:r.readonly,onFocus:l[1]||(l[1]=n=>B())}),{prefix:V(()=>[p(e.$slots,"innerInputPrefix",{toggle:h})]),input:V(()=>[p(e.$slots,"innerInput",{toggle:h,value:r.hasEmptyInput?"":o(c)&&$(o(c))})]),suffix:V(()=>[p(e.$slots,"innerInputSuffix",{toggle:h}),k(a,{type:"icon","attr-type":"button",name:"baseSelect__toggle",class:"baseInput__suffix",title:"Toggle",disabled:r.disabled,"aria-expanded":o(d),"aria-haspopup":"listbox",onClick:l[0]||(l[0]=le(n=>h(),["prevent"]))},{default:V(()=>[k(s,{class:"inline-block text-main"})]),_:1},8,["disabled","aria-expanded"])]),_:3},16,["model-value","name","label","disabled","placeholder","has-error","error-message","readonly"])]),o(d)?Y((f(),m("div",{key:0,class:A(["baseSelect__options",r.optionsClass])},[r.hasSearch?(f(),m("div",ue,[k(F,{ref_key:"innerSearchEl",ref:C,modelValue:o(b),"onUpdate:modelValue":l[2]||(l[2]=n=>re(b)?b.value=n:null),name:"search",class:"font-medium",placeholder:o(j),search:"",onClear:l[3]||(l[3]=n=>U())},null,8,["modelValue","placeholder"]),l[6]||(l[6]=_("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}},null,-1))])):v("",!0),_("ul",{name:`listbox-${r.name}`,"aria-labelledby":`input-label-${r.name}`,class:"baseSelect__list",role:"listbox",tabindex:"0",onBlur:l[4]||(l[4]=n=>y()),onKeyup:l[5]||(l[5]=ae(n=>y(),["esc"]))},[!o(x)||!o(x).length?(f(),m("li",ce,[_("span",null,D(o(I)("labels.no_options_found")),1)])):v("",!0),(f(!0),m(te,null,se(o(x),(n,J)=>p(e.$slots,"option-item-inner",{key:w(n),option:n,isSelected:i(n),select:P},()=>[_("li",{role:"option","data-test-id":`${e.name}-option-${J}`,class:A(["baseSelect__listOption",[r.optionsItemClass,{baseSelect__listOption_selected:i(n)}]]),"aria-selected":i(n)?"true":"false",onClick:be=>P(n)},[_("div",null,[p(e.$slots,"option-item-inner-prefix",{key:w(n),option:n}),r.hasOptionTitle?(f(),m("span",me,D($(n)),1)):v("",!0)]),i(n)?(f(),oe(u,{key:0})):v("",!0)],10,fe),l[7]||(l[7]=_("li",{role:"separator",class:"hr mx-4",style:{background:"var(--base-background-color)"}},null,-1))])),128))],40,de)],2)),[[H]]):v("",!0)],2)}}}),ge=Object.assign(_e,{__name:"BaseSelect"});export{ge as _};
//# sourceMappingURL=BEIC-mTl.js.map
