{"version":3,"file":"B2gBbnqN.js","sources":["../../../../app/components/User/card/Club.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useFollow from \"~/composables/use-follow\";\nimport useSSOLogin from \"~/composables/use-sso-login\";\nimport { SEGMENT_TRACK_EVENTS } from \"~/constants\";\nimport useUserStore from \"~/stores/user\";\n\nexport interface UserCardClubProps<T> {\n  mainCategoryId?: string;\n  item: T;\n  isLink?: boolean;\n  type: \"identity_item\" | \"team\";\n}\n\nconst route = useRoute();\nconst router = useRouter();\nconst segment = useSegment();\nconst userStore = useUserStore();\nconst { executeSocialLogin, socialLoginLoading } = useSSOLogin();\nconst appConfig = useRuntimeConfig().public;\nconst props = defineProps<UserCardClubProps<IModelIdentityItem | IModelFollowedItem>>();\n\nconst isLoggedIn = computed(() => Boolean(userStore.user));\nconst isLeagueView = appConfig.APP_CUSTOMER.enable_leagues_view;\nconst { loading, isFollowing, toggleFollow } = useFollow({ id: props.item.id, type: props.type });\nconst linkPath = isLeagueView\n  ? `/team/${props.item.id}/`\n  : `/category/${props.mainCategoryId}/sub-category/${props.item.id}/`;\n\nasync function onClickFollow(item: IModelIdentityItem | IModelFollowedItem) {\n  if (!isLoggedIn.value) {\n    if (appConfig.APP_FLAGS.hasIfaAuth && appConfig.APP_CUSTOMER.app_config.enable_skip_login_page_for_ifa_sso)\n      return executeSocialLogin(\"ifa\");\n    return router.push({ path: \"/auth/login/\", query: { redirectUrl: route.fullPath } });\n  }\n\n  return toggleFollow(item);\n}\n\nfunction onSubcategoryClick() {\n  if (isLeagueView)\n    return;\n\n  segment.track(SEGMENT_TRACK_EVENTS.CLICK_ON_SUBCATEGORY, {\n    subcategory_id: props.item.id,\n    subcategory_name: props.item.title,\n  });\n}\n</script>\n\n<template>\n  <NuxtLink v-if=\"isLink\" :to=\"linkPath\">\n    <CardClub\n      :title=\"props.item.title\"\n      :image-url=\"props.item.imageUrl\"\n      :is-following=\"isFollowing || socialLoginLoading\"\n      :is-following-disabled=\"loading\"\n      has-follow-button\n      with-initials\n      @click.capture=\"onSubcategoryClick\"\n      @follow=\"onClickFollow(item)\"\n    />\n  </NuxtLink>\n  <CardClub\n    v-else\n    :title=\"props.item.title\"\n    :image-url=\"props.item.imageUrl\"\n    :is-following=\"isFollowing || socialLoginLoading\"\n    :is-following-disabled=\"loading\"\n    has-follow-button\n    with-initials\n    @follow=\"onClickFollow(item)\"\n  />\n</template>\n"],"names":["route","useRoute","router","useRouter","segment","useSegment","userStore","useUserStore","executeSocialLogin","socialLoginLoading","useSSOLogin","appConfig","useRuntimeConfig","props","__props","isLoggedIn","computed","isLeagueView","loading","isFollowing","toggleFollow","useFollow","linkPath","onClickFollow","item","onSubcategoryClick","SEGMENT_TRACK_EVENTS","isLink","_createBlock","_component_NuxtLink","_unref","_createVNode","_component_CardClub","_cache","$event"],"mappings":"wUAaA,MAAMA,EAAQC,EAAA,EACRC,EAASC,EAAA,EACTC,EAAUC,EAAA,EACVC,EAAYC,EAAA,EACZ,CAAE,mBAAAC,EAAoB,mBAAAC,CAAA,EAAuBC,EAAA,EAC7CC,EAAYC,IAAmB,OAC/BC,EAAQC,EAERC,EAAaC,EAAS,IAAM,EAAQV,EAAU,IAAK,EACnDW,EAAeN,EAAU,aAAa,oBACtC,CAAE,QAAAO,EAAS,YAAAC,EAAa,aAAAC,CAAA,EAAiBC,EAAU,CAAE,GAAIR,EAAM,KAAK,GAAI,KAAMA,EAAM,KAAM,EAC1FS,EAAWL,EACb,SAASJ,EAAM,KAAK,EAAE,IACtB,aAAaA,EAAM,cAAc,iBAAiBA,EAAM,KAAK,EAAE,IAEnE,eAAeU,EAAcC,EAA+C,CAC1E,OAAKT,EAAW,MAMTK,EAAaI,CAAI,EALlBb,EAAU,UAAU,YAAcA,EAAU,aAAa,WAAW,mCAC/DH,EAAmB,KAAK,EAC1BN,EAAO,KAAK,CAAE,KAAM,eAAgB,MAAO,CAAE,YAAaF,EAAM,QAAA,EAAY,CAIvF,CAEA,SAASyB,GAAqB,CACxBR,GAGJb,EAAQ,MAAMsB,EAAqB,qBAAsB,CACvD,eAAgBb,EAAM,KAAK,GAC3B,iBAAkBA,EAAM,KAAK,KAAA,CAC9B,CACH,oCAIkBc,EAAAA,YAAhBC,EAWWC,EAAA,OAXc,GAAIC,EAAAR,CAAA,CAAA,aAC3B,IASE,CATFS,EASEC,EAAA,CARC,MAAOnB,EAAM,KAAK,MAClB,YAAWA,EAAM,KAAK,SACtB,eAAciB,EAAAX,CAAA,GAAeW,EAAArB,CAAA,EAC7B,wBAAuBqB,EAAAZ,CAAA,EACxB,oBAAA,GACA,gBAAA,kBACgBO,EACf,SAAMQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEX,EAAcC,EAAAA,IAAI,EAAA,8FAG/BI,EASEI,EAAA,OAPC,MAAOnB,EAAM,KAAK,MAClB,YAAWA,EAAM,KAAK,SACtB,eAAciB,EAAAX,CAAA,GAAeW,EAAArB,CAAA,EAC7B,wBAAuBqB,EAAAZ,CAAA,EACxB,oBAAA,GACA,gBAAA,GACC,SAAMe,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAEX,EAAcC,EAAAA,IAAI,EAAA"}