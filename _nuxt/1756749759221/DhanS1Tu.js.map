{"version":3,"file":"DhanS1Tu.js","sources":["../../../../app/components/Account/FormLoading.vue","../../../../app/components/Icon/ProfileDelete.vue","../../../../app/pages/account/general.vue"],"sourcesContent":["<script setup lang=\"ts\">\nconst { t } = useI18n();\n</script>\n\n<template>\n  <div class=\"flex flex-col gap-3 sm:gap-6\">\n    <div class=\"flex flex-col gap-3 sm:gap-6\">\n      <h3 class=\"font-bold text-main\">\n        {{ t('labels.loading') }}\n      </h3>\n      <BaseInput\n        disabled\n        required\n        name=\"full_name\"\n      />\n      <BaseInput\n        disabled\n        required\n        name=\"email\"\n      />\n      <BaseInput\n        disabled\n        required\n        name=\"email\"\n      />\n      <div class=\"hr\" role=\"separator\" />\n    </div>\n\n    <div class=\"flex flex-col gap-3 sm:gap-6\">\n      <h3 class=\"font-bold text-main\">\n        {{ t('labels.loading') }}\n      </h3>\n      <BaseInput\n        disabled\n        required\n        name=\"full_name\"\n      />\n      <BaseInput\n        disabled\n        required\n        name=\"email\"\n      />\n      <BaseInput\n        disabled\n        required\n        name=\"email\"\n      />\n      <div class=\"hr\" role=\"separator\" />\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\n/* eslint-disable max-len */\nexport interface IconProfileDeleteProps {\n  isDarkTheme?: boolean;\n}\nconst props = withDefaults(defineProps<IconProfileDeleteProps>(), { isDarkTheme: true });\n</script>\n\n<template>\n  <template v-if=\"props.isDarkTheme\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"72\" height=\"64\" viewBox=\"0 0 72 64\">\n      <g fill=\"none\" fill-rule=\"evenodd\">\n        <g>\n          <circle fill=\"#2C374B\" cx=\"32\" cy=\"32\" r=\"32\" />\n          <path\n            d=\"M32 34.1c3.3 0 6-2.766 6-6.146v-.308c0-3.38-2.7-6.146-6-6.146s-6 2.766-6 6.146v.308c0 3.38 2.7 6.146 6 6.146zm6.9 2.1H25.1c-2.82 0-5.1 2.816-5.1 6.3h24c0-3.446-2.28-6.3-5.1-6.3z\"\n            fill=\"#A9B7D1\"\n          />\n        </g>\n        <g transform=\"translate(48 40)\">\n          <circle fill=\"var(--base-error-color)\" cx=\"12\" cy=\"12\" r=\"12\" />\n          <path\n            d=\"M7.405 16.594a.622.622 0 0 0 .48.206.623.623 0 0 0 .48-.206L12 12.96l3.634 3.634a.74.74 0 0 0 .48.206.741.741 0 0 0 .48-.206.663.663 0 0 0 0-.96L12.96 12l3.634-3.634a.663.663 0 0 0 0-.96.663.663 0 0 0-.96 0L12 11.04 8.366 7.406a.663.663 0 0 0-.96 0 .663.663 0 0 0 0 .96L11.04 12l-3.634 3.634a.663.663 0 0 0 0 .96z\"\n            fill=\"#FFF\"\n          />\n        </g>\n      </g>\n    </svg>\n  </template>\n  <template v-else>\n    <svg width=\"72\" height=\"64\" viewBox=\"0 0 73 66\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g fill=\"none\" fill-rule=\"evenodd\">\n        <g transform=\"translate(1 1)\">\n          <circle stroke=\"#DFDFDF\" cx=\"32\" cy=\"32\" r=\"32\" />\n          <path d=\"M32 34.1c3.3 0 6-2.766 6-6.146v-.308c0-3.38-2.7-6.146-6-6.146s-6 2.766-6 6.146v.308c0 3.38 2.7 6.146 6 6.146zm6.9 2.1H25.1c-2.82 0-5.1 2.816-5.1 6.3h24c0-3.446-2.28-6.3-5.1-6.3z\" fill=\"#8F959F\" />\n        </g>\n        <g transform=\"translate(49 41)\">\n          <circle fill=\"var(--base-error-color)\" cx=\"12\" cy=\"12\" r=\"12\" />\n          <path d=\"M7.405 16.594a.622.622 0 0 0 .48.206.623.623 0 0 0 .48-.206L12 12.96l3.634 3.634a.74.74 0 0 0 .48.206.741.741 0 0 0 .48-.206.663.663 0 0 0 0-.96L12.96 12l3.634-3.634a.663.663 0 0 0 0-.96.663.663 0 0 0-.96 0L12 11.04 8.366 7.406a.663.663 0 0 0-.96 0 .663.663 0 0 0 0 .96L11.04 12l-3.634 3.634a.663.663 0 0 0 0 .96z\" fill=\"#FFF\" />\n        </g>\n      </g>\n    </svg>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport useAsync from \"~/composables/use-async\";\nimport { THEME_COLOR } from \"~/constants\";\nimport UserAPI from \"~/services/user\";\nimport useUserStore from \"~/stores/user\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nexport interface userData {\n  fullName: string;\n  email: string;\n  country: string;\n  phone: string;\n  phoneBody: string;\n  countryCode: string;\n  postalCode: string;\n}\nconst router = useRouter();\nconst { t, te } = useI18n();\nconst toaster = useToast();\nconst color = useColorMode();\nconst segment = useSegment();\nconst userStore = useUserStore();\n\nconst onError = (error: Error) => {\n  const { message } = getErrorLocalePathMessage(error.message, { t, te });\n  return toaster.error(message);\n};\n\nfunction onSuccess() {\n  return toaster.success(t(\"pages.account.account_update_successfully\"));\n}\nconst { loading, run: updateUser } = useAsync(UserAPI.update, { onSuccess, onError });\nconst { loading: loadingUserProfile, run: loadUserProfile } = useAsync(UserAPI.load(), { onError });\n\nfunction onSubmit(data: Partial<IModelUser>) {\n  const segmentPayload = {\n    email: userStore.user?.email,\n    country: data.countryName || undefined,\n    name: data.fullName,\n  };\n\n  return updateUser(data).then(() => {\n    if (userStore.user?.id) {\n      segment.identify(userStore.user?.id, segmentPayload);\n    }\n  });\n}\n\nfunction onDeleteAccount(closeModal: () => void) {\n  return UserAPI.delete()\n    .then(() => {\n      closeModal && closeModal();\n      toaster.success(t(\"pages.account.account_delete_successfully\"));\n      userStore.logout();\n      router.push(\"/auth/login/\");\n    })\n    .catch((err: Error) => {\n      onError(err);\n      closeModal && closeModal();\n    });\n}\n\nonMounted(() => loadUserProfile());\n</script>\n\n<template>\n  <AccountFormLoading v-if=\"loadingUserProfile\" />\n  <AccountForm\n    v-else\n    :disabled=\"loading\"\n    :initial-data=\"userStore.user\"\n    :submit-label=\"t('labels.update')\"\n    @submit=\"onSubmit\"\n  />\n\n  <BaseModal :title=\"t('pages.account.account_delete_confirm')\" :description=\"t('pages.account.account_delete_description')\" root-class=\"max-w-[430px]\">\n    <template #trigger=\"{ openModal }\">\n      <div class=\"text-center\">\n        <BaseButton class=\"mt-8 font-medium\" name=\"delete-account\" type=\"danger\" :disabled=\"loading\" link @click=\"openModal\">\n          {{ t('pages.account.account_delete_button') }}\n        </BaseButton>\n      </div>\n    </template>\n    <template #before-title>\n      <div class=\"mb-6 flex justify-center\">\n        <IconProfileDelete :is-dark-theme=\"color.value === THEME_COLOR.DARK\" />\n      </div>\n    </template>\n    <template #actions=\"{ closeModal }\">\n      <div class=\"mt-6 grid grid-cols-2 gap-4\">\n        <BaseButton\n          full-width\n          class=\"text-button-bold text-white\"\n          type=\"secondary\"\n          name=\"modalClose\"\n          :disabled=\"loading\"\n          @click=\"closeModal()\"\n        >\n          {{ t('button.cancel') }}\n        </BaseButton>\n        <BaseButton\n          full-width\n          type=\"danger\"\n          name=\"modalConfirm\"\n          class=\"text-button-bold\"\n          :disabled=\"loading || loadingUserProfile\"\n          @click=\"onDeleteAccount(closeModal)\"\n        >\n          {{ t('button.delete') }}\n        </BaseButton>\n      </div>\n    </template>\n  </BaseModal>\n</template>\n"],"names":["t","useI18n","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_unref","_createVNode","_component_BaseInput","_hoisted_4","_hoisted_5","props","__props","_cache","router","useRouter","te","toaster","useToast","color","useColorMode","segment","useSegment","userStore","useUserStore","onError","error","message","getErrorLocalePathMessage","onSuccess","loading","updateUser","useAsync","UserAPI","loadingUserProfile","loadUserProfile","onSubmit","data","segmentPayload","onDeleteAccount","closeModal","err","onMounted","_createBlock","_component_AccountFormLoading","_component_AccountForm","_component_BaseModal","_withCtx","openModal","_component_BaseButton","_component_IconProfileDelete","THEME_COLOR","$event"],"mappings":"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"}