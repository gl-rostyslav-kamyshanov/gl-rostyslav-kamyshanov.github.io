import{Q as c,aR as p,K as h,aY as S,v as o,Y as I,Z as T,a0 as l,a1 as y,aZ as b,a_ as P,ao as _,aU as E,$ as u}from"./DH8tuaqJ.js";import{H}from"./wgyA7P5a.js";const v=e=>{if(!(!e||e===c.ANYTIME)){if(e===c.TODAY)return 0;if(e===c.YESTERDAY)return-1;if(e===c.PAST_7_DAYS)return-7;if(e===c.PAST_30_DAYS)return-30;if(e===c.PAST_90_DAYS)return-90}},q=e=>{const t=e.type!==p.HIGHLIGHT?e.type:void 0,r=e.type===p.HIGHLIGHT?e.type:void 0,n=Array.isArray(e.sportType)&&e.sportType?.join(",")||void 0,s=v(e.dateRange),a=e.identityId==="all"?void 0:e.identityId,d=e.gender==="all"?void 0:e.gender,i={searchString:e.searchString||void 0,sportType:n,identityId:a,gender:d,status:t,mediaType:r,dateOffset:s,size:e.size||12,page:e.page||0,order:e.order,sort:e.sort};return e.type===p.HIGHLIGHT&&(i.eventFilters={"identities.type":a,gender:d},i.identityId=void 0),i},R=e=>{const t=Array.isArray(e.sportType)&&e.sportType?.join(",")||void 0,r=v(e.dateOffset),n=e.identityId==="all"?void 0:e.identityId;return{searchString:e.searchString||void 0,sportType:t,identityId:n,dateOffset:r,order:e.order,sort:e.sort}},M=e=>{const t=(e.relatedIdentities??[]).map(r=>({id:r._id||"",title:r.title||"",imageUrl:r.content?.PosterH||""}));return{identityId:e.identityId,count:e.count,identityTitle:e.identityTitle,relatedIdentities:t}},U=e=>{const n=h().public.APP_CUSTOMER.enable_teams_short_name&&e.shortTitle?e.shortTitle:e.title,s=e.content?.PosterF?.map(S)||[],a=e.content?.MobilePosterF?.map(S)||[],d=e.content?.PosterH?.[0]?.url||"";return{id:e._id,referenceId:e.referenceId,title:n,imageUrl:e.logo,bannerUrl:e.banner,identityIds:e.identities?.map(i=>i.type)||[],facebookUrl:e.socialMediasLinks?.facebook,instagramUrl:e.socialMediasLinks?.instagram,xUrl:e.socialMediasLinks?.twitter,webUrl:e.socialMediasLinks?.web,banners:s,mobileBanners:a,logoUrl:d}},C=e=>{const t=e.teams.map(r=>{const a=h().public.APP_CUSTOMER.enable_teams_short_name&&r.shortTitle?r.shortTitle:r.title;return{id:r._id,title:a,imageUrl:r.logo}});return{identityId:e._id,title:e.title,identityItems:t}},L={eventSearch(e){const{request:t}=o(),r=q(e);return e.type===p.HIGHLIGHT?t.post("/api/clip/list",{body:r}).then(n=>u.formatPaginated(n,u.formatMediaEvent)):t.post("/api/event/search",{body:r}).then(n=>u.formatPaginated(n,u.format))},async categoryWithSubcategorySearch(e){const{request:t}=o(),r=h().public,n=E(`${r.APP_CUSTOMER.name_short}-links`,[]);n.value&&n.value.length||await H.load();const s=R(e);return t.post("/api/identity/search",{body:s}).then(a=>a.content.entries.reduce((i,g)=>{const f=g.mainIdentityId,m=n.value.find(O=>O.id===f)?.title;if(!m)return i;const A={identityId:f,title:m,identityItems:g.identityItems.map(P)};return[...i,A]},[]))},categoryWithSubcategorySearchById(e){return L.categoryWithSubcategorySearch(e).then(t=>t.length===0?Promise.resolve(_([])):_(t[0].identityItems))},categorySearch(e){const{request:t}=o(),n={...l(e),type:"identity",archived:e?.archived,searchString:e?.searchString};return t.post("/api/identity/category_search",{body:n}).then(s=>y(s,b))},identitySubFacetsForMain(e){const{request:t}=o(),n=Object.assign({},{fields:"id,title,content",subsPerMainLimit:10},e);return t.get("/api/identity/sub_facets_for_main",{query:n}).then(s=>s.content.map(M))},identityItemSearch(e){const{request:t}=o(),n={...l(e),type:"identity_item",searchString:e.searchString,identityId:e.identityId};return t.post("/api/identity/advanced_search",{body:n}).then(s=>y(s,P))},identitySearch(e){const{request:t}=o(),n={...l(e),type:"identity",searchString:e.searchString,archived:e?.archived};return t.post("/api/identity/advanced_search",{body:n}).then(s=>y(s,b))},teamSearch(e){const{request:t}=o(),n={...l(e),type:"team",searchString:e.title,identityId:e.identityId};return t.get("/api/team/search",{query:n}).then(s=>y(s,U))},leagueWithTeamsSearch(e){const{request:t}=o(),r={sortIdentity:T.order,orderIdentity:I.asc,sortTeam:T.title,orderTeam:I.asc},n=Object.assign({},r,e);return t.post("/api/follow/team_list",{body:n}).then(s=>s.content.map(C))}};export{L as S,U as f};
//# sourceMappingURL=Dhyeswjy.js.map
