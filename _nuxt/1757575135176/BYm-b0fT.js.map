{"version":3,"file":"BYm-b0fT.js","sources":["../../../../app/pages/live/[sportType].vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { navigateTo } from \"#app\";\nimport useAsync from \"~/composables/use-async\";\nimport EventsAPI from \"~/services/events\";\n\nconst { t } = useI18n();\nconst route = useRoute();\nconst router = useRouter();\nconst localePath = useLocalePath();\nconst runtimeConfig = useRuntimeConfig().public;\nconst routeSportType = route.params.sportType === \"all\" ? undefined : route.params.sportType as TSportType;\n\nconst sportTypeBreadcrumb = computed(() => {\n  const sportType = route.params.sportType as TSportType | \"all\";\n\n  if (sportType !== \"all\" && sportType) {\n    return { to: `/live/${sportType}`, title: t(`sport_types.${sportType}`), active: true };\n  }\n\n  return { to: \"/live/all\", title: t(\"labels.all\"), active: true };\n});\n\nconst breadcrumbs = computed(() => [\n  { to: \"/\", title: t(\"labels.main\") },\n  { to: \"/live\", title: t(\"labels.live\"), active: true },\n  sportTypeBreadcrumb.value,\n]);\nconst tabsData = useState<IResponseGroupedSportCount | null>(\"tabs-data\", () => null);\nconst visibleTabs = ref<any[]>([]);\nconst invisibleTabs = ref<any[]>([]);\n\nconst isSelectedSportTypeInvisible = computed(() => {\n  return invisibleTabs.value.some(\n    tab => tab.key === routeSportType,\n  );\n});\n\nconst { run: loadGroupedSportCount, loading } = useAsync(EventsAPI.loadGroupedSportCount, {\n  onSuccess: (data) => {\n    tabsData.value = data;\n  },\n});\n\nconst tabs = computed(() => {\n  if (!tabsData.value)\n    return [];\n\n  return Object.entries(tabsData.value).map(([key, value]) => {\n    if (runtimeConfig.APP_FLAGS?.isDev && runtimeConfig.APP_FLAGS?.isPxa) {\n      if (value.archived) {\n        return {\n          key,\n          label: t(`sport_types.${key}`),\n          count: value.archived,\n          to: localePath({ params: { sportType: key } }),\n        };\n      }\n    }\n\n    if (value.live || value.live === 0) {\n      return {\n        key,\n        label: t(`sport_types.${key}`),\n        count: value.live,\n        to: localePath({ params: { sportType: key } }),\n      };\n    }\n\n    return null;\n  }).filter(Boolean);\n});\n\nconst measureTextWidth = (text: string, styles: Record<string, string>) => {\n  const container = document.createElement(\"span\");\n  container.style.visibility = \"hidden\";\n  container.style.position = \"absolute\";\n  container.style.whiteSpace = \"nowrap\";\n  Object.assign(container.style, styles);\n\n  container.textContent = text;\n  document.body.appendChild(container);\n  const width = container.offsetWidth;\n  document.body.removeChild(container);\n\n  return width;\n};\n\nconst calculateTabWidth = (tabData: any) => {\n  const labelStyles = {\n    fontWeight: \"500\",\n    fontSize: \"14px\",\n    padding: \"0 16px\",\n  };\n\n  const labelWidth = measureTextWidth(tabData?.label, labelStyles);\n  const countWidth = measureTextWidth(String(tabData?.count), labelStyles);\n\n  const iconWidth = 16;\n  const padding = 32;\n  const gap = 8;\n\n  return labelWidth + countWidth + iconWidth + padding + gap;\n};\n\nconst resizeTabs = () => {\n  let totalWidth = 0;\n  const maxWidth = window.innerWidth - 100;\n\n  visibleTabs.value = [];\n  invisibleTabs.value = [];\n\n  tabs.value.forEach((tab) => {\n    const tabWidth = calculateTabWidth(tab);\n    if (totalWidth + tabWidth <= maxWidth) {\n      visibleTabs.value.push(tab);\n      totalWidth += tabWidth;\n    }\n    else {\n      invisibleTabs.value.push(tab);\n    }\n  });\n};\n\nfunction navigateToFirstTab() {\n  const currentPath = new URL(route.fullPath, window.location.origin).pathname;\n\n  const isValidPath = tabs.value?.some(tab =>\n    new URL(tab?.to ?? \"\", window.location.origin).pathname === currentPath,\n  );\n\n  if (!isValidPath && tabs.value?.[0]?.to) {\n    router.replace(tabs.value[0].to);\n  }\n}\n\nonMounted(async () => {\n  if (!tabsData.value) {\n    await loadGroupedSportCount();\n  }\n  resizeTabs();\n  navigateToFirstTab();\n\n  window.addEventListener(\"resize\", resizeTabs);\n});\nonUnmounted(() => {\n  window.removeEventListener(\"resize\", resizeTabs);\n});\nwatch(tabs, navigateToFirstTab);\nwatchEffect(resizeTabs);\n\nuseHead({ title: t(\"labels.live\") });\ndefinePageMeta({ layout: \"home\" });\n</script>\n\n<template>\n  <div class=\"main-container mb-12\">\n    <BaseBreadcrumbs :items=\"breadcrumbs\" class=\"mb-10\" />\n    <h1 class=\"text-heading-1-bold text-main mb-6\">\n      {{ t('labels.live') }}\n    </h1>\n\n    <div v-if=\"loading\" class=\"skeletonLoading w-full h-12\" />\n\n    <div v-else-if=\"tabs.length > 1\" class=\"flex items-center\">\n      <div class=\"flex items-center flex-1\">\n        <UTabs :tabs=\"visibleTabs\" filled class=\"flex-1\">\n          <template #default=\"{ tab }\">\n            <div class=\"flex gap-2 items-center text-secondary tab-active\">\n              <IconSportType :sport-type=\"tab.key\" class=\"w-4 h-4\" />\n              <span>{{ tab.label }}</span>\n              <p class=\"flex items-center justify-center px-1 h-5 rounded-sm text-xs bg-[#f8f8f8] dark:bg-[#0f1624] tab-count-active\">\n                {{ tab?.count }}\n              </p>\n            </div>\n          </template>\n        </UTabs>\n\n        <UMenu\n          v-if=\"invisibleTabs.length\"\n        >\n          <template #trigger=\"{ toggle, shown }\">\n            <div class=\"bg-neutral-light-200 ml-[-3px] rtl:ml-0 rtl:mr-[-5px] dark:bg-neutral-dark-700 p-2 rounded-r rtl:rounded-l\">\n              <BaseButton\n                v-if=\"isSelectedSportTypeInvisible\"\n                name=\"selected sport type\"\n                title=\"Other\"\n                size=\"small\"\n                class=\"text-secondary w-24 !bg-[var(--base-primary-color)]\"\n                @click=\"toggle\"\n              >\n                <div class=\"flex gap-2 items-center\">\n                  <div>\n                    <IconSportType :sport-type=\"routeSportType\" class=\"w-4 h-4\" />\n                  </div>\n                  <span class=\"truncate\">\n                    {{ t(`sport_types.${routeSportType}`) }}\n                  </span>\n                  <div>\n                    <IconChevronUp v-if=\"shown\" class=\"inline\" :height=\"8\" :width=\"8\" />\n                    <IconChevronDown v-else class=\"inline\" :height=\"8\" :width=\"8\" />\n                  </div>\n                </div>\n              </BaseButton>\n\n              <BaseButton\n                v-else\n                name=\"other tabs\"\n                title=\"Other\"\n                size=\"small\"\n                type=\"icon\"\n                class=\"flex items-center justify-center gap-2 !p-1 text-secondary\"\n                @click=\"toggle\"\n              >\n                {{ t('labels.gameType_labels.other') }}\n                <IconChevronUp v-if=\"shown\" class=\"inline\" :height=\"8\" :width=\"8\" />\n                <IconChevronDown v-else class=\"inline\" :height=\"8\" :width=\"8\" />\n              </BaseButton>\n            </div>\n          </template>\n          <template #default=\"{ hide }\">\n            <UList class=\"grid grid-cols-2 px-2\">\n              <UListItem\n                v-for=\"tab in invisibleTabs\"\n                :key=\"tab.key\"\n                size=\"md\"\n                :has-hover=\"false\"\n              >\n                <BaseButton\n                  link\n                  full-width\n                  type=\"secondary\"\n                  :name=\"tab.label\"\n                  :title=\"tab.label\"\n                  class=\"w-full\"\n                  @click.capture=\"() => {\n                    navigateTo(tab.to);\n                    hide();\n                  }\"\n                >\n                  <div class=\"flex gap-2 items-center\">\n                    <IconSportType :sport-type=\"tab.key\" class=\"w-4 h-4\" />\n                    <span>{{ tab.label }}</span>\n                    <p class=\"flex items-center justify-center px-1 h-5 rounded-sm text-xs bg-[#f8f8f8] dark:bg-[#0f1624] tab-active\">\n                      {{ tab?.count }}\n                    </p>\n                  </div>\n                </BaseButton>\n              </UListItem>\n            </UList>\n          </template>\n        </UMenu>\n      </div>\n    </div>\n\n    <NuxtPage keepalive :sport-type=\"routeSportType\" class=\"mt-6\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.router-link-active .tab-active {\n  color: #fff;\n}\n.router-link-active .tab-count-active {\n  border: 1px solid #fff;\n  background-color: transparent;\n  color: #fff;\n}\n\n:deep(.u-tabs) {\n  flex: 1;\n  min-width: 0;\n}\n\n:deep(.tabs-list) {\n  display: flex;\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n</style>\n"],"names":["t","useI18n","route","useRoute","router","useRouter","localePath","useLocalePath","runtimeConfig","useRuntimeConfig","routeSportType","sportTypeBreadcrumb","computed","sportType","breadcrumbs","tabsData","useState","visibleTabs","ref","invisibleTabs","isSelectedSportTypeInvisible","tab","loadGroupedSportCount","loading","useAsync","EventsAPI","data","tabs","key","value","measureTextWidth","text","styles","container","width","calculateTabWidth","tabData","labelStyles","labelWidth","countWidth","resizeTabs","totalWidth","maxWidth","tabWidth","navigateToFirstTab","currentPath","onMounted","onUnmounted","watch","watchEffect","useHead","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_BaseBreadcrumbs","_unref","_createElementVNode","_hoisted_2","_toDisplayString","_hoisted_3","_hoisted_4","_hoisted_5","_component_UTabs","_withCtx","_hoisted_6","_component_IconSportType","_hoisted_7","_createBlock","_component_UMenu","toggle","shown","_hoisted_8","_component_BaseButton","_hoisted_9","_hoisted_10","_component_IconChevronUp","_component_IconChevronDown","_createTextVNode","hide","_component_UList","_Fragment","_renderList","_component_UListItem","navigateTo","_hoisted_11","_hoisted_12","_component_NuxtPage"],"mappings":"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"}