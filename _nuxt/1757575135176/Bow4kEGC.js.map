{"version":3,"file":"Bow4kEGC.js","sources":["../../../../app/components/List/IdentityItems.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useBreakpointsLimit from \"~/composables/use-breakpoints-limit\";\nimport useList from \"~/composables/use-list\";\nimport usePagination from \"~/composables/use-pagination\";\nimport { ORDER, SORT } from \"~/constants\";\nimport CategoriesAPI from \"~/services/categories\";\nimport FollowAPI from \"~/services/follow\";\nimport { returnPaginatedResponse } from \"~/services/format\";\nimport SearchAPI from \"~/services/search\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nexport interface ListIdentityItemsProps {\n  limit?: number;\n  title?: string;\n  items?: IModelIdentityItem[];\n  hideOnNoContent?: boolean;\n  identityId?: string;\n  linkList?: boolean;\n  hasSeeAllLink?: boolean;\n  hasLoadMoreButton?: boolean;\n  seeAllLink?: string;\n  seeAllLinkPlacement?: \"bottom-center\" | \"top-right\";\n  searchValue?: string;\n  gridClass?: string;\n  loading?: boolean;\n  error?: string;\n  loadOnlyFollowed?: boolean;\n}\n\nconst props = withDefaults(defineProps<ListIdentityItemsProps>(), {\n  gridClass: \"clubs-grid__desktopWide\",\n  seeAllLinkPlacement: \"top-right\",\n});\n\nconst { t, te } = useI18n();\nconst useLimit = useBreakpointsLimit({ sm: 6, md: 6, lg: 8, xl: 10, xl2: 12, xl3: 16, xl4: 22, xl5: 16, xl6: 16 });\n\nconst staticLimit = 20;\nconst dynamicLimit = useLimit.value;\n\nconst limit = props.limit ? props.limit : staticLimit;\n\nconst { items: teams, error, loadMore, canLoadMore, loading } = usePagination<IModelIdentityItem>({\n  immediate: true,\n  pageSize: limit,\n  paginateExistItems: props.items && props.items.length > 0,\n  loadItemsFn: (page: number, pageSize: number) => {\n    if (props.items || !props.identityId) {\n      return Promise.resolve(returnPaginatedResponse([]));\n    }\n\n    if (props.loadOnlyFollowed && props.identityId) {\n      return FollowAPI.loadCache({\n        page,\n        pageSize,\n        identityId: props.identityId,\n        sort: SORT.added,\n        order: ORDER.asc,\n      });\n    }\n\n    if (props.searchValue) {\n      return SearchAPI.identityItemSearch({\n        page,\n        pageSize,\n        searchString: props.searchValue,\n        identityId: props.identityId,\n      });\n    }\n\n    return CategoriesAPI.subCategories.load({\n      page,\n      pageSize,\n      identityId: props.identityId,\n      sort: SORT.order,\n      order: ORDER.asc,\n    });\n  },\n});\n\nconst seeAllPath = computed(() => {\n  if (props.seeAllLink) {\n    return props.seeAllLink;\n  }\n\n  return `/following/category/${props.identityId}/`;\n});\nconst seeAllLinkPath = computed(() => ({\n  path: seeAllPath.value,\n  query: {\n    q: props.searchValue,\n  },\n}));\nconst items = computed(() => props.items ? props.items.concat(teams.value) : teams.value);\nconst filteredItems = useList(items, {\n  limit: props.hasLoadMoreButton ? undefined : props.limit || dynamicLimit,\n  searchProperty: \"title\",\n});\nconst canShowSeeAllLink = computed(() => canLoadMore.value || items.value.length > limit);\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\n</script>\n\n<template>\n  <BaseList\n    :items=\"filteredItems\"\n    :title=\"props.title\"\n    :limit=\"limit\"\n    :error=\"errorMessage ?? props.error\"\n    :loading=\"loading || props.loading\"\n    :grid-class=\"props.gridClass\"\n    :hide-on-no-content=\"props.hideOnNoContent\"\n    :see-all-link-placement=\"props.seeAllLinkPlacement\"\n    :see-all-link-path=\"seeAllLinkPath\"\n    :has-load-more-button=\"props.hasLoadMoreButton && canLoadMore\"\n    :has-see-all-link=\"props.hasSeeAllLink && canShowSeeAllLink\"\n    :no-content-text=\"t('errors.could_not_find_results')\"\n    @click-load-more=\"loadMore()\"\n  >\n    <template #start>\n      <slot name=\"start\" />\n    </template>\n    <template #item=\"{ item }\">\n      <UserCardClub\n        :is-link=\"props.linkList\"\n        :item=\"item\"\n        :main-category-id=\"props.identityId\"\n        type=\"identity_item\"\n      />\n    </template>>\n    <template #skeleton>\n      <CardClubSkeleton />\n    </template>\n    <template #end>\n      <slot name=\"end\" />\n    </template>\n  </BaseList>\n</template>\n"],"names":["staticLimit","props","__props","t","te","useI18n","dynamicLimit","useBreakpointsLimit","limit","teams","error","loadMore","canLoadMore","loading","usePagination","page","pageSize","returnPaginatedResponse","FollowAPI","SORT","ORDER","SearchAPI","CategoriesAPI","seeAllPath","computed","seeAllLinkPath","items","filteredItems","useList","canShowSeeAllLink","errorMessage","getErrorLocalePathMessage","_createBlock","_component_BaseList","_unref","_renderSlot","_ctx","_withCtx","item","_createVNode","_component_UserCardClub","_component_CardClubSkeleton"],"mappings":"4XAqCA,MAAMA,EAAc,mYARpB,MAAMC,EAAQC,EAKR,CAAE,EAAAC,EAAG,GAAAC,CAAA,EAAOC,EAAA,EAIZC,EAHWC,EAAoB,CAAE,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,EAGnF,MAExBC,EAAQP,EAAM,MAAQA,EAAM,MAAQD,EAEpC,CAAE,MAAOS,EAAO,MAAAC,EAAO,SAAAC,EAAU,YAAAC,EAAa,QAAAC,CAAA,EAAYC,EAAkC,CAChG,UAAW,GACX,SAAUN,EACV,mBAAoBP,EAAM,OAASA,EAAM,MAAM,OAAS,EACxD,YAAa,CAACc,EAAcC,IACtBf,EAAM,OAAS,CAACA,EAAM,WACjB,QAAQ,QAAQgB,EAAwB,CAAA,CAAE,CAAC,EAGhDhB,EAAM,kBAAoBA,EAAM,WAC3BiB,EAAU,UAAU,CACzB,KAAAH,EACA,SAAAC,EACA,WAAYf,EAAM,WAClB,KAAMkB,EAAK,MACX,MAAOC,EAAM,GAAA,CACd,EAGCnB,EAAM,YACDoB,EAAU,mBAAmB,CAClC,KAAAN,EACA,SAAAC,EACA,aAAcf,EAAM,YACpB,WAAYA,EAAM,UAAA,CACnB,EAGIqB,EAAc,cAAc,KAAK,CACtC,KAAAP,EACA,SAAAC,EACA,WAAYf,EAAM,WAClB,KAAMkB,EAAK,MACX,MAAOC,EAAM,GAAA,CACd,CACH,CACD,EAEKG,EAAaC,EAAS,IACtBvB,EAAM,WACDA,EAAM,WAGR,uBAAuBA,EAAM,UAAU,GAC/C,EACKwB,EAAiBD,EAAS,KAAO,CACrC,KAAMD,EAAW,MACjB,MAAO,CACL,EAAGtB,EAAM,WAAA,CACX,EACA,EACIyB,EAAQF,EAAS,IAAMvB,EAAM,MAAQA,EAAM,MAAM,OAAOQ,EAAM,KAAK,EAAIA,EAAM,KAAK,EAClFkB,EAAgBC,EAAQF,EAAO,CACnC,MAAOzB,EAAM,kBAAoB,OAAYA,EAAM,OAASK,EAC5D,eAAgB,OAAA,CACjB,EACKuB,EAAoBL,EAAS,IAAMZ,EAAY,OAASc,EAAM,MAAM,OAASlB,CAAK,EAClFsB,EAAeN,EAAS,IAAMd,EAAM,OAASqB,EAA0BrB,EAAM,MAAO,CAAE,EAAAP,EAAG,GAAAC,CAAA,CAAI,EAAE,OAAO,6CAI1G4B,EAgCWC,EAAA,CA/BR,MAAOC,EAAAP,CAAA,EACP,MAAO1B,EAAM,MACb,MAAOiC,EAAA1B,CAAA,EACP,MAAO0B,EAAAJ,CAAA,GAAgB7B,EAAM,MAC7B,QAASiC,EAAArB,CAAA,GAAWZ,EAAM,QAC1B,aAAYA,EAAM,UAClB,qBAAoBA,EAAM,gBAC1B,yBAAwBA,EAAM,oBAC9B,oBAAmBiC,EAAAT,CAAA,EACnB,uBAAsBxB,EAAM,mBAAqBiC,EAAAtB,CAAA,EACjD,mBAAkBX,EAAM,eAAiBiC,EAAAL,CAAA,EACzC,kBAAiBK,EAAA/B,CAAA,EAAC,+BAAA,EAClB,+BAAiB+B,EAAAvB,CAAA,EAAA,EAAQ,GAEf,QACT,IAAqB,CAArBwB,EAAqBC,EAAA,OAAA,OAAA,CAAA,GAEZ,KAAIC,EACb,CAKE,CANe,KAAAC,KAAI,CACrBC,EAKEC,EAAA,CAJC,UAASvC,EAAM,SACf,KAAAqC,EACA,mBAAkBrC,EAAM,WACzB,KAAK,eAAA,kDAGE,WACT,IAAoB,CAApBsC,EAAoBE,CAAA,CAAA,GAEX,MACT,IAAmB,CAAnBN,EAAmBC,EAAA,OAAA,KAAA,CAAA,aALV,IACX,eADW,KACX,EAAA,EAAA"}