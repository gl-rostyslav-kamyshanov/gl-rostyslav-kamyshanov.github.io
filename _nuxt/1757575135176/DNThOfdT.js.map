{"version":3,"file":"DNThOfdT.js","sources":["../../../../app/components/Commerce/AccessCodeRedeemUser.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useAsync from \"~/composables/use-async\";\nimport { COMMERCE_TYPE } from \"~/constants\";\nimport BillingAPI from \"~/services/billing\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst { t, te } = useI18n();\nconst toaster = useToast();\nconst router = useRouter();\n\nconst onSuccess = (commerce: IModelCommerce) => {\n  toaster.success(t(\"pages.account_subscription.alert_access_code_redeemed_success\"));\n  if (commerce.type === COMMERCE_TYPE.SVOD || commerce.type === COMMERCE_TYPE.CVOD) {\n    router.push(`/account/subscription/${commerce.id}/`);\n  }\n  else { // FIXME: temporary, until BE will fix response type\n    router.push(`/account/ppv/${commerce.id}/`);\n  }\n};\nconst onError = (error: Error) => {\n  const { message } = getErrorLocalePathMessage(error.message, { t, te });\n  return toaster.error(message);\n};\nconst { loading, run: onAccessCodeRedeem } = useAsync(BillingAPI.redeemAccessCode, { onSuccess, onError });\n</script>\n\n<template>\n  <CommerceAccessCodeRedeem\n    :disabled=\"loading\"\n    root-class=\"p-4 border-[1px] border-[var(--base-border-color)] rounded-[var(--base-border-radius)]\"\n    :input-placeholder=\"t('pages.events.submit_reedem_code_input_placeholder')\"\n    @submit=\"onAccessCodeRedeem\"\n  >\n    <template #label>\n      <div class=\"text-base mb-4 font-medium text-secondary\">\n        {{ t('pages.account_subscription.redeem_access_code_label') }}:\n      </div>\n    </template>\n    <template #input-suffix=\"{ disabled, onSubmit }\">\n      <BaseButton\n        size=\"small\" name=\"submit-redeem\" type=\"primary\"\n        :disabled=\"disabled\" class=\"min-w-[100px]\"\n        @click.prevent=\"onSubmit\"\n      >\n        {{ t('labels.submit') }}\n      </BaseButton>\n    </template>\n  </CommerceAccessCodeRedeem>\n</template>\n"],"names":["t","te","useI18n","toaster","useToast","router","useRouter","onSuccess","commerce","COMMERCE_TYPE","onError","error","message","getErrorLocalePathMessage","loading","onAccessCodeRedeem","useAsync","BillingAPI","_createBlock","_component_CommerceAccessCodeRedeem","_unref","_createElementVNode","_hoisted_1","_toDisplayString","_withCtx","disabled","onSubmit","_createVNode","_component_BaseButton"],"mappings":"0TAMA,KAAM,CAAE,EAAAA,EAAG,GAAAC,CAAA,EAAOC,EAAA,EACZC,EAAUC,EAAA,EACVC,EAASC,EAAA,EAETC,EAAaC,GAA6B,CAC9CL,EAAQ,QAAQH,EAAE,+DAA+D,CAAC,EAC9EQ,EAAS,OAASC,EAAc,MAAQD,EAAS,OAASC,EAAc,KAC1EJ,EAAO,KAAK,yBAAyBG,EAAS,EAAE,GAAG,EAGnDH,EAAO,KAAK,gBAAgBG,EAAS,EAAE,GAAG,CAE9C,EACME,EAAWC,GAAiB,CAChC,KAAM,CAAE,QAAAC,GAAYC,EAA0BF,EAAM,QAAS,CAAE,EAAAX,EAAG,GAAAC,EAAI,EACtE,OAAOE,EAAQ,MAAMS,CAAO,CAC9B,EACM,CAAE,QAAAE,EAAS,IAAKC,GAAuBC,EAASC,EAAW,iBAAkB,CAAE,UAAAV,EAAW,QAAAG,EAAS,yCAIvGQ,EAoB2BC,EAAA,CAnBxB,SAAUC,EAAAN,CAAA,EACX,aAAW,yFACV,oBAAmBM,EAAApB,CAAA,EAAC,mDAAA,EACpB,SAAQoB,EAAAL,CAAA,CAAA,GAEE,QACT,IAEM,CAFNM,EAEM,MAFNC,EAEMC,EADDH,EAAApB,CAAA,0DAA2D,KAChE,CAAA,CAAA,GAES,eAAYwB,EACrB,CAMa,CAPY,SAAAC,EAAU,SAAAC,KAAQ,CAC3CC,EAMaC,EAAA,CALX,KAAK,QAAQ,KAAK,gBAAgB,KAAK,UACtC,SAAAH,EAAoB,MAAM,gBAC1B,UAAeC,EAAQ,CAAA,SAAA,CAAA,CAAA,aAExB,IAAwB,KAArBN,EAAApB,CAAA,EAAC,eAAA,CAAA,EAAA,CAAA,CAAA"}