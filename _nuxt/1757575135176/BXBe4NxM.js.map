{"version":3,"file":"BXBe4NxM.js","sources":["../../../../app/components/Base/List.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { vElementVisibility } from \"@vueuse/components\";\nimport { groupByKey } from \"~/utils/array\";\nimport formatDate from \"~/utils/format-date\";\n\nexport interface BaseListProps<T> {\n  limit?: number;\n  items?: T[];\n  loading?: boolean;\n  error?: string | null;\n  rootClass?: string;\n  loadWhenVisible?: boolean;\n  noContentText?: string;\n  gridClass?: string;\n  title?: string;\n  hideOnNoContent?: boolean;\n  groupByKey?: keyof T;\n  groupByDate?: boolean;\n  seeAllLinkPath?: any;\n  seeAllLinkPlacement?: \"bottom-center\" | \"top-right\";\n  hasSeeAllLink?: boolean;\n  hasLoadMoreButton?: boolean;\n  hasLazyPagination?: boolean;\n}\n\nconst { t, locale } = useI18n();\nconst isRootVisible = ref(false);\nconst props = withDefaults(defineProps<BaseListProps<any>>(), {\n  limit: 8,\n  gridClass: \"main-grid\",\n});\nconst emit = defineEmits([\"clickLoadMore\", \"visible\"]);\nconst onLoadMore = () => emit(\"clickLoadMore\");\n\nconst isComponentShown = computed(() => {\n  if (props.hideOnNoContent) {\n    if (props.loadWhenVisible)\n      return isRootVisible.value ? props.loading || props.error || props.items?.length : true;\n    return props.loading || props.error || props.items?.length;\n  }\n  return true;\n});\nfunction onElementVisibility(isVisible: boolean) {\n  isRootVisible.value = isVisible;\n  if (!props.loadWhenVisible)\n    return;\n  const isLoading = props.loading || props.error;\n  const hasItems = Boolean(props.items?.length);\n  if (isVisible && !isLoading && !hasItems)\n    emit(\"visible\");\n}\nfunction onEndOfComponentVisible(isVisible: boolean) {\n  if (!props.hasLazyPagination)\n    return;\n  const isLoading = props.loading || props.error;\n  const hasItems = Boolean(props.items?.length);\n  if (isVisible && !isLoading && hasItems)\n    onLoadMore();\n}\nconst getFormattedDate = (date: string): string => formatDate(date, \"PP\", locale.value as TAvailableLocale);\nconst listGroupItems = computed(() => props.groupByKey\n  ? props.items && groupByKey(props.items, (item) => {\n    return props.groupByDate ? getFormattedDate(item[props.groupByKey as string]) : item[props.groupByKey as string];\n  })\n  : props.items);\n</script>\n\n<template>\n  <div v-if=\"isComponentShown\" v-element-visibility=\"onElementVisibility\">\n    <div v-if=\"props.title || props.hasSeeAllLink && props.seeAllLinkPlacement === 'top-right'\" class=\"flex items-center justify-between mb-6\">\n      <div v-if=\"props.title\" class=\"font-bold\">\n        {{ props.title }}\n      </div>\n      <BaseButton\n        v-if=\"props.hasSeeAllLink && props.seeAllLinkPlacement === 'top-right'\"\n        name=\"see-all-items\"\n        class=\"text-heading-4\"\n        tag=\"nuxt-link\"\n        :to=\"props.seeAllLinkPath\"\n        link\n      >\n        {{ t('labels.see_all') }}\n      </BaseButton>\n    </div>\n    <slot name=\"start\" />\n\n    <template v-if=\"props.error\">\n      <slot name=\"error\">\n        <BaseNotFound :text=\"props.error\" />\n      </slot>\n    </template>\n\n    <template v-else-if=\"props.groupByKey && props.items?.length\">\n      <template v-for=\"(groupItems, key) in listGroupItems\" :key=\"key\">\n        <h3 class=\"text-heading-3 text-secondary pt-8 px-4 md:px-10 xl:px-12 first:mt-0\" :class=\"[props.gridClass]\">\n          {{ key }}\n        </h3>\n        <div :class=\"[props.gridClass, props.rootClass]\">\n          <slot v-for=\"item in groupItems\" :key=\"item\" :item=\"item\" name=\"item\" />\n        </div>\n      </template>\n    </template>\n\n    <div v-else-if=\"props.items?.length || props.loading\" :class=\"[props.gridClass, props.rootClass]\">\n      <slot v-for=\"(item, index) in props.items\" :key=\"item?.id || item?._id || index\" :item=\"item\" :index=\"index\" name=\"item\" />\n      <template v-if=\"props.loading\">\n        <slot v-for=\"item in props.limit\" :key=\"item\" name=\"skeleton\" />\n      </template>\n    </div>\n\n    <template v-else>\n      <slot name=\"empty\">\n        <BaseNotFound :text=\"props.noContentText\" />\n      </slot>\n    </template>\n\n    <div v-if=\"props.hasLoadMoreButton\" class=\"mt-10 flex justify-center\">\n      <BaseButton :disabled=\"props.loading\" name=\"load-more\" link type=\"primary\" class=\"text-heading-4 mx-8 truncate font-medium\" @click=\"onLoadMore\">\n        {{ t('labels.load_more') }}\n        <IconChevronDown class=\"inline\" :height=\"8\" :width=\"8\" />\n      </BaseButton>\n    </div>\n    <div v-if=\"props.hasSeeAllLink && props.seeAllLinkPlacement === 'bottom-center'\" class=\"text-center mt-6\">\n      <BaseButton name=\"see-all-items\" class=\"text-heading-4\" tag=\"nuxt-link\" :to=\"props.seeAllLinkPath\" link>\n        {{ t('labels.see_all') }}\n      </BaseButton>\n    </div>\n    <div v-element-visibility=\"onEndOfComponentVisible\" />\n    <slot name=\"end\" />\n  </div>\n</template>\n"],"names":["t","locale","useI18n","isRootVisible","ref","props","__props","emit","__emit","onLoadMore","isComponentShown","computed","onElementVisibility","isVisible","isLoading","hasItems","onEndOfComponentVisible","getFormattedDate","date","formatDate","listGroupItems","groupByKey","item","_unref","_createElementBlock","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_toDisplayString","_createBlock","_component_BaseButton","_renderSlot","_ctx","_createVNode","_component_BaseNotFound","_Fragment","_renderList","groupItems","key","_createElementVNode","_normalizeClass","index","_hoisted_4","_createTextVNode","_component_IconChevronDown","_hoisted_5"],"mappings":"26BAyBA,KAAM,CAAE,EAAAA,EAAG,OAAAC,CAAA,EAAWC,EAAA,EAChBC,EAAgBC,EAAI,EAAK,EACzBC,EAAQC,EAIRC,EAAOC,EACPC,EAAa,IAAMF,EAAK,eAAe,EAEvCG,EAAmBC,EAAS,IAC5BN,EAAM,gBACJA,EAAM,gBACDF,EAAc,MAAQE,EAAM,SAAWA,EAAM,OAASA,EAAM,OAAO,OAAS,GAC9EA,EAAM,SAAWA,EAAM,OAASA,EAAM,OAAO,OAE/C,EACR,EACD,SAASO,EAAoBC,EAAoB,CAE/C,GADAV,EAAc,MAAQU,EAClB,CAACR,EAAM,gBACT,OACF,MAAMS,EAAYT,EAAM,SAAWA,EAAM,MACnCU,EAAW,EAAQV,EAAM,OAAO,OAClCQ,GAAa,CAACC,GAAa,CAACC,GAC9BR,EAAK,SAAS,CAClB,CACA,SAASS,EAAwBH,EAAoB,CACnD,GAAI,CAACR,EAAM,kBACT,OACF,MAAMS,EAAYT,EAAM,SAAWA,EAAM,MACnCU,EAAW,EAAQV,EAAM,OAAO,OAClCQ,GAAa,CAACC,GAAaC,GAC7BN,EAAA,CACJ,CACA,MAAMQ,EAAoBC,GAAyBC,EAAWD,EAAM,KAAMjB,EAAO,KAAyB,EACpGmB,EAAiBT,EAAS,IAAMN,EAAM,WACxCA,EAAM,OAASgB,EAAWhB,EAAM,MAAQiB,GACjCjB,EAAM,YAAcY,EAAiBK,EAAKjB,EAAM,UAAoB,CAAC,EAAIiB,EAAKjB,EAAM,UAAoB,CAChH,EACCA,EAAM,KAAK,yCAIFkB,EAAAb,CAAA,SAAXc,EA6DM,MAAAC,EAAA,CA5DOpB,EAAM,OAASA,EAAM,eAAiBA,EAAM,sBAAmB,aAA1EqB,EAAA,EAAAF,EAcM,MAdNG,EAcM,CAbOtB,EAAM,OAAjBqB,EAAA,EAAAF,EAEM,MAFNI,EAEMC,EADDxB,EAAM,KAAK,EAAA,CAAA,YAGRA,EAAM,eAAiBA,EAAM,sBAAmB,iBADxDyB,EASaC,EAAA,OAPX,KAAK,gBACL,MAAM,iBACN,IAAI,YACH,GAAI1B,EAAM,eACX,KAAA,EAAA,aAEA,IAAyB,KAAtBkB,EAAAvB,CAAA,EAAC,gBAAA,CAAA,EAAA,CAAA,CAAA,wCAGRgC,EAAqBC,EAAA,OAAA,OAAA,EAEL5B,EAAM,MACpB2B,EAEOC,yBAFP,IAEO,CADLC,EAAoCC,EAAA,CAArB,KAAM9B,EAAM,KAAA,qBAIVA,EAAM,YAAcA,EAAM,OAAO,QACpDqB,EAAA,EAAA,EAAAF,EAOWY,EAAA,CAAA,IAAA,GAAAC,EAP2Bd,EAAAH,CAAA,EAAc,CAAlCkB,EAAYC,qBAAiC,CAC7DC,EAEK,KAAA,CAFD,MAAKC,EAAA,CAAC,uEAAsE,CAAUpC,EAAM,SAAS,CAAA,CAAA,CAAA,IACpGkC,CAAG,EAAA,CAAA,EAERC,EAEM,MAAA,CAFA,SAAQnC,EAAM,UAAWA,EAAM,SAAS,CAAA,CAAA,UAC5CmB,EAAwEY,EAAA,KAAAC,EAAnDC,EAARhB,GAAbU,EAAwEC,EAAA,OAAA,OAAA,CAAtC,IAAKX,EAAO,KAAAA,CAAA,2BAKpCjB,EAAM,OAAO,QAAUA,EAAM,aAA7CmB,EAKM,MAAA,OALiD,SAAQnB,EAAM,UAAWA,EAAM,SAAS,CAAA,CAAA,IAC7FqB,EAAA,EAAA,EAAAF,EAA2HY,SAA7F/B,EAAM,MAAK,CAA3BiB,EAAMoB,IAApBV,EAA2HC,EAAA,OAAA,OAAA,CAA/E,IAAKX,GAAM,IAAMA,GAAM,KAAOoB,EAAQ,KAAApB,EAAa,MAAAoB,CAAA,UAC/ErC,EAAM,SACpBqB,EAAA,EAAA,EAAAF,EAAgEY,EAAA,CAAA,IAAA,GAAAC,EAA3ChC,EAAM,MAAdiB,GAAbU,EAAgEC,EAAA,OAAA,WAAA,CAA7B,IAAKX,EAAI,uBAK9CU,EAEOC,yBAFP,IAEO,CADLC,EAA4CC,EAAA,CAA7B,KAAM9B,EAAM,aAAA,qBAIpBA,EAAM,mBAAjBqB,EAAA,EAAAF,EAKM,MALNmB,EAKM,CAJJT,EAGaH,EAAA,CAHA,SAAU1B,EAAM,QAAS,KAAK,YAAY,KAAA,GAAK,KAAK,UAAU,MAAM,2CAA4C,QAAOI,CAAA,aAClI,IAA2B,CAAxBmC,EAAAf,EAAAN,EAAAvB,CAAA,uBAAwB,IAC3B,CAAA,EAAAkC,EAAyDW,EAAA,CAAxC,MAAM,SAAU,OAAQ,EAAI,MAAO,CAAA,sCAG7CxC,EAAM,eAAiBA,EAAM,sBAAmB,iBAA3DqB,IAAAF,EAIM,MAJNsB,EAIM,CAHJZ,EAEaH,EAAA,CAFD,KAAK,gBAAgB,MAAM,iBAAiB,IAAI,YAAa,GAAI1B,EAAM,eAAgB,KAAA,EAAA,aACjG,IAAyB,KAAtBkB,EAAAvB,CAAA,EAAC,gBAAA,CAAA,EAAA,CAAA,CAAA,gCAGRwC,EAAsD,MAAA,KAAA,KAAA,GAAA,EAAA,OAA3BxB,CAAuB,CAAA,GAClDgB,EAAmBC,EAAA,OAAA,KAAA,CAAA,WA5D8BrB,CAAmB,CAAA"}