{"version":3,"file":"ChRHBNQB.js","sources":["../../../../app/components/List/Identities.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useList from \"~/composables/use-list\";\nimport usePagination from \"~/composables/use-pagination\";\nimport { ORDER, SEGMENT_TRACK_EVENTS, SORT } from \"~/constants\";\nimport CategoriesAPI from \"~/services/categories\";\nimport { returnPaginatedResponse } from \"~/services/format\";\nimport SearchAPI from \"~/services/search\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nexport interface ListIdentitiesProps<T> {\n  searchValue?: string;\n  gridClass?: string;\n  limit?: number;\n  loadMainCategory?: boolean;\n  loadArchived?: boolean;\n  loadOnlyFollowed?: boolean;\n  hasLoadMoreButton?: boolean;\n  loadWhenVisible?: boolean;\n  linkList?: boolean;\n  title?: string;\n  items?: T[];\n  loading?: boolean;\n  error?: string;\n  noContentText?: string;\n  filterValue?: string;\n  hideOnNoContent?: boolean;\n  hasSeeAllLink?: boolean;\n  seeAllLink?: string;\n  seeAllLinkPlacement?: \"bottom-center\" | \"top-right\";\n  queryParams?: Record<string, any>;\n  isArchived?: boolean;\n}\n\nconst { t, te } = useI18n();\nconst segment = useSegment();\nconst props = withDefaults(defineProps<ListIdentitiesProps<IModelIdentityItem | IModelFollowedItem | IModelIdentity>>(), {\n  gridClass: \"clubs-grid__desktopWide\",\n  seeAllLinkPlacement: \"top-right\",\n});\n\nconst staticLimit = 20;\nconst limit = props.limit ? props.limit : staticLimit;\n\nconst onIdentityClick = (identity: IModelIdentity) => {\n  segment.track(SEGMENT_TRACK_EVENTS.CLICK_ON_LEAGUE, {\n    league_id: identity.id,\n    league_name: identity.title,\n  });\n};\nconst createParams = (page: number, pageSize: number, additionalParams = {}) => ({\n  page,\n  pageSize,\n  sort: SORT.order,\n  order: ORDER.asc,\n  ...additionalParams,\n});\n\nconst { items: identities, error, loadMore, canLoadMore, loading, reset } = usePagination<IModelIdentity> ({\n  pageSize: limit,\n  immediate: true,\n  paginateExistItems: Boolean(props.loadOnlyFollowed),\n  loadItemsFn: (page: number, pageSize: number) => {\n    if (props.items)\n      return Promise.resolve(returnPaginatedResponse([]));\n\n    const params = createParams(page, pageSize, { archived: props.isArchived });\n\n    if (props.searchValue)\n      return SearchAPI.identitySearch({ ...params, searchString: props.searchValue });\n\n    return CategoriesAPI.load(params);\n  },\n});\n\nconst items = computed(() => props.items ? props.items.concat(identities.value) : identities.value);\nconst filteredItems = useList(items, {\n  limit: props.hasLoadMoreButton ? undefined : limit,\n  searchProperty: \"title\",\n  searchValue: computed(() => props.filterValue || \"\"),\n});\n\nconst canShowSeeAllLink = computed(() => canLoadMore.value || items.value.length > limit);\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\n</script>\n\n<template>\n  <BaseList\n    :title=\"props.title\"\n    :items=\"filteredItems\"\n    :limit=\"limit\"\n    :loading=\"loading || props.loading\"\n    :load-when-visible=\"props.loadWhenVisible\"\n    :has-load-more-button=\"props.hasLoadMoreButton && canLoadMore\"\n    :has-see-all-link=\"props.hasSeeAllLink && canShowSeeAllLink\"\n    :error=\"errorMessage || props.error\"\n    :grid-class=\"props.gridClass\"\n    :hide-on-no-content=\"props.hideOnNoContent\"\n    :see-all-link-placement=\"props.seeAllLinkPlacement\"\n    :no-content-text=\"t('errors.could_not_find_results')\"\n    @click-load-more=\"loadMore()\"\n    @visible=\"reset()\"\n  >\n    <template #start>\n      <slot name=\"start\" />\n    </template>\n    <template #item=\"{ item }\">\n      <NuxtLink :to=\"`/league/${item.id}`\">\n        <CardClub :title=\"item.title\" :image-url=\"item.imageUrl\" with-initials :width=\"96\" :height=\"96\" @click=\"() => onIdentityClick(item)\" />\n      </NuxtLink>\n    </template>\n    <template #skeleton>\n      <CardClubSkeleton />\n    </template>\n    <template #empty>\n      <slot name=\"empty\">\n        <div v-if=\"props.loadWhenVisible\" class=\"min-h-400px\" />\n      </slot>\n    </template>\n    <template #end>\n      <slot name=\"end\" />\n    </template>\n  </BaseList>\n</template>\n"],"names":["staticLimit","t","te","useI18n","segment","useSegment","props","__props","limit","onIdentityClick","identity","SEGMENT_TRACK_EVENTS","createParams","page","pageSize","additionalParams","SORT","ORDER","identities","error","loadMore","canLoadMore","loading","reset","usePagination","returnPaginatedResponse","params","SearchAPI","CategoriesAPI","items","computed","filteredItems","useList","canShowSeeAllLink","errorMessage","getErrorLocalePathMessage","_createBlock","_component_BaseList","_unref","_renderSlot","_ctx","_withCtx","item","_createVNode","_component_NuxtLink","_component_CardClub","_component_CardClubSkeleton","_openBlock","_createElementBlock","_hoisted_1"],"mappings":"0XAwCMA,EAAc,shBAPpB,KAAM,CAAE,EAAAC,EAAG,GAAAC,CAAA,EAAOC,EAAA,EACZC,EAAUC,EAAA,EACVC,EAAQC,EAMRC,EAAQF,EAAM,MAAQA,EAAM,MAAQN,EAEpCS,EAAmBC,GAA6B,CACpDN,EAAQ,MAAMO,EAAqB,gBAAiB,CAClD,UAAWD,EAAS,GACpB,YAAaA,EAAS,KAAA,CACvB,CACH,EACME,EAAe,CAACC,EAAcC,EAAkBC,EAAmB,CAAA,KAAQ,CAC/E,KAAAF,EACA,SAAAC,EACA,KAAME,EAAK,MACX,MAAOC,EAAM,IACb,GAAGF,CAAA,GAGC,CAAE,MAAOG,EAAY,MAAAC,EAAO,SAAAC,EAAU,YAAAC,EAAa,QAAAC,EAAS,MAAAC,CAAA,EAAUC,EAA+B,CACzG,SAAUhB,EACV,UAAW,GACX,mBAAoB,EAAQF,EAAM,iBAClC,YAAa,CAACO,EAAcC,IAAqB,CAC/C,GAAIR,EAAM,MACR,OAAO,QAAQ,QAAQmB,EAAwB,CAAA,CAAE,CAAC,EAEpD,MAAMC,EAASd,EAAaC,EAAMC,EAAU,CAAE,SAAUR,EAAM,WAAY,EAE1E,OAAIA,EAAM,YACDqB,EAAU,eAAe,CAAE,GAAGD,EAAQ,aAAcpB,EAAM,YAAa,EAEzEsB,EAAc,KAAKF,CAAM,CAClC,CAAA,CACD,EAEKG,EAAQC,EAAS,IAAMxB,EAAM,MAAQA,EAAM,MAAM,OAAOY,EAAW,KAAK,EAAIA,EAAW,KAAK,EAC5Fa,EAAgBC,EAAQH,EAAO,CACnC,MAAOvB,EAAM,kBAAoB,OAAYE,EAC7C,eAAgB,QAChB,YAAasB,EAAS,IAAMxB,EAAM,aAAe,EAAE,CAAA,CACpD,EAEK2B,EAAoBH,EAAS,IAAMT,EAAY,OAASQ,EAAM,MAAM,OAASrB,CAAK,EAClF0B,EAAeJ,EAAS,IAAMX,EAAM,OAASgB,EAA0BhB,EAAM,MAAO,CAAE,EAAAlB,EAAG,GAAAC,CAAA,CAAI,EAAE,OAAO,iDAI1GkC,EAmCWC,EAAA,CAlCR,MAAO/B,EAAM,MACb,MAAOgC,EAAAP,CAAA,EACP,MAAOO,EAAA9B,CAAA,EACP,QAAS8B,EAAAhB,CAAA,GAAWhB,EAAM,QAC1B,oBAAmBA,EAAM,gBACzB,uBAAsBA,EAAM,mBAAqBgC,EAAAjB,CAAA,EACjD,mBAAkBf,EAAM,eAAiBgC,EAAAL,CAAA,EACzC,MAAOK,EAAAJ,CAAA,GAAgB5B,EAAM,MAC7B,aAAYA,EAAM,UAClB,qBAAoBA,EAAM,gBAC1B,yBAAwBA,EAAM,oBAC9B,kBAAiBgC,EAAArC,CAAA,EAAC,+BAAA,EAClB,+BAAiBqC,EAAAlB,CAAA,KACjB,yBAASkB,EAAAf,CAAA,EAAA,EAAK,GAEJ,QACT,IAAqB,CAArBgB,EAAqBC,EAAA,OAAA,OAAA,CAAA,GAEZ,KAAIC,EACb,CAEW,CAHM,KAAAC,KAAI,CACrBC,EAEWC,EAAA,CAFA,GAAE,WAAaF,EAAK,EAAE,EAAA,aAC/B,IAAuI,CAAvIC,EAAuIE,EAAA,CAA5H,MAAOH,EAAK,MAAQ,YAAWA,EAAK,SAAU,gBAAA,GAAe,MAAO,GAAK,OAAQ,GAAK,QAAK,IAAQjC,EAAgBiC,CAAI,CAAA,gEAG3H,WACT,IAAoB,CAApBC,EAAoBG,CAAA,CAAA,GAEX,QACT,IAEO,CAFPP,EAEOC,oBAFP,IAEO,CADMlC,EAAM,iBAAjByC,EAAA,EAAAC,EAAwD,MAAxDC,CAAwD,gBAGjD,MACT,IAAmB,CAAnBV,EAAmBC,EAAA,OAAA,KAAA,CAAA"}