{"version":3,"file":"DwQ4I_jW.js","sources":["../../../../app/pages/following/category/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useRouteQuery } from \"@vueuse/router\";\nimport useAsync from \"~/composables/use-async\";\nimport SearchAPI from \"~/services/search\";\nimport useUserStore from \"~/stores/user\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst route = useRoute();\nconst router = useRouter();\nconst segment = useSegment();\nconst { t, te } = useI18n();\nconst userStore = useUserStore();\nconst search = useRouteQuery<string>(\"q\", \"\", { route, router });\nconst hasFollowingItems = computed(() => Boolean(Object.keys(userStore.followed).length));\nconst { y: windowY } = useWindowScroll();\nconst isHeaderSearchShown = computed(() => windowY.value > 160);\nconst {\n  data: mainCategories,\n  run: loadItems,\n  loading,\n  error,\n} = useAsync(SearchAPI.identitySubFacetsForMain);\nconst onSearchClear = () => {\n  search.value = \"\";\n  loadItems();\n};\n\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\nconst onSearchInput = () => loadItems({ searchString: search.value });\nconst noResultsFound = computed(() => mainCategories.value?.length === 0);\nconst showFollowedItems = computed(() => !search.value && hasFollowingItems.value && !noResultsFound.value);\n\nonMounted(() => {\n  segment.page(\"Manage Following\", {\n    previous_path: window.history.state?.back,\n  });\n  return loadItems({ searchString: search.value });\n});\nuseHead({ title: \"Following\" });\ndefinePageMeta({ middleware: \"auth\" });\n</script>\n\n<template>\n  <div>\n    <AuthHeader\n      :class=\"{ '!my-0': isHeaderSearchShown }\"\n      :transparent=\"!isHeaderSearchShown\"\n      fixed\n      with-locale\n    >\n      <template v-if=\"isHeaderSearchShown\" #append-center>\n        <div class=\"sm:w-[25rem] md:w-[30rem] lg:w-[40rem] lg:-mr-[1rem] rtl:lg:mr-[6rem]\">\n          <BaseInput\n            v-model=\"search\"\n            class=\"truncate\"\n            name=\"search\"\n            :disabled=\"loading\"\n            :placeholder=\"t('labels.search_input_placeholder')\"\n            search\n            @clear=\"onSearchClear()\"\n            @keyup.enter=\"onSearchInput\"\n          />\n        </div>\n      </template>\n    </AuthHeader>\n\n    <BaseMain class=\"min-h-screen\">\n      <div class=\"pt-32 pb-12 form-column\">\n        <div class=\"w-[20rem] sm:w-[30rem] md:w-[35rem] lg:w-[40rem]\">\n          <h1 class=\"mb-10 text-3xl font-bold text-center max-sm:mx-8\">\n            {{ t(\"pages.auth_sign_up.follow_category_header\") }}\n          </h1>\n\n          <!-- TODO: sticky top-8 z-22  -->\n          <div class=\"px-2 mb-10 sm:px-0\">\n            <BaseInput\n              v-model=\"search\"\n              class=\"truncate\"\n              name=\"search\"\n              :disabled=\"loading\"\n              :placeholder=\"t('labels.search_input_placeholder')\"\n              search\n              @clear=\"onSearchClear()\"\n              @keyup.enter=\"onSearchInput\"\n            />\n          </div>\n\n          <BaseAlert v-if=\"errorMessage\" type=\"danger\" class=\"my-6\" :text=\"errorMessage\" />\n\n          <ListIdentityItems\n            v-if=\"userStore.followedItems && showFollowedItems\"\n            :items=\"userStore.followedItems\"\n            :title=\"t('labels.following')\"\n            grid-class=\"clubs-grid\"\n            :limit=\"8\"\n            hide-on-no-content\n            has-see-all-link\n            see-all-link=\"/following/category/followed\"\n          />\n\n          <template v-if=\"loading\">\n            <ListIdentityItems :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :limit=\"8\" class=\"mt-10\" />\n            <ListIdentityItems :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :limit=\"8\" class=\"mt-10\" />\n          </template>\n\n          <div v-else>\n            <ListIdentityItems\n              v-for=\"category in mainCategories\"\n              :key=\"category.identityId\"\n              :identity-id=\"category.identityId\"\n              :title=\"category.identityTitle\"\n              :loading=\"loading\"\n              :items=\"category.relatedIdentities\"\n              :limit=\"8\"\n              auth\n              link-list\n              class=\"px-2 mt-10 sm:px-0\"\n              :search-value=\"search\"\n              grid-class=\"clubs-grid\"\n              has-see-all-link\n              hide-on-no-content\n            />\n          </div>\n\n          <BaseNotFound v-if=\"noResultsFound\" :text=\"t('errors.could_not_find_results')\" />\n        </div>\n      </div>\n    </BaseMain>\n  </div>\n</template>\n"],"names":["route","useRoute","router","useRouter","segment","useSegment","t","te","useI18n","userStore","useUserStore","search","useRouteQuery","hasFollowingItems","computed","windowY","useWindowScroll","isHeaderSearchShown","mainCategories","loadItems","loading","error","useAsync","SearchAPI","onSearchClear","errorMessage","getErrorLocalePathMessage","onSearchInput","noResultsFound","showFollowedItems","onMounted","useHead","_createElementBlock","_createVNode","_component_AuthHeader","_unref","_createElementVNode","_hoisted_1","_component_BaseInput","$event","_component_BaseMain","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_createBlock","_component_BaseAlert","_component_ListIdentityItems","_Fragment","_hoisted_6","_renderList","category","_component_BaseNotFound"],"mappings":"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"}