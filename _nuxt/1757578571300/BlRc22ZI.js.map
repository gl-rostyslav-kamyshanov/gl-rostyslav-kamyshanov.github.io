{"version":3,"file":"BlRc22ZI.js","sources":["../../../../app/pages/following/league/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useRouteQuery } from \"@vueuse/router\";\nimport useAsync from \"~/composables/use-async\";\nimport SearchAPI from \"~/services/search\";\nimport useUserStore from \"~/stores/user\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst { t, te } = useI18n();\nconst route = useRoute();\nconst router = useRouter();\n\nconst segment = useSegment();\nconst userStore = useUserStore();\nconst appConfig = useRuntimeConfig().public;\nconst search = useRouteQuery<string>(\"q\", \"\", { route, router });\nconst hasFollowingItems = computed(() => Boolean(Object.keys(userStore.followed).length));\nconst isFromAuthPage = window.history.state?.back?.includes(\"/auth\");\nconst hasSkipButton = appConfig.APP_CUSTOMER.enable_signup_onboarding_follow_skip && isFromAuthPage;\nconst { y: windowY } = useWindowScroll();\nconst isHeaderSearchShown = computed(() => windowY.value > 160);\nconst {\n  data: leagues,\n  run: loadItems,\n  loading,\n  error,\n} = useAsync(SearchAPI.leagueWithTeamsSearch);\n\nconst onSearchClear = () => {\n  search.value = \"\";\n  loadItems();\n};\n\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\nconst onSearchInput = () => loadItems({ searchString: search.value });\nconst noResultsFound = computed(() => leagues.value?.length === 0);\nconst showFollowedItems = computed(() => !search.value && hasFollowingItems.value && !noResultsFound.value);\n\nonMounted(() => {\n  segment.page(\"Manage Following\", {\n    previous_path: window.history.state?.back,\n  });\n  return loadItems({ searchString: search.value });\n});\nuseHead({ title: \"Following\" });\ndefinePageMeta({ middleware: \"auth\" });\n</script>\n\n<template>\n  <div>\n    <AuthHeader\n      :class=\"{ '!my-0': isHeaderSearchShown }\"\n      :transparent=\"!isHeaderSearchShown\"\n      fixed\n      with-locale\n    >\n      <template v-if=\"isHeaderSearchShown\" #append-center>\n        <div\n          class=\"mx-4 sm:mx-2 sm:w-[25rem] md:w-[30rem] lg:w-[39rem]\"\n          :class=\"hasFollowingItems || hasSkipButton ? 'lg:ml-[6rem]' : 'lg:ml-[1.5rem] rtl:lg:mr-[6rem]'\"\n        >\n          <BaseInput\n            v-model=\"search\"\n            name=\"search\"\n            class=\"truncate\"\n            :disabled=\"loading\"\n            :placeholder=\"t('labels.search_teams')\"\n            search\n            @clear=\"onSearchClear()\"\n            @keyup.enter=\"onSearchInput\"\n          />\n        </div>\n      </template>\n      <template #append-end>\n        <BaseButton\n          v-if=\"hasFollowingItems\"\n          tag=\"nuxt-link\"\n          type=\"primary\"\n          name=\"continue\"\n          size=\"small\"\n          :to=\"hasFollowingItems ? { path: '/' } : {}\"\n        >\n          {{ t(\"labels.done\") }}\n        </BaseButton>\n\n        <BaseButton\n          v-else-if=\"hasSkipButton\"\n          tag=\"nuxt-link\"\n          size=\"small\"\n          :to=\"{ path: '/' }\"\n          name=\"skip\"\n          outline\n        >\n          {{ t(\"labels.skip\") }}\n        </BaseButton>\n      </template>\n    </AuthHeader>\n\n    <BaseMain class=\"min-h-screen\">\n      <div class=\"pt-32 pb-12 form-column\">\n        <div class=\"w-[20rem] sm:w-[30rem] md:w-[35rem] lg:w-[40rem]\">\n          <h1 class=\"mb-10 text-3xl font-bold text-center max-sm:mx-8\">\n            {{ t(\"pages.auth_sign_up.follow_teams_header\") }}\n          </h1>\n\n          <!-- TODO: sticky top-8 z-22  -->\n          <div class=\"px-2 mb-10 sm:px-0\">\n            <BaseInput\n              v-model=\"search\"\n              name=\"search\"\n              class=\"truncate\"\n              :disabled=\"loading\"\n              :placeholder=\"t('labels.search_teams')\"\n              search\n              @clear=\"onSearchClear()\"\n              @keyup.enter=\"onSearchInput\"\n            />\n          </div>\n\n          <BaseAlert v-if=\"errorMessage\" type=\"danger\" class=\"my-6\" :text=\"errorMessage\" />\n\n          <ListIdentityItems\n            v-if=\"userStore.followedItems && showFollowedItems\"\n            :items=\"userStore.followedItems\"\n            :title=\"t('labels.following')\"\n            grid-class=\"clubs-grid\"\n            :limit=\"8\"\n            hide-on-no-content\n            has-see-all-link\n            see-all-link=\"/following/league/followed\"\n          />\n\n          <template v-if=\"loading\">\n            <ListIdentities :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :items=\"[]\" class=\"mt-10\" :limit=\"8\" />\n            <ListIdentities :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :items=\"[]\" class=\"mt-10\" :limit=\"8\" />\n          </template>\n\n          <div v-else>\n            <ListTeams\n              v-for=\"league in leagues\"\n              :key=\"league.identityId\"\n              :title=\"league.title\"\n              :items=\"league.identityItems\"\n              :league-id=\"league.identityId\"\n              :limit=\"8\"\n              grid-class=\"clubs-grid\"\n              class=\"px-2 mt-10\"\n              has-see-all-link\n              hide-on-no-content\n              :loading=\"loading\"\n              :search-value=\"search\"\n            />\n          </div>\n\n          <BaseNotFound v-if=\"noResultsFound\" :text=\"t('errors.could_not_find_results')\" />\n        </div>\n      </div>\n    </BaseMain>\n  </div>\n</template>\n"],"names":["t","te","useI18n","route","useRoute","router","useRouter","segment","useSegment","userStore","useUserStore","appConfig","useRuntimeConfig","search","useRouteQuery","hasFollowingItems","computed","isFromAuthPage","hasSkipButton","windowY","useWindowScroll","isHeaderSearchShown","leagues","loadItems","loading","error","useAsync","SearchAPI","onSearchClear","errorMessage","getErrorLocalePathMessage","onSearchInput","noResultsFound","showFollowedItems","onMounted","useHead","_createElementBlock","_createVNode","_component_AuthHeader","_unref","_createBlock","_component_BaseButton","_createElementVNode","_normalizeClass","_component_BaseInput","$event","_component_BaseMain","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","_component_BaseAlert","_component_ListIdentityItems","_Fragment","_component_ListIdentities","_hoisted_5","_renderList","league","_component_ListTeams","_component_BaseNotFound"],"mappings":"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"}