import{_ as P,a as S}from"./Do22Qez2.js";import{_ as U}from"./CaMyY2v_.js";import{a as A,_ as E,v as _}from"./CyNJ05yA.js";import{d as I,u as M,M as R,P as $,N as C,e as D,g as F,c as H,a as T,h as t,w as p,i as l,t as f,j as e,_ as j,m as G,q as L,p as z}from"./CwABAOlJ.js";import{P as J}from"./OefO88Gy.js";import"./Li_cjk1q.js";import"./B2YkyXYb.js";import"./BScJdvYN.js";import"./KjsuVcDS.js";import"./CNJlgRe_.js";import"./YWm515Cs.js";import"./B3hPXRwZ.js";import"./B-DBQphj.js";import"./CeLpXuE_.js";import"./CnXC2_Ok.js";import"./vL22xovj.js";import"./OZWTeDMJ.js";import"./BukFVRaA.js";import"./BX5kaRX7.js";import"./CEPFdmL0.js";import"./B_by5-iV.js";import"./DytEXIiV.js";import"./Dv6zUHO9.js";const K={class:"pt-32 pb-12 form-column"},O={class:"w-full max-w-[400px]"},Q={class:"text-center"},W={class:"text-heading-1-bold"},X={class:"flex flex-col gap-6"},qe=I({__name:"reset",setup(Y){const{t:s,te:h}=M(),m=R(),u=z(),b=$(),g=m.hash.substring(1),a=C({email:m.query.email||"",password_new:"",password_new_repeat:"",token:g||""});function x(r){const o=[],n=e(r);return _.required(n.password_new)?_.min(n.password_new,{length:8})||o.push({path:"password_new",message:s("errors.invalid_password")}):o.push({path:"password_new",message:s("errors.field_is_required")}),_.required(n.password_new_repeat)?_.min(n.password_new_repeat,{length:8})||o.push({path:"password_new_repeat",message:s("errors.invalid_password")}):o.push({path:"password_new_repeat",message:s("errors.field_is_required")}),o}const v=()=>b.push({name:"auth-login",query:{email:a.email,passwordResetSuccess:"true"}}),q=r=>{const{message:o}=L(r.message,{t:s,te:h});return u.error(o)},{loading:d,run:V}=D(J.applyNew,{onSuccess:v,onError:q});function k(){if(a.password_new!==a.password_new_repeat)return u.error(s("errors.passwords_dont_match"));const r={reset_token:a.token,new_password:a.password_new};return V(r)}return F({title:s("labels.forgot_password")}),(r,o)=>{const n=P,w=U,c=E,B=j,y=A,N=S;return T(),H("div",null,[t(n,{mode:"sign-up","with-locale":"",absolute:"",transparent:""}),t(N,null,{default:p(()=>[l("div",K,[l("div",O,[l("div",Q,[l("h1",W,f(e(s)("labels.reset_password")),1)]),t(y,{state:e(a),validate:x,class:"mt-8",onSubmit:k},{default:p(()=>[l("div",X,[t(c,{label:e(s)("labels.password_new"),name:"password_new",required:""},{default:p(()=>[t(w,{modelValue:e(a).password_new,"onUpdate:modelValue":o[0]||(o[0]=i=>e(a).password_new=i),disabled:e(d),placeholder:e(s)("labels.enter_new_password"),name:"new-password",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),t(c,{label:e(s)("labels.password_repeat"),name:"password_new_repeat",required:""},{default:p(()=>[t(w,{modelValue:e(a).password_new_repeat,"onUpdate:modelValue":o[1]||(o[1]=i=>e(a).password_new_repeat=i),disabled:e(d),placeholder:e(s)("labels.enter_new_password"),name:"new-password-repeat",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),t(B,{class:"mt-10 font-bold",name:"submit-send-reset-link",disabled:e(d),"full-width":""},{default:p(()=>[G(f(e(s)("pages.auth_password.set_new_password")),1)]),_:1},8,["disabled"])]),_:1},8,["state"])])])]),_:1})])}}});export{qe as default};
//# sourceMappingURL=BQIE74NM.js.map
