{"version":3,"file":"DlBxeYX4.js","sources":["../../../../app/utils/commerce.ts"],"sourcesContent":["import { COMMERCE_CATEGORY } from \"~/constants\";\n\nexport const priorityMap = {\n  [COMMERCE_CATEGORY.FREE]: 5,\n  [COMMERCE_CATEGORY.MEMBER]: 4,\n  [COMMERCE_CATEGORY.PPV]: 3,\n  [COMMERCE_CATEGORY.TRANSACTIONAL]: 2,\n  [COMMERCE_CATEGORY.SUBSCRIPTION]: 1,\n};\n\nexport const getCommerceCategory = (commerce_types?: TCommerceCategory[]): TCommerceCategory => {\n  if (!commerce_types || commerce_types.length === 0)\n    return COMMERCE_CATEGORY.FREE;\n\n  let highestPriorityType: TCommerceCategory = commerce_types[0];\n\n  for (const commerce_type of commerce_types) {\n    if (priorityMap[commerce_type] > priorityMap[highestPriorityType])\n      highestPriorityType = commerce_type;\n  }\n\n  return highestPriorityType;\n};\n\nexport function getCallbackCommerceUrl(\n  params: Record<string, string>,\n): string {\n  const baseURL = \"/payment/processing/\";\n  const url = new URL(baseURL, window.location.origin);\n\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.set(key, value);\n  });\n\n  return url.toString();\n}\n"],"names":["priorityMap","COMMERCE_CATEGORY","getCommerceCategory","commerce_types","highestPriorityType","commerce_type","getCallbackCommerceUrl","params","baseURL","url","key","value"],"mappings":"mCAEO,MAAMA,EAAc,CACzB,CAACC,EAAkB,IAAI,EAAG,EAC1B,CAACA,EAAkB,MAAM,EAAG,EAC5B,CAACA,EAAkB,GAAG,EAAG,EACzB,CAACA,EAAkB,aAAa,EAAG,EACnC,CAACA,EAAkB,YAAY,EAAG,CACpC,EAEaC,EAAuBC,GAA4D,CAC9F,GAAI,CAACA,GAAkBA,EAAe,SAAW,EAC/C,OAAOF,EAAkB,KAE3B,IAAIG,EAAyCD,EAAe,CAAC,EAE7D,UAAWE,KAAiBF,EACtBH,EAAYK,CAAa,EAAIL,EAAYI,CAAmB,IAC9DA,EAAsBC,GAG1B,OAAOD,CACT,EAEO,SAASE,EACdC,EACQ,CACR,MAAMC,EAAU,uBACVC,EAAM,IAAI,IAAID,EAAS,OAAO,SAAS,MAAM,EAEnD,cAAO,QAAQD,CAAM,EAAE,QAAQ,CAAC,CAACG,EAAKC,CAAK,IAAM,CAC/CF,EAAI,aAAa,IAAIC,EAAKC,CAAK,CACjC,CAAC,EAEMF,EAAI,SAAA,CACb"}