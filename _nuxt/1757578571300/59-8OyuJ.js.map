{"version":3,"file":"59-8OyuJ.js","sources":["../../../../app/components/List/Teams.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useBreakpointsLimit from \"~/composables/use-breakpoints-limit\";\nimport useList from \"~/composables/use-list\";\nimport usePagination from \"~/composables/use-pagination\";\nimport { ORDER, SORT } from \"~/constants\";\nimport FollowAPI from \"~/services/follow\";\nimport { returnPaginatedResponse } from \"~/services/format\";\nimport SearchAPI from \"~/services/search\";\nimport TeamsAPI from \"~/services/teams\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nexport interface ListTeamsProps {\n  limit?: number;\n  title?: string;\n  items?: IModelIdentityItem[];\n  hideOnNoContent?: boolean;\n  leagueId?: string;\n  linkList?: boolean;\n  hasSeeAllLink?: boolean;\n  hasLoadMoreButton?: boolean;\n  seeAllLink?: string;\n  seeAllLinkPlacement?: \"bottom-center\" | \"top-right\";\n  searchValue?: string;\n  gridClass?: string;\n  loading?: boolean;\n  error?: string;\n  loadOnlyFollowed?: boolean;\n}\n\nconst props = withDefaults(defineProps<ListTeamsProps>(), {\n  gridClass: \"clubs-grid__desktopWide\",\n  seeAllLinkPlacement: \"top-right\",\n});\n\nconst { t, te } = useI18n();\nconst useLimit = useBreakpointsLimit({ sm: 6, md: 6, lg: 8, xl: 10, xl2: 12, xl3: 16, xl4: 22, xl5: 16, xl6: 16 });\nconst limit = props.limit ? props.limit : useLimit.value;\n\nconst { items: teams, error, loadMore, canLoadMore, loading } = usePagination<IModelIdentityItem>({\n  immediate: true,\n  pageSize: limit,\n  loadItemsFn: (page: number, pageSize: number) => {\n    if (props.items) {\n      return Promise.resolve(returnPaginatedResponse([]));\n    }\n\n    if (props.loadOnlyFollowed && props.leagueId) {\n      return FollowAPI.loadCache({\n        page,\n        pageSize,\n        identityId: props.leagueId,\n        sort: SORT.added,\n        order: ORDER.asc,\n      });\n    }\n\n    if (props.leagueId && props.searchValue) {\n      return SearchAPI.teamSearch({ page, title: props.searchValue, identityId: props.leagueId, pageSize });\n    }\n\n    return TeamsAPI.load({ page, pageSize, identityId: props.leagueId });\n  },\n});\n\nconst seeAllPath = computed(() => {\n  if (props.seeAllLink) {\n    return props.seeAllLink;\n  }\n\n  return `/following/league/${props.leagueId}/`;\n});\nconst seeAllLinkPath = computed(() => ({\n  path: seeAllPath.value,\n  query: {\n    q: props.searchValue,\n  },\n}));\nconst items = computed(() => props.items ? props.items.concat(teams.value) : teams.value);\nconst filteredItems = useList(items, {\n  limit: props.hasLoadMoreButton ? undefined : limit,\n  searchProperty: \"title\",\n});\nconst canShowSeeAllLink = computed(() => canLoadMore.value || items.value.length > limit);\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\n</script>\n\n<template>\n  <BaseList\n    :items=\"filteredItems\"\n    :title=\"props.title\"\n    :limit=\"limit\"\n    :error=\"errorMessage ?? props.error\"\n    :loading=\"loading || props.loading\"\n    :grid-class=\"props.gridClass\"\n    :hide-on-no-content=\"props.hideOnNoContent\"\n    :see-all-link-placement=\"props.seeAllLinkPlacement\"\n    :see-all-link-path=\"seeAllLinkPath\"\n    :has-load-more-button=\"props.hasLoadMoreButton && canLoadMore\"\n    :has-see-all-link=\"props.hasSeeAllLink && canShowSeeAllLink\"\n    :no-content-text=\"t('errors.could_not_find_results')\"\n    @click-load-more=\"loadMore()\"\n  >\n    <template #start>\n      <slot name=\"start\" />\n    </template>\n    <template #item=\"{ item }\">\n      <UserCardClub\n        :item=\"item\"\n        :is-link=\"props.linkList\"\n        :main-category-id=\"props.leagueId\"\n        type=\"team\"\n      />\n    </template>>\n    <template #skeleton>\n      <CardClubSkeleton />\n    </template>\n    <template #end>\n      <slot name=\"end\" />\n    </template>\n  </BaseList>\n</template>\n"],"names":["props","__props","t","te","useI18n","useLimit","useBreakpointsLimit","limit","teams","error","loadMore","canLoadMore","loading","usePagination","page","pageSize","returnPaginatedResponse","FollowAPI","SORT","ORDER","SearchAPI","TeamsAPI","seeAllPath","computed","seeAllLinkPath","items","filteredItems","useList","canShowSeeAllLink","errorMessage","getErrorLocalePathMessage","_createBlock","_component_BaseList","_unref","_renderSlot","_ctx","_withCtx","item","_createVNode","_component_UserCardClub","_component_CardClubSkeleton"],"mappings":"kxBA6BA,MAAMA,EAAQC,EAKR,CAAE,EAAAC,EAAG,GAAAC,CAAA,EAAOC,EAAA,EACZC,EAAWC,EAAoB,CAAE,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,EAC3GC,EAAQP,EAAM,MAAQA,EAAM,MAAQK,EAAS,MAE7C,CAAE,MAAOG,EAAO,MAAAC,EAAO,SAAAC,EAAU,YAAAC,EAAa,QAAAC,CAAA,EAAYC,EAAkC,CAChG,UAAW,GACX,SAAUN,EACV,YAAa,CAACO,EAAcC,IACtBf,EAAM,MACD,QAAQ,QAAQgB,EAAwB,CAAA,CAAE,CAAC,EAGhDhB,EAAM,kBAAoBA,EAAM,SAC3BiB,EAAU,UAAU,CACzB,KAAAH,EACA,SAAAC,EACA,WAAYf,EAAM,SAClB,KAAMkB,EAAK,MACX,MAAOC,EAAM,GAAA,CACd,EAGCnB,EAAM,UAAYA,EAAM,YACnBoB,EAAU,WAAW,CAAE,KAAAN,EAAM,MAAOd,EAAM,YAAa,WAAYA,EAAM,SAAU,SAAAe,CAAA,CAAU,EAG/FM,EAAS,KAAK,CAAE,KAAAP,EAAM,SAAAC,EAAU,WAAYf,EAAM,SAAU,CACrE,CACD,EAEKsB,EAAaC,EAAS,IACtBvB,EAAM,WACDA,EAAM,WAGR,qBAAqBA,EAAM,QAAQ,GAC3C,EACKwB,EAAiBD,EAAS,KAAO,CACrC,KAAMD,EAAW,MACjB,MAAO,CACL,EAAGtB,EAAM,WAAA,CACX,EACA,EACIyB,EAAQF,EAAS,IAAMvB,EAAM,MAAQA,EAAM,MAAM,OAAOQ,EAAM,KAAK,EAAIA,EAAM,KAAK,EAClFkB,EAAgBC,EAAQF,EAAO,CACnC,MAAOzB,EAAM,kBAAoB,OAAYO,EAC7C,eAAgB,OAAA,CACjB,EACKqB,EAAoBL,EAAS,IAAMZ,EAAY,OAASc,EAAM,MAAM,OAASlB,CAAK,EAClFsB,EAAeN,EAAS,IAAMd,EAAM,OAASqB,EAA0BrB,EAAM,MAAO,CAAE,EAAAP,EAAG,GAAAC,CAAA,CAAI,EAAE,OAAO,6CAI1G4B,EAgCWC,EAAA,CA/BR,MAAOC,EAAAP,CAAA,EACP,MAAO1B,EAAM,MACb,MAAOiC,EAAA1B,CAAA,EACP,MAAO0B,EAAAJ,CAAA,GAAgB7B,EAAM,MAC7B,QAASiC,EAAArB,CAAA,GAAWZ,EAAM,QAC1B,aAAYA,EAAM,UAClB,qBAAoBA,EAAM,gBAC1B,yBAAwBA,EAAM,oBAC9B,oBAAmBiC,EAAAT,CAAA,EACnB,uBAAsBxB,EAAM,mBAAqBiC,EAAAtB,CAAA,EACjD,mBAAkBX,EAAM,eAAiBiC,EAAAL,CAAA,EACzC,kBAAiBK,EAAA/B,CAAA,EAAC,+BAAA,EAClB,+BAAiB+B,EAAAvB,CAAA,EAAA,EAAQ,GAEf,QACT,IAAqB,CAArBwB,EAAqBC,EAAA,OAAA,OAAA,CAAA,GAEZ,KAAIC,EACb,CAKE,CANe,KAAAC,KAAI,CACrBC,EAKEC,EAAA,CAJC,KAAAF,EACA,UAASrC,EAAM,SACf,mBAAkBA,EAAM,SACzB,KAAK,MAAA,kDAGE,WACT,IAAoB,CAApBsC,EAAoBE,CAAA,CAAA,GAEX,MACT,IAAmB,CAAnBN,EAAmBC,EAAA,OAAA,KAAA,CAAA,aALV,IACX,eADW,KACX,EAAA,EAAA"}