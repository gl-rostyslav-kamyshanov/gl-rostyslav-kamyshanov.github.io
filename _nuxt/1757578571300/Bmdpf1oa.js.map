{"version":3,"file":"Bmdpf1oa.js","sources":["../../../../app/pages/selected/clips.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useRouteQuery } from \"@vueuse/router\";\nimport useBreakpointsLimit from \"~/composables/use-breakpoints-limit\";\nimport usePagination from \"~/composables/use-pagination\";\nimport { ORDER, SORT } from \"~/constants\";\nimport EventsAPI from \"~/services/events\";\nimport { removeObjectFromArrayByKeyValue } from \"~/utils/array\";\n\nconst { t } = useI18n();\nconst route = useRoute();\nconst router = useRouter();\nconst segment = useSegment();\nconst useLimit = useBreakpointsLimit();\n\nconst clipFilters = reactive({\n  order: useRouteQuery(\"order\", ORDER.desc, { route, router }),\n  sportTypes: useRouteQuery<TSportType[]>(\"sport_type\", [], { route, router }),\n});\nconst highlightFilters = reactive({\n  order: useRouteQuery(\"order\", ORDER.desc, { route, router }),\n  sportTypes: useRouteQuery<TSportType[]>(\"sport_type\", [], { route, router }),\n});\nconst {\n  items: clips,\n  loadMore: loadMoreClips,\n  loading: loadingClips,\n  canLoadMore: canLoadMoreClips,\n  reset: reloadClips,\n} = usePagination<IModelEvent>({\n  immediate: true,\n  pageSize: useLimit.value,\n  loadItemsFn: (page: number, pageSize: number) => {\n    return EventsAPI.userMedia.load({\n      page,\n      size: pageSize,\n      media_type: [\"user_clip\"],\n      order: highlightFilters.order,\n      sportType: clipFilters.sportTypes,\n      sort: SORT.created,\n    });\n  },\n});\nconst {\n  items: highlights,\n  loading: loadingHighlight,\n  loadMore: loadMoreHighlights,\n  canLoadMore: canLoadMoreHighlight,\n  reset: reloadHighlights,\n} = usePagination<IModelEvent>({\n  immediate: true,\n  pageSize: useLimit.value,\n  loadItemsFn: (page: number, pageSize: number) => {\n    return EventsAPI.userMedia.load({\n      page,\n      size: pageSize,\n      media_type: [\"user_highlight\"],\n      order: highlightFilters.order,\n      sort: SORT.created,\n      sportType: highlightFilters.sportTypes,\n    });\n  },\n});\n\nconst deleteClip = (item: IModelEvent) => removeObjectFromArrayByKeyValue(item.id, \"id\", clips.value);\nconst deleteHighlight = (item: IModelEvent) => removeObjectFromArrayByKeyValue(item.id, \"id\", highlights.value);\nconst clearClipsSportTypes = () => {\n  clipFilters.sportTypes = [];\n};\nconst clearHighlightSportTypes = () => {\n  highlightFilters.sportTypes = [];\n};\n\nwatch(clipFilters, () => reloadClips());\nwatch(highlightFilters, () => reloadHighlights());\n\nonMounted(() => segment.page(\"My Clips\"));\n\nuseHead({ title: t(\"labels.my_clips_and_highlights\") });\ndefinePageMeta({ layout: \"home\", middleware: \"auth\" });\n</script>\n\n<template>\n  <div class=\"main-container\">\n    <h1 class=\"text-heading-1-bold text-main mb-10 mt-2\">\n      {{ t(\"labels.my_clips_and_highlights\") }}\n    </h1>\n    <BaseTabs root-class=\"md:max-w-[25rem]\">\n      <BaseTab :heading=\"t('labels.clip', 0)\">\n        <BaseList\n          :items=\"clips\"\n          :loading=\"loadingClips\"\n          :has-load-more-button=\"canLoadMoreClips\"\n          :limit=\"useLimit\"\n          @click-load-more=\"loadMoreClips\"\n        >\n          <template v-if=\"clips.length || clipFilters.sportTypes.length\" #start>\n            <ListFilters\n              v-model:order=\"clipFilters.order\"\n              v-model:sport-types=\"clipFilters.sportTypes\"\n              has-order-filter\n              has-sport-type-filter\n              :disabled=\"loadingClips\"\n              @clear=\"clearClipsSportTypes\"\n            />\n          </template>\n          <template #item=\"{ item }\">\n            <UserCardEvent :item=\"item\" has-delete @delete-item=\"deleteClip\" />\n          </template>\n          <template #empty>\n            <p class=\"text-secondary\">\n              {{\n                clipFilters.sportTypes.length\n                  ? t('pages.clips.title_no_items_with_selected_filter')\n                  : t('pages.clips.title_no_clips')\n              }}\n            </p>\n          </template>\n          <template #skeleton>\n            <CardEventSkeleton />\n          </template>\n        </BaseList>\n      </BaseTab>\n      <BaseTab :heading=\"t('labels.highlights', 0)\">\n        <BaseList\n          :items=\"highlights\"\n          :loading=\"loadingHighlight\"\n          :has-load-more-button=\"canLoadMoreHighlight\"\n          @click-load-more=\"loadMoreHighlights\"\n        >\n          <template v-if=\"highlights.length || highlightFilters.sportTypes.length\" #start>\n            <ListFilters\n              v-model:order=\"highlightFilters.order\"\n              v-model:sport-types=\"highlightFilters.sportTypes\"\n              has-order-filter\n              has-sport-type-filter\n              :disabled=\"loadingHighlight\"\n              @clear=\"clearHighlightSportTypes\"\n            />\n          </template>\n          <template #item=\"{ item }\">\n            <UserCardEvent :item=\"item\" has-delete @delete-item=\"deleteHighlight\" />\n          </template>\n          <template #empty>\n            <p class=\"text-secondary\">\n              {{\n                highlightFilters.sportTypes.length\n                  ? t('pages.clips.title_no_items_with_selected_filter')\n                  : t('pages.clips.title_no_highlights')\n              }}\n            </p>\n          </template>\n          <template #skeleton>\n            <CardEventSkeleton />\n          </template>\n        </BaseList>\n      </BaseTab>\n    </BaseTabs>\n    <div class=\"hr my-10\" role=\"separator\" />\n    <ListEvents\n      :title=\"t('pages.videos.user_interesting')\"\n      class=\"text-2xl text-main\"\n      has-see-all-link\n      hide-on-no-content\n      recommended\n    />\n  </div>\n</template>\n"],"names":["t","useI18n","route","useRoute","router","useRouter","segment","useSegment","useLimit","useBreakpointsLimit","clipFilters","reactive","useRouteQuery","ORDER","highlightFilters","clips","loadMoreClips","loadingClips","canLoadMoreClips","reloadClips","usePagination","page","pageSize","EventsAPI","SORT","highlights","loadingHighlight","loadMoreHighlights","canLoadMoreHighlight","reloadHighlights","deleteClip","item","removeObjectFromArrayByKeyValue","deleteHighlight","clearClipsSportTypes","clearHighlightSportTypes","watch","onMounted","useHead","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","_unref","_createVNode","_component_BaseTabs","_component_BaseTab","_component_BaseList","_withCtx","_component_UserCardEvent","_hoisted_3","_component_CardEventSkeleton","_component_ListFilters","_cache","$event","_hoisted_4","_component_ListEvents"],"mappings":"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"}