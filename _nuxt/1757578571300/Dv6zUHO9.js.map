{"version":3,"file":"Dv6zUHO9.js","sources":["../../../../app/composables/use-form-group.ts"],"sourcesContent":["import { useDebounceFn, type UseEventBusReturn } from \"@vueuse/core\";\n\nexport interface IForm<T> {\n  validate: (path?: string, opts?: { silent?: boolean }) => Promise<T>;\n  clear: (path?: string) => void;\n  errors: Ref<IFormError[]>;\n  setErrors: (errs: IFormError[], path?: string) => void;\n  getErrors: (path?: string) => IFormError[];\n}\n\nexport type TFormEventType = \"blur\" | \"input\" | \"change\" | \"submit\";\n\nexport interface IFormError {\n  path: string;\n  message: string;\n}\nexport interface IFormGroup {\n  error: ComputedRef<string | boolean | undefined>;\n  name: ComputedRef<string | undefined>;\n  size: ComputedRef<\"sm\" | \"md\" | \"lg\" | null | undefined>;\n  disabled: ComputedRef<boolean | null | undefined>;\n}\n\nexport interface IFormEvent {\n  type: TFormEventType;\n  path: string;\n}\n\nexport function useFormGroup() {\n  const formBus = inject<UseEventBusReturn<IFormEvent, string> | undefined>(\"form-events\", undefined);\n  const formGroup = inject<IFormGroup | undefined>(\"form-group\", undefined);\n  const blurred = ref(false);\n\n  function emitFormEvent(type: TFormEventType, path: string) {\n    if (formBus) {\n      formBus.emit({ type, path });\n    }\n  }\n\n  function emitFormBlur() {\n    if (formGroup?.name.value) {\n      emitFormEvent(\"blur\", formGroup.name.value);\n    }\n    blurred.value = true;\n  }\n\n  function emitFormChange() {\n    if (formGroup?.name.value) {\n      emitFormEvent(\"change\", formGroup.name.value);\n    }\n  }\n\n  const emitFormInput = useDebounceFn(() => {\n    if (blurred.value) {\n      if (formGroup?.name.value) {\n        emitFormEvent(\"input\", formGroup.name.value);\n      }\n    }\n  }, 300);\n\n  return {\n    emitFormBlur,\n    emitFormInput,\n    emitFormChange,\n    formGroup,\n  };\n}\n"],"names":["useFormGroup","formBus","inject","formGroup","blurred","ref","emitFormEvent","type","path","emitFormBlur","emitFormChange","emitFormInput","useDebounceFn"],"mappings":"kDA4BO,SAASA,GAAe,CAC7B,MAAMC,EAAUC,EAA0D,cAAe,MAAS,EAC5FC,EAAYD,EAA+B,aAAc,MAAS,EAClEE,EAAUC,EAAI,EAAK,EAEzB,SAASC,EAAcC,EAAsBC,EAAc,CACrDP,GACFA,EAAQ,KAAK,CAAE,KAAAM,EAAM,KAAAC,CAAA,CAAM,CAE/B,CAEA,SAASC,GAAe,CAClBN,GAAW,KAAK,OAClBG,EAAc,OAAQH,EAAU,KAAK,KAAK,EAE5CC,EAAQ,MAAQ,EAClB,CAEA,SAASM,GAAiB,CACpBP,GAAW,KAAK,OAClBG,EAAc,SAAUH,EAAU,KAAK,KAAK,CAEhD,CAEA,MAAMQ,EAAgBC,EAAc,IAAM,CACpCR,EAAQ,OACND,GAAW,KAAK,OAClBG,EAAc,QAASH,EAAU,KAAK,KAAK,CAGjD,EAAG,GAAG,EAEN,MAAO,CACL,aAAAM,EACA,cAAAE,EACA,eAAAD,EACA,UAAAP,CAAA,CAEJ"}