{"version":3,"file":"SXDS2HQ0.js","sources":["../../../../app/pages/team/[teamId].vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useAsync from \"~/composables/use-async\";\nimport useFollow from \"~/composables/use-follow\";\nimport useSSOLogin from \"~/composables/use-sso-login\";\nimport { useTeamById } from \"~/queries/teams\";\nimport EventsAPI from \"~/services/events\";\nimport useUserStore from \"~/stores/user\";\n\nconst route = useRoute();\nconst router = useRouter();\nconst { t } = useI18n();\nconst isMobile = useIsMobile();\nconst userStore = useUserStore();\nconst appConfig = useRuntimeConfig().public;\nconst { executeSocialLogin, socialLoginLoading } = useSSOLogin();\n\nconst isLoggedIn = computed(() => Boolean(userStore.user));\nconst isGameHighlightsEnabled = computed(() => appConfig.APP_CUSTOMER.enable_game_highlights);\nconst teamId = computed(() => route.params.teamId as string);\nconst eventParams = { count: true, pageSize: 20, teamId: teamId.value };\n\nconst { data: live, loading: loadingLive, run: loadLive } = useAsync(() => EventsAPI.load({ ...eventParams, type: \"live\" }));\nconst { data: upcoming, loading: loadingUpcoming, run: loadUpcoming } = useAsync(() => EventsAPI.load({ ...eventParams, type: \"upcoming\" }));\nconst { data: archived, loading: loadingArchived, run: loadArchived } = useAsync(() => EventsAPI.load({ ...eventParams, type: \"archived\" }));\nconst { loading: isFollowingDisabled, isFollowing, toggleFollow } = useFollow({ id: teamId.value, type: \"team\" });\n\nconst { data: identityItem, isLoading } = useTeamById(() => teamId.value);\n\nconst banners = computed(() => {\n  if (isMobile.value && identityItem.value?.mobileBanners && identityItem.value.mobileBanners.length > 0) {\n    return identityItem.value.mobileBanners;\n  }\n\n  return identityItem.value?.banners;\n});\n\nconst noContent = computed(() => {\n  const liveCount = live.value?.content?.count || 0;\n  const upcomingCount = upcoming.value?.content?.count || 0;\n  const archivedCount = archived.value?.content?.count || 0;\n\n  return liveCount + upcomingCount + archivedCount === 0;\n});\n\nasync function onClickFollow(item: IModelIdentityItem) {\n  if (!isLoggedIn.value) {\n    if (appConfig.APP_FLAGS.hasIfaAuth && appConfig.APP_CUSTOMER.app_config.enable_skip_login_page_for_ifa_sso)\n      return executeSocialLogin(\"ifa\");\n    return router.push({ path: \"/auth/login/\", query: { redirectUrl: route.fullPath } });\n  }\n\n  return toggleFollow(item);\n}\n\nonMounted(async () => {\n  await Promise.all([\n    loadArchived(),\n    loadLive(),\n    loadUpcoming(),\n  ]);\n});\n\ndefinePageMeta({ layout: \"home\", middleware: \"disable-team-page\" });\n</script>\n\n<template>\n  <div>\n    <div>\n      <BlockIdentitySkeleton v-if=\"isLoading\" has-following-button />\n\n      <BlockIdentity\n        v-else-if=\"identityItem\"\n        has-following-button\n        has-events-number\n        :is-following=\"isFollowing\"\n        :is-following-disabled=\"isFollowingDisabled || socialLoginLoading\"\n        :title=\"identityItem.title\"\n        :logo-url=\"identityItem.logoUrl\"\n        :banners=\"banners\"\n        :facebook-url=\"identityItem.facebookUrl\"\n        :x-url=\"identityItem.xUrl\"\n        :instagram-url=\"identityItem.instagramUrl\"\n        :web-url=\"identityItem.webUrl\"\n        :live-events-number=\"live?.content.count ?? 0\"\n        :upcoming-events-number=\"upcoming?.content.count ?? 0\"\n        :total-events-number=\"archived?.content.count ?? 0\"\n        @follow=\"onClickFollow(identityItem as IModelIdentityItem)\"\n      />\n    </div>\n\n    <div class=\"text-2xl main-container text-main\">\n      <ListEvents\n        :title=\"t('labels.live')\"\n        :team-id=\"teamId\"\n        :items=\"live?.content.entries ?? []\"\n        :loading=\"loadingLive\"\n        type=\"live\"\n        hide-on-no-content\n        has-see-all-link\n        see-all-link-placement=\"top-right\"\n      >\n        <template #end>\n          <div class=\"my-12 hr\" role=\"separator\" />\n        </template>\n      </ListEvents>\n\n      <ListEvents\n        :title=\"t('labels.upcoming')\"\n        :team-id=\"teamId\"\n        :items=\"upcoming?.content.entries ?? []\"\n        :loading=\"loadingUpcoming\"\n        type=\"upcoming\"\n        hide-on-no-content\n        has-see-all-link\n        see-all-link-placement=\"top-right\"\n      >\n        <template #end>\n          <div class=\"my-12 hr\" role=\"separator\" />\n        </template>\n      </ListEvents>\n\n      <ListEvents\n        v-if=\"isGameHighlightsEnabled\"\n        :title=\"t('labels.latest_highlights')\"\n        :team-id=\"teamId\"\n        type=\"highlight\"\n        hide-on-no-content\n        has-see-all-link\n      >\n        <template #end>\n          <div class=\"my-12 hr\" role=\"separator\" />\n        </template>\n      </ListEvents>\n\n      <ListEvents\n        :title=\"t('labels.latest_events')\"\n        :team-id=\"teamId\"\n        :items=\"archived?.content.entries ?? []\"\n        :loading=\"loadingArchived\"\n        hide-on-no-content\n        has-see-all-link\n      >\n        <template #end>\n          <div class=\"my-12 hr\" role=\"separator\" />\n        </template>\n      </ListEvents>\n    </div>\n  </div>\n  <BaseNotFound v-if=\"noContent && !isLoading\" :text=\"t('labels.empty_events_list')\">\n    <template #icon=\"{ isDarkTheme }\">\n      <IconEventNotfound :is-dark-theme=\"isDarkTheme\" />\n    </template>\n  </BaseNotFound>\n</template>\n"],"names":["route","useRoute","router","useRouter","t","useI18n","isMobile","useIsMobile","userStore","useUserStore","appConfig","useRuntimeConfig","executeSocialLogin","socialLoginLoading","useSSOLogin","isLoggedIn","computed","isGameHighlightsEnabled","teamId","eventParams","live","loadingLive","loadLive","useAsync","EventsAPI","upcoming","loadingUpcoming","loadUpcoming","archived","loadingArchived","loadArchived","isFollowingDisabled","isFollowing","toggleFollow","useFollow","identityItem","isLoading","useTeamById","banners","noContent","liveCount","upcomingCount","archivedCount","onClickFollow","item","onMounted","_createElementVNode","_unref","_createBlock","_component_BlockIdentitySkeleton","_component_BlockIdentity","_cache","$event","_hoisted_1","_createVNode","_component_ListEvents","_component_BaseNotFound","_withCtx","isDarkTheme","_component_IconEventNotfound"],"mappings":"+hCAQA,MAAMA,EAAQC,EAAA,EACRC,EAASC,GAAA,EACT,CAAE,EAAAC,CAAA,EAAMC,GAAA,EACRC,EAAWC,GAAA,EACXC,EAAYC,GAAA,EACZC,EAAYC,KAAmB,OAC/B,CAAE,mBAAAC,EAAoB,mBAAAC,CAAA,EAAuBC,GAAA,EAE7CC,EAAaC,EAAS,IAAM,EAAQR,EAAU,IAAK,EACnDS,EAA0BD,EAAS,IAAMN,EAAU,aAAa,sBAAsB,EACtFQ,EAASF,EAAS,IAAMhB,EAAM,OAAO,MAAgB,EACrDmB,EAAc,CAAE,MAAO,GAAM,SAAU,GAAI,OAAQD,EAAO,KAAA,EAE1D,CAAE,KAAME,EAAM,QAASC,EAAa,IAAKC,GAAaC,EAAS,IAAMC,EAAU,KAAK,CAAE,GAAGL,EAAa,KAAM,MAAA,CAAQ,CAAC,EACrH,CAAE,KAAMM,EAAU,QAASC,EAAiB,IAAKC,GAAiBJ,EAAS,IAAMC,EAAU,KAAK,CAAE,GAAGL,EAAa,KAAM,UAAA,CAAY,CAAC,EACrI,CAAE,KAAMS,EAAU,QAASC,EAAiB,IAAKC,GAAiBP,EAAS,IAAMC,EAAU,KAAK,CAAE,GAAGL,EAAa,KAAM,UAAA,CAAY,CAAC,EACrI,CAAE,QAASY,EAAqB,YAAAC,EAAa,aAAAC,CAAA,EAAiBC,GAAU,CAAE,GAAIhB,EAAO,MAAO,KAAM,OAAQ,EAE1G,CAAE,KAAMiB,EAAc,UAAAC,CAAA,EAAcC,GAAY,IAAMnB,EAAO,KAAK,EAElEoB,EAAUtB,EAAS,IACnBV,EAAS,OAAS6B,EAAa,OAAO,eAAiBA,EAAa,MAAM,cAAc,OAAS,EAC5FA,EAAa,MAAM,cAGrBA,EAAa,OAAO,OAC5B,EAEKI,EAAYvB,EAAS,IAAM,CAC/B,MAAMwB,EAAYpB,EAAK,OAAO,SAAS,OAAS,EAC1CqB,EAAgBhB,EAAS,OAAO,SAAS,OAAS,EAClDiB,EAAgBd,EAAS,OAAO,SAAS,OAAS,EAExD,OAAOY,EAAYC,EAAgBC,IAAkB,CACvD,CAAC,EAED,eAAeC,EAAcC,EAA0B,CACrD,OAAK7B,EAAW,MAMTkB,EAAaW,CAAI,EALlBlC,EAAU,UAAU,YAAcA,EAAU,aAAa,WAAW,mCAC/DE,EAAmB,KAAK,EAC1BV,EAAO,KAAK,CAAE,KAAM,eAAgB,MAAO,CAAE,YAAaF,EAAM,QAAA,EAAY,CAIvF,CAEA,OAAA6C,GAAU,SAAY,CACpB,MAAM,QAAQ,IAAI,CAChBf,EAAA,EACAR,EAAA,EACAK,EAAA,CAAa,CACd,CACH,CAAC,2DAMCmB,EAiFM,MAAA,KAAA,CAhFJA,EAqBM,MAAA,KAAA,CApByBC,EAAAX,CAAA,OAA7BY,EAA+DC,EAAA,OAAvB,uBAAA,EAAA,IAG3BF,EAAAZ,CAAA,OADba,EAiBEE,EAAA,OAfA,uBAAA,GACA,oBAAA,GACC,eAAcH,EAAAf,CAAA,EACd,wBAAuBe,EAAAhB,CAAA,GAAuBgB,EAAAlC,CAAA,EAC9C,MAAOkC,EAAAZ,CAAA,EAAa,MACpB,WAAUY,EAAAZ,CAAA,EAAa,QACvB,QAASY,EAAAT,CAAA,EACT,eAAcS,EAAAZ,CAAA,EAAa,YAC3B,QAAOY,EAAAZ,CAAA,EAAa,KACpB,gBAAeY,EAAAZ,CAAA,EAAa,aAC5B,UAASY,EAAAZ,CAAA,EAAa,OACtB,qBAAoBY,EAAA3B,CAAA,GAAM,QAAQ,OAAK,EACvC,yBAAwB2B,EAAAtB,CAAA,GAAU,QAAQ,OAAK,EAC/C,sBAAqBsB,EAAAnB,CAAA,GAAU,QAAQ,OAAK,EAC5C,SAAMuB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAET,EAAcI,EAAAZ,CAAA,CAAY,EAAA,iNAIvCW,EAwDM,MAxDNO,GAwDM,CAvDJC,EAaaC,EAAA,CAZV,MAAOR,EAAA3C,CAAA,EAAC,aAAA,EACR,UAAS2C,EAAA7B,CAAA,EACT,MAAO6B,EAAA3B,CAAA,GAAM,QAAQ,SAAO,CAAA,EAC5B,QAAS2B,EAAA1B,CAAA,EACV,KAAK,OACL,qBAAA,GACA,mBAAA,GACA,yBAAuB,WAAA,GAEZ,MACT,IAAyC,CAAA,GAAA8B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAzCL,EAAyC,MAAA,CAApC,MAAM,WAAW,KAAK,WAAA,6DAI/BQ,EAaaC,EAAA,CAZV,MAAOR,EAAA3C,CAAA,EAAC,iBAAA,EACR,UAAS2C,EAAA7B,CAAA,EACT,MAAO6B,EAAAtB,CAAA,GAAU,QAAQ,SAAO,CAAA,EAChC,QAASsB,EAAArB,CAAA,EACV,KAAK,WACL,qBAAA,GACA,mBAAA,GACA,yBAAuB,WAAA,GAEZ,MACT,IAAyC,CAAA,GAAAyB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAzCL,EAAyC,MAAA,CAApC,MAAM,WAAW,KAAK,WAAA,6DAKvBC,EAAA9B,CAAA,OADR+B,EAWaO,EAAA,OATV,MAAOR,EAAA3C,CAAA,EAAC,0BAAA,EACR,UAAS2C,EAAA7B,CAAA,EACV,KAAK,YACL,qBAAA,GACA,mBAAA,EAAA,GAEW,MACT,IAAyC,CAAA,GAAAiC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAzCL,EAAyC,MAAA,CAApC,MAAM,WAAW,KAAK,WAAA,qDAI/BQ,EAWaC,EAAA,CAVV,MAAOR,EAAA3C,CAAA,EAAC,sBAAA,EACR,UAAS2C,EAAA7B,CAAA,EACT,MAAO6B,EAAAnB,CAAA,GAAU,QAAQ,SAAO,CAAA,EAChC,QAASmB,EAAAlB,CAAA,EACV,qBAAA,GACA,mBAAA,EAAA,GAEW,MACT,IAAyC,CAAA,GAAAsB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAzCL,EAAyC,MAAA,CAApC,MAAM,WAAW,KAAK,WAAA,iEAKfC,EAAAR,CAAA,IAAcQ,EAAAX,CAAA,OAAlCY,EAIeQ,EAAA,OAJ+B,KAAMT,EAAA3C,CAAA,EAAC,0BAAA,CAAA,GACxC,KAAIqD,EACb,CAAkD,CADjC,YAAAC,KAAW,CAC5BJ,EAAkDK,EAAA,CAA9B,gBAAeD,CAAA,EAAW,KAAA,EAAA,CAAA,eAAA,CAAA,CAAA"}