{"version":3,"file":"D5zwd51Z.js","sources":["../../../../app/pages/auth/password/forgot.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useAsync from \"~/composables/use-async\";\nimport PasswordAPI from \"~/services/password\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst { t, te } = useI18n();\nconst route = useRoute();\nconst isResetMailSent = ref(false);\nconst formData = reactive({\n  email: (route.query.email as string) || \"\",\n  password: \"\",\n});\n\nconst onSuccess = () => (isResetMailSent.value = true);\nconst {\n  loading,\n  error,\n  run: resetPassword,\n} = useAsync(PasswordAPI.reset, { onSuccess });\nconst onSubmit = () => resetPassword({ email: formData.email });\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\n\nuseHead({ title: t(\"labels.forgot_password\") });\n</script>\n\n<template>\n  <div>\n    <AuthHeader mode=\"sign-up\" with-locale absolute transparent />\n\n    <BaseMain>\n      <div class=\"pt-32 pb-12 form-column\">\n        <div class=\"w-full max-w-[400px]\">\n          <div class=\"text-center\">\n            <h1 class=\"text-heading-1-bold\">\n              {{ t(\"labels.forgot_password\") }}\n            </h1>\n            <p v-if=\"!isResetMailSent\" class=\"mt-4 text-xs text-secondary\">\n              {{ t(\"pages.auth_password.forgot_password_help_text\") }}\n            </p>\n            <i18n-t\n              v-else\n              tag=\"p\"\n              keypath=\"pages.auth_password.forgot_password_success_text\"\n              class=\"mt-4 text-xm text-secondary\"\n            >\n              <template #email>\n                <span class=\"text-main font-bold\"> {{ formData.email }}</span>\n              </template>\n            </i18n-t>\n          </div>\n\n          <BaseAlert v-if=\"errorMessage\" type=\"danger\" class=\"mt-6\" :text=\"errorMessage\" />\n\n          <form\n            v-if=\"!isResetMailSent\"\n            class=\"mt-8\"\n            @submit.prevent=\"onSubmit()\"\n          >\n            <BaseInput\n              v-model=\"formData.email\"\n              :disabled=\"loading\"\n              type=\"email\"\n              name=\"email\"\n              :label=\"t('labels.email')\"\n              :placeholder=\"t('labels.email_placeholder')\"\n              autocomplete=\"username\"\n              pattern=\"[a-zA-Z0-9._%+\\-]+@[a-z0-9.\\-]+\\.[a-z]{2,4}$\"\n              size=\"30\"\n              required\n            />\n\n            <BaseButton\n              class=\"mt-16 font-bold\"\n              name=\"submit-send-reset-link\"\n              :disabled=\"loading\"\n              full-width\n            >\n              {{ t(\"pages.auth_password.send_reset_link\") }}\n            </BaseButton>\n\n            <div class=\"text-center mt-4\">\n              <BaseButton\n                name=\"back-login\"\n                type=\"secondary\"\n                tag=\"nuxt-link\"\n                :to=\"{ path: '/auth/login/', query: { email: formData.email } }\"\n                :disabled=\"loading\"\n                full-width\n                link\n              >\n                <span class=\"text-[var(--base-secondary-text-color)]\">{{ t(\"pages.auth_password.back_to_sign_in\") }}</span>\n              </BaseButton>\n            </div>\n          </form>\n          <form v-else class=\"flex flex-col\" @submit.prevent>\n            <BaseButton\n              class=\"mt-16 font-bold text-center\"\n              name=\"back-login\"\n              full-width\n              tag=\"nuxt-link\"\n              :to=\"{ path: '/auth/login/', query: { email: formData.email } }\"\n              :disabled=\"loading\"\n            >\n              <span class=\"text-[var(--base-secondary-text-color)]\">{{ t(\"pages.auth_password.back_to_sign_in\") }}</span>\n            </BaseButton>\n            <div class=\"text-center mt-4\">\n              <BaseButton\n                name=\"back-login\"\n                type=\"secondary\"\n                :disabled=\"loading\"\n                full-width\n                link\n                @click=\"onSubmit()\"\n              >\n                <span class=\"text-[var(--base-secondary-text-color)]\">{{ t(\"pages.auth_password.resend_instruction\") }}</span>\n              </BaseButton>\n            </div>\n          </form>\n        </div>\n      </div>\n    </BaseMain>\n  </div>\n</template>\n"],"names":["te","useI18n","route","useRoute","isResetMailSent","ref","formData","reactive","onSuccess","loading","error","resetPassword","useAsync","PasswordAPI","onSubmit","errorMessage","computed","getErrorLocalePathMessage","useHead","_createElementBlock","_createVNode","_component_AuthHeader","_component_BaseMain","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_unref","_createBlock","_component_i18n_t","_hoisted_6","_hoisted_5","_component_BaseAlert","_component_BaseButton","_hoisted_9","_hoisted_10","_hoisted_11","_component_BaseInput","_cache","$event","_hoisted_7","_hoisted_8"],"mappings":"2nCAKA,KAAM,CAAE,EAAG,GAAAA,CAAA,EAAOC,EAAA,EACZC,EAAQC,EAAA,EACRC,EAAkBC,EAAI,EAAK,EAC3BC,EAAWC,EAAS,CACxB,MAAQL,EAAM,MAAM,OAAoB,GACxC,SAAU,EAAA,CACX,EAEKM,EAAY,IAAOJ,EAAgB,MAAQ,GAC3C,CACJ,QAAAK,EACA,MAAAC,EACA,IAAKC,CAAA,EACHC,EAASC,EAAY,MAAO,CAAE,UAAAL,EAAW,EACvCM,EAAW,IAAMH,EAAc,CAAE,MAAOL,EAAS,MAAO,EACxDS,EAAeC,EAAS,IAAMN,EAAM,OAASO,EAA0BP,EAAM,MAAO,CAAE,EAAG,GAAAV,CAAA,CAAI,EAAE,OAAO,EAE5G,OAAAkB,EAAQ,CAAE,MAAO,EAAE,wBAAwB,EAAG,8DAI5CC,EA+FM,MAAA,KAAA,CA9FJC,EAA8DC,EAAA,CAAlD,KAAK,UAAU,cAAA,GAAY,SAAA,GAAS,YAAA,EAAA,GAEhDD,EA2FWE,EAAA,KAAA,WA1FT,IAyFM,CAzFNC,EAyFM,MAzFNC,EAyFM,CAxFJD,EAuFM,MAvFNE,EAuFM,CAtFJF,EAiBM,MAjBNG,EAiBM,CAhBJH,EAEK,KAFLI,EAEKC,EADAC,EAAA,CAAA,EAAC,wBAAA,CAAA,EAAA,CAAA,EAEIA,EAAAzB,CAAA,OAGV0B,EASSC,EAAA,OAPP,IAAI,IACJ,QAAQ,mDACR,MAAM,6BAAA,GAEK,QACT,IAA8D,CAA9DR,EAA8D,OAA9DS,EAA8DJ,EAAxBC,EAAAvB,CAAA,EAAS,KAAK,EAAA,CAAA,CAAA,eAVxDa,EAEI,IAFJc,EAEIL,EADCC,EAAA,CAAA,EAAC,+CAAA,CAAA,EAAA,CAAA,KAcSA,EAAAd,CAAA,OAAjBe,EAAiFI,EAAA,OAAlD,KAAK,SAAS,MAAM,OAAQ,KAAML,EAAAd,CAAA,CAAA,6BAGxDc,EAAAzB,CAAA,OAwCTe,EAuBO,OAAA,OAvBM,MAAM,gBAAiB,uBAAD,IAAA,CAAA,EAAe,CAAA,SAAA,CAAA,EAAA,GAChDC,EASae,EAAA,CARX,MAAM,8BACN,KAAK,aACL,aAAA,GACA,IAAI,YACH,GAAE,CAAA,KAAA,eAAA,MAAA,CAAA,MAA0CN,EAAAvB,CAAA,EAAS,MAAK,EAC1D,SAAUuB,EAAApB,CAAA,CAAA,aAEX,IAA2G,CAA3Gc,EAA2G,OAA3Ga,GAA2GR,EAAlDC,EAAA,CAAA,EAAC,qCAAA,CAAA,EAAA,CAAA,CAAA,6BAE5DN,EAWM,MAXNc,GAWM,CAVJjB,EASae,EAAA,CARX,KAAK,aACL,KAAK,YACJ,SAAUN,EAAApB,CAAA,EACX,aAAA,GACA,KAAA,GACC,uBAAOK,EAAA,EAAQ,aAEhB,IAA8G,CAA9GS,EAA8G,OAA9Ge,GAA8GV,EAArDC,EAAA,CAAA,EAAC,wCAAA,CAAA,EAAA,CAAA,CAAA,qCA7DhEV,EAwCO,OAAA,OAtCL,MAAM,OACL,0BAAgBL,IAAQ,CAAA,SAAA,CAAA,EAAA,GAEzBM,EAWEmB,EAAA,CAVS,WAAAV,EAAAvB,CAAA,EAAS,MAAT,sBAAAkC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAZ,EAAAvB,CAAA,EAAS,MAAKmC,GACtB,SAAUZ,EAAApB,CAAA,EACX,KAAK,QACL,KAAK,QACJ,MAAOoB,EAAA,CAAA,EAAC,cAAA,EACR,YAAaA,EAAA,CAAA,EAAC,0BAAA,EACf,aAAa,WACb,QAAQ,kDACR,KAAK,KACL,SAAA,EAAA,0DAGFT,EAOae,EAAA,CANX,MAAM,kBACN,KAAK,yBACJ,SAAUN,EAAApB,CAAA,EACX,aAAA,EAAA,aAEA,IAA8C,KAA3CoB,EAAA,CAAA,EAAC,qCAAA,CAAA,EAAA,CAAA,CAAA,wBAGNN,EAYM,MAZNmB,EAYM,CAXJtB,EAUae,EAAA,CATX,KAAK,aACL,KAAK,YACL,IAAI,YACH,GAAE,CAAA,KAAA,eAAA,MAAA,CAAA,MAA0CN,EAAAvB,CAAA,EAAS,MAAK,EAC1D,SAAUuB,EAAApB,CAAA,EACX,aAAA,GACA,KAAA,EAAA,aAEA,IAA2G,CAA3Gc,EAA2G,OAA3GoB,EAA2Gf,EAAlDC,EAAA,CAAA,EAAC,qCAAA,CAAA,EAAA,CAAA,CAAA"}