import{_ as P,a as S}from"./CZgr-xsV.js";import{_ as U}from"./DowbGgKV.js";import{a as A,_ as E,v as d}from"./V8NEB3vv.js";import{u as I,k as R,l as $,b as C,c as D,_ as F,g as H,d as M}from"./vfF7RKPo.js";import{P as T}from"./Co_HdXxg.js";import{d as G,B as L,g as Y,o as j,f as a,b as p,h as l,v as f,Y as e,ad as z}from"./DrHYGv5w.js";import"./YXvYJOkl.js";import"./qTb77THm.js";import"./6tYJEWcP.js";import"./B4wo3SUq.js";import"./DJO5Ko8d.js";import"./d1rVCiWV.js";import"./Dql7-ge0.js";import"./xeMFU3jQ.js";import"./B-DBQphj.js";import"./CeLpXuE_.js";import"./B47pBCHT.js";import"./DsilW_8g.js";import"./CuVeKCNu.js";import"./DjtFQFjx.js";import"./DdW31oNs.js";import"./CFdcWqxl.js";import"./B1IlCmgd.js";import"./BmvnMvdl.js";import"./DNaFeO-P.js";import"./Dq-QN952.js";import"./IVvJIK5b.js";const J={class:"pt-32 pb-12 form-column"},K={class:"w-full max-w-[400px]"},O={class:"text-center"},Q={class:"text-heading-1-bold"},W={class:"flex flex-col gap-6"},ye=G({__name:"reset",setup(X){const{t:s,te:h}=I(),m=R(),u=M(),b=$(),g=m.hash.substring(1),t=L({email:m.query.email||"",password_new:"",password_new_repeat:"",token:g||""});function x(r){const o=[],n=e(r);return d.required(n.password_new)?d.min(n.password_new,{length:8})||o.push({path:"password_new",message:s("errors.invalid_password")}):o.push({path:"password_new",message:s("errors.field_is_required")}),d.required(n.password_new_repeat)?d.min(n.password_new_repeat,{length:8})||o.push({path:"password_new_repeat",message:s("errors.invalid_password")}):o.push({path:"password_new_repeat",message:s("errors.field_is_required")}),o}const v=()=>b.push({name:"auth-login",query:{email:t.email,passwordResetSuccess:"true"}}),V=r=>{const{message:o}=H(r.message,{t:s,te:h});return u.error(o)},{loading:_,run:k}=C(T.applyNew,{onSuccess:v,onError:V});function q(){if(t.password_new!==t.password_new_repeat)return u.error(s("errors.passwords_dont_match"));const r={reset_token:t.token,new_password:t.password_new};return k(r)}return D({title:s("labels.forgot_password")}),(r,o)=>{const n=P,w=U,c=E,B=F,y=A,N=S;return j(),Y("div",null,[a(n,{mode:"sign-up","with-locale":"",absolute:"",transparent:""}),a(N,null,{default:p(()=>[l("div",J,[l("div",K,[l("div",O,[l("h1",Q,f(e(s)("labels.reset_password")),1)]),a(y,{state:e(t),validate:x,class:"mt-8",onSubmit:q},{default:p(()=>[l("div",W,[a(c,{label:e(s)("labels.password_new"),name:"password_new",required:""},{default:p(()=>[a(w,{modelValue:e(t).password_new,"onUpdate:modelValue":o[0]||(o[0]=i=>e(t).password_new=i),disabled:e(_),placeholder:e(s)("labels.enter_new_password"),name:"new-password",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),a(c,{label:e(s)("labels.password_repeat"),name:"password_new_repeat",required:""},{default:p(()=>[a(w,{modelValue:e(t).password_new_repeat,"onUpdate:modelValue":o[1]||(o[1]=i=>e(t).password_new_repeat=i),disabled:e(_),placeholder:e(s)("labels.enter_new_password"),name:"new-password-repeat",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),a(B,{class:"mt-10 font-bold",name:"submit-send-reset-link",disabled:e(_),"full-width":""},{default:p(()=>[z(f(e(s)("pages.auth_password.set_new_password")),1)]),_:1},8,["disabled"])]),_:1},8,["state"])])])]),_:1})])}}});export{ye as default};
