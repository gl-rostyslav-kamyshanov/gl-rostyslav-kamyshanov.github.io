import{_ as W}from"./BmvnMvdl.js";import{u as X,X as Y,_ as q,A as G}from"./vfF7RKPo.js";import{d as Q,N as O,s as S,ak as Z,g as m,o as f,k as A,e as p,ab as ee,i as v,f as k,m as re,Y as o,b as V,aj as le,h as _,H as te,v as F,F as se,al as ae,j as ne,x as oe,c as ie}from"./DrHYGv5w.js";import{_ as N}from"./DowbGgKV.js";const ue={key:0},de=["name","aria-labelledby"],ce={key:0,role:"option",class:"baseSelect__listOption"},fe=["data-test-id","aria-selected","onClick"],me={key:0},pe={inheritAttrs:!1},_e=Q({...pe,__name:"Select",props:{disabled:{type:Boolean},hasError:{type:Boolean},errorMessage:{},label:{},name:{},modelValue:{},placeholder:{},searchPlaceholder:{},rootClass:{},options:{},optionsItemClass:{},optionsKeyTitle:{default:"title"},optionsKeyValue:{default:"value"},hasSearch:{type:Boolean},emittedKey:{},multiple:{type:Boolean},optionsClass:{},hasEmptyInput:{type:Boolean},hasOptionTitle:{type:Boolean,default:!0},readonly:{type:Boolean,default:!0}},emits:["update:modelValue","select"],setup(j,{emit:D}){const{t:I}=X(),E=D,l=j,M=O(()=>l.searchPlaceholder||I("labels.search")),C=S(null),b=S(""),d=S(!1),T=S(null),t=e=>typeof e=="string"||typeof e=="number";function L(e,r,s){return!r||Array.isArray(r)&&!r.length?!1:t(e)&&t(r)?r===e:Array.isArray(r)?t(e)?!1:s?!!r.find(a=>t(a)?e[s]===a:e[s]===a[s]):!1:s?!t(e)&&!t(r)?r[s]===e[s]:t(e)&&!t(r)?r[s]===e:!t(e)&&t(r)?r===e[s]:!1:!1}function R(e,r,s){return e.filter(a=>t(r)&&t(a)?a!==r:s?!t(r)&&!t(a)?a[s]!==r[s]:t(r)&&!t(a)?a[s]!==r:!t(r)&&t(a)?a!==r[s]:!0:!0)}function K(e,r,s){if(!r)return e;const a=u=>`${u}`.toLowerCase().includes(r?.toLowerCase().trim());return s?e.filter(u=>a(u[s])):e.filter(u=>t(u)?a(u):e)}const x=O(()=>K(l.options||[],b.value,l.optionsKeyTitle)),i=e=>L(e,l.modelValue,l.emittedKey||l.optionsKeyValue),U=e=>l.emittedKey?t(e)?e:e[l.emittedKey]:e,w=e=>t(e)?e:e[l.optionsKeyValue],$=e=>Array.isArray(e)?t(e[0])?e.join(", "):JSON.stringify(e):t(e)?e:e[l.optionsKeyTitle],g=e=>E("update:modelValue",e),B=()=>{d.value=!0,oe(()=>C.value&&C.value.focus())},y=()=>d.value=!1,z=()=>b.value="",h=()=>d.value=!d.value,P=e=>{const r=U(e);if(E("select",e),l.multiple){if(!Array.isArray(l.modelValue)){console.error("Invalid `modelValue`! When `multiple` prop set - must be an array!");return}const s=Array.isArray(l.modelValue)?l.modelValue:[];if(i(e)){const a=R(s,e,l.emittedKey||l.optionsKeyValue);g(a)}else g([...s,r])}else i(e)?g(void 0):g(r),y()},c=O(()=>l.multiple?(l.options||[]).reduce((e,r)=>(i(r)&&e.push(r),e),[]):(l.options||[]).find(i));return Y(T,()=>y()),(e,r)=>{const s=W,a=q,u=G,H=Z("motion-slide-top");return f(),m("div",{ref_key:"selectElRef",ref:T,class:A(["baseSelect",l.rootClass])},[p(e.$slots,"toggle",{open:B,close:y,toggle:h,isOpen:o(d),isSelected:Array.isArray(o(c))?o(c).length>0:!!o(c),value:l.modelValue},()=>[k(N,re(e.$attrs,{"model-value":l.hasEmptyInput?"":o(c)&&$(o(c)),name:l.name,label:l.label,type:"text",class:"truncate",disabled:l.disabled,placeholder:l.placeholder,"has-error":l.hasError,"error-message":l.errorMessage,readonly:l.readonly,onFocus:r[1]||(r[1]=n=>B())}),{prefix:V(()=>[p(e.$slots,"innerInputPrefix",{toggle:h})]),input:V(()=>[p(e.$slots,"innerInput",{toggle:h,value:l.hasEmptyInput?"":o(c)&&$(o(c))})]),suffix:V(()=>[p(e.$slots,"innerInputSuffix",{toggle:h}),k(a,{type:"icon","attr-type":"button",name:"baseSelect__toggle",class:"baseInput__suffix",title:"Toggle",disabled:l.disabled,"aria-expanded":o(d),"aria-haspopup":"listbox",onClick:r[0]||(r[0]=le(n=>h(),["prevent"]))},{default:V(()=>[k(s,{class:"inline-block text-main"})]),_:1},8,["disabled","aria-expanded"])]),_:3},16,["model-value","name","label","disabled","placeholder","has-error","error-message","readonly"])]),o(d)?ee((f(),m("div",{key:0,class:A(["baseSelect__options",l.optionsClass])},[l.hasSearch?(f(),m("div",ue,[k(N,{ref_key:"innerSearchEl",ref:C,modelValue:o(b),"onUpdate:modelValue":r[2]||(r[2]=n=>te(b)?b.value=n:null),name:"search",class:"font-medium",placeholder:o(M),search:"",onClear:r[3]||(r[3]=n=>z())},null,8,["modelValue","placeholder"]),r[6]||(r[6]=_("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}},null,-1))])):v("",!0),_("ul",{name:`listbox-${l.name}`,"aria-labelledby":`input-label-${l.name}`,class:"baseSelect__list",role:"listbox",tabindex:"0",onBlur:r[4]||(r[4]=n=>y()),onKeyup:r[5]||(r[5]=ne(n=>y(),["esc"]))},[!o(x)||!o(x).length?(f(),m("li",ce,[_("span",null,F(o(I)("labels.no_options_found")),1)])):v("",!0),(f(!0),m(se,null,ae(o(x),(n,J)=>p(e.$slots,"option-item-inner",{key:w(n),option:n,isSelected:i(n),select:P},()=>[_("li",{role:"option","data-test-id":`${e.name}-option-${J}`,class:A(["baseSelect__listOption",[l.optionsItemClass,{baseSelect__listOption_selected:i(n)}]]),"aria-selected":i(n)?"true":"false",onClick:be=>P(n)},[_("div",null,[p(e.$slots,"option-item-inner-prefix",{key:w(n),option:n}),l.hasOptionTitle?(f(),m("span",me,F($(n)),1)):v("",!0)]),i(n)?(f(),ie(u,{key:0})):v("",!0)],10,fe),r[7]||(r[7]=_("li",{role:"separator",class:"hr mx-4",style:{background:"var(--base-background-color)"}},null,-1))])),128))],40,de)],2)),[[H]]):v("",!0)],2)}}}),Se=Object.assign(_e,{__name:"BaseSelect"});export{Se as _};
