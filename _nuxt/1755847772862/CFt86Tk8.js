import{c as A}from"./ql2iuhsx.js";import{S as L,I as O,b as Q,o as W,_ as F,J as N,a as T,L as Y,E as s,$ as l,d as M,l as r,G as c,k as e,v as _,w as u,Q as i,M as q,H as v,Z as h,i as G,D as x,N as Z,K,O as J,n as P,p as X,P as ee,U as H,R as te}from"./WbqemHlN.js";import{u as ae,m as oe}from"./fwpHwX0P.js";import"./D1PGu32k.js";const le={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function se(n,o){return l(),s("svg",le,o[0]||(o[0]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,-1)]))}const ne=h({name:"lucide-trash",render:se}),ie={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function re(n,o){return l(),s("svg",ie,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M3 12a9 9 0 1 0 9-9a9.75 9.75 0 0 0-6.74 2.74L3 8"}),e("path",{d:"M3 3v5h5"})],-1)]))}const ce=h({name:"lucide-rotate-ccw",render:re}),ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function de(n,o){return l(),s("svg",ue,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M10 2h4m-2 12v-4m-8 3a8 8 0 0 1 8-7a8 8 0 1 1-5.3 14L4 17.6"}),e("path",{d:"M9 17H4v5"})],-1)]))}const pe=h({name:"lucide-timer-reset",render:de}),ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function he(n,o){return l(),s("svg",ve,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M3 12a9 9 0 0 1 9-9a9.75 9.75 0 0 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5m5 4a9 9 0 0 1-9 9a9.75 9.75 0 0 1-6.74-2.74L3 16"}),e("path",{d:"M8 16H3v5"})],-1)]))}const me=h({name:"lucide-refresh-cw",render:he}),fe={class:"collapse collapse-arrow"},ge={class:"collapse-title px-2 py-0.5 bg-neutral-200 dark:bg-neutral-800 theme-neutral"},ke={class:"font-semibold text-sm flex gap-x-1 items-center"},ye=L({__name:"UCollapse.ce",props:J({title:{type:String},icon:{type:[Object,Function]}},{open:{type:Boolean,default:!0},openModifiers:{}}),emits:["update:open"],setup(n){const o=P(n,"open");function g(a){if(a.target instanceof HTMLElement){const m={block:"nearest",inline:"nearest",behavior:"smooth"};a.target.scrollIntoView(m)}}return(a,m)=>(l(),s("div",fe,[X(e("input",{"onUpdate:modelValue":m[0]||(m[0]=C=>o.value=C),type:"checkbox"},null,512),[[ee,o.value]]),e("div",ge,[H(a.$slots,"title",{open:o.value,title:a.title},()=>[e("h3",ke,[H(a.$slots,"icon",{},()=>[a.icon?(l(),x(te(a.icon),{key:0,class:"size-4"})):_("",!0)],!0),v(" "+u(a.title??"Group"),1)])],!0)]),e("div",{class:"collapse-content px-2 text-sm overflow-hidden",onTransitionend:g},[H(a.$slots,"default",{open:o.value},void 0,!0)],32)]))}}),we='.collapse[data-v-a5be0055]:not(td,tr,colgroup){visibility:visible}.collapse[data-v-a5be0055]{position:relative;display:grid;overflow:hidden;width:100%;grid-template-rows:max-content 0fr;transition:grid-template-rows .2s;isolation:isolate}.collapse>input[data-v-a5be0055]:is([type=checkbox],[type=radio]){grid-column-start:1;grid-row-start:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;opacity:0}.collapse[data-v-a5be0055]:is([open],:focus),.collapse[data-v-a5be0055]:has(>input:is([type=checkbox],[type=radio]):checked){grid-template-rows:max-content 1fr}.collapse:is([open],:focus)>.collapse-content[data-v-a5be0055],.collapse[data-v-a5be0055]:not(.collapse-close)>:where(input:is([type=checkbox],[type=radio]):checked~.collapse-content){visibility:visible;min-height:fit-content}.collapse[data-v-a5be0055]:focus-visible,.collapse[data-v-a5be0055]:has(>input:is([type=checkbox],[type=radio]):focus-visible){outline-color:var(--ui-text);outline-style:solid;outline-width:2px;outline-offset:2px}.collapse:not(.collapse-close)>input[type=checkbox][data-v-a5be0055],.collapse:not(.collapse-close)>input[type=radio][data-v-a5be0055]:not(:checked),.collapse:not(.collapse-close)>.collapse-title[data-v-a5be0055]{cursor:pointer}.collapse:focus:not(.collapse-close,.collapse[open])>.collapse-title[data-v-a5be0055]{cursor:unset}.collapse:is([open]).collapse-arrow>.collapse-title[data-v-a5be0055]:after{transform:translateY(-50%) rotate(225deg)}.collapse.collapse-arrow:focus>.collapse-title[data-v-a5be0055]:after{transform:translateY(-50%) rotate(225deg)}.collapse.collapse-arrow>input:is([type=checkbox],[type=radio]):checked~.collapse-title[data-v-a5be0055]:after{transform:translateY(-50%) rotate(225deg)}.collapse>input[data-v-a5be0055]:is([type=checkbox],[type=radio]){z-index:1;width:100%}.collapse-title[data-v-a5be0055],.collapse-content[data-v-a5be0055]{grid-column-start:1;grid-row-start:1}.collapse-content[data-v-a5be0055]{visibility:hidden;grid-column-start:1;grid-row-start:2;min-height:0;cursor:unset;transition:visibility .2s}.collapse-arrow>.collapse-title[data-v-a5be0055]:after{position:absolute;display:block;height:.5rem;width:.5rem;transform:translateY(-100%) rotate(45deg);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;top:50%;right:.8em;inset-inline-end:.75rem;content:"";transform-origin:75% 75%;box-shadow:2px 2px;pointer-events:none}.collapse-title[data-v-a5be0055]{position:relative;width:100%;transition:background-color .2s ease-out}',be=G(ye,[["styles",[we]],["__scopeId","data-v-a5be0055"]]);function xe(n){if(n<1e3)return`${Math.round(n)} ms`;const o=n/1e3;if(n<1e4)return`${o.toFixed(3)} seconds`;if(n<6e4)return`${Math.floor(o)} seconds`;const g=Math.floor(o/60);return n<36e5?`${g} minute${g>1?"s":""}`:`${Math.floor(g/60)}h${g%60}m${o%60}s`}const _e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function $e(n,o){return l(),s("svg",_e,o[0]||(o[0]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},null,-1)]))}const Ce=h({name:"lucide-wrench",render:$e}),Me={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function qe(n,o){return l(),s("svg",Me,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 16v-4m0-4h.01"})],-1)]))}const He=h({name:"lucide-info",render:qe}),je={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ze(n,o){return l(),s("svg",je,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),e("path",{d:"M14 2v4a2 2 0 0 0 2 2h4M10 9H8m8 4H8m8 4H8"})],-1)]))}const Be=h({name:"lucide-file-text",render:ze}),Se={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Te(n,o){return l(),s("svg",Se,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"m15 9l-6 6m0-6l6 6"})],-1)]))}const Le=h({name:"lucide-circle-x",render:Te}),Ee={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function De(n,o){return l(),s("svg",Ee,o[0]||(o[0]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2a2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1m8 0h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"},null,-1)]))}const Ie=h({name:"lucide-braces",render:De}),Re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ve(n,o){return l(),s("svg",Re,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M3 12a9 9 0 1 0 9-9a9.75 9.75 0 0 0-6.74 2.74L3 8"}),e("path",{d:"M3 3v5h5m4-1v5l4 2"})],-1)]))}const Ue=h({name:"lucide-history",render:Ve}),Ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Oe(n,o){return l(),s("svg",Ae,o[0]||(o[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),e("path",{d:"M16 8.9V7H8l4 5l-4 5h8v-1.9"})],-1)]))}const Qe=h({name:"lucide-sigma-square",render:Oe}),We={class:"flex flex-col divide-y dark:divide-(--ui-border) divide-(--ui-border-accented)"},Fe={class:"py-1 text-sm"},Ne={class:"grid grid-cols-[auto_1fr] gap-1"},Ye={class:"rounded bg-neutral-500/20 p-0.5"},Ge={class:"grid grid-cols-[auto_1fr] gap-x-2",title:"When was the query entry last updated"},Ze={class:"font-bold"},Ke={key:0,class:"grid grid-cols-[auto_1fr] gap-x-2",title:"When was the last time the query was fetched"},Je={class:"font-bold"},Pe={key:1,class:"grid grid-cols-[auto_1fr] gap-x-2",title:"How long did the last query take to fetch"},Xe={class:"font-bold"},et={class:"grid grid-cols-[auto_1fr] gap-x-2",title:"How many components and effects are using this query"},tt={class:"font-bold"},at={key:2,class:"grid grid-cols-[auto_1fr] gap-x-2",title:"When is this query entry garbace collected"},ot={class:"font-bold"},lt={class:"py-2 gap-2 flex flex-wrap items-center justify-items-start"},st={class:"py-1"},nt={key:0,class:"rounded p-1 overflow-auto max-h-[1200px]"},it={key:1,class:"text-neutral-500/50"},rt={class:"py-1"},ct={key:0,class:"rounded p-1 overflow-auto max-h-[1200px]"},ut={key:1,class:"text-neutral-500/50"},dt={class:"py-1"},pt={class:"grid grid-cols-[auto_1fr] gap-1"},vt={class:"font-bold"},ht={class:"font-bold"},mt={class:"font-bold"},ft={class:"font-bold"},gt={class:"py-1"},kt={class:"rounded p-1 overflow-auto max-h-[1200px]"},yt={class:"py-1"},wt={key:0,class:"rounded bg-neutral-500/20 p-1 overflow-auto max-h-[1200px]"},bt={key:1},xt={key:1,class:"py-6 mx-auto"},_t={class:"flex flex-col text-center items-center gap-2 text-lg px-2"},Ht=L({__name:"[queryId]",setup(n){const o=O(),g=Q(),a=W(()=>g.value.find(d=>d.keyHash===o.params.queryId)??null),m={showSecond:!0,rounding:"floor",max:1e3*60*5},C=F(()=>{var d;return((d=a.value)==null?void 0:d.devtools.updatedAt)??0},{...m,updateInterval:3e3}),y=N(),b=T(!1);let j=b.value,z=null;const $=T(!1);return Y(()=>{var d;return(d=a.value)==null?void 0:d.state},d=>{!d||z===d.status||(z=d.status,d.status==="error"?($.value=!0,j=b.value,b.value=!1):d.status==="success"&&(b.value=j,$.value=!1))}),(d,t)=>{const k=be,E=me,w=Z,D=pe,B=ae,I=oe,R=ce,V=ne,U=A;return l(),s("div",We,[a.value?(l(),s(M,{key:0},[r(k,{title:"Details",icon:i(He)},{default:c(()=>{var p,f,S;return[e("div",Fe,[e("p",Ne,[t[9]||(t[9]=e("span",null,"key:",-1)),e("span",null,[e("code",Ye,u(a.value.key),1)])]),e("p",Ge,[t[10]||(t[10]=e("span",null,"Last update:",-1)),e("span",Ze,u(i(C)),1)]),(p=a.value.devtools.history.at(0))!=null&&p.fetchTime?(l(),s("p",Ke,[t[11]||(t[11]=e("span",null,"Last fetch:",-1)),e("span",Je,u(i(q)(new Date(a.value.devtools.history.at(0).fetchTime.start),{...m,max:void 0})),1)])):_("",!0),(S=(f=a.value.devtools.history.at(0))==null?void 0:f.fetchTime)!=null&&S.end?(l(),s("p",Pe,[t[12]||(t[12]=e("span",null,"Fetch duration:",-1)),e("span",Xe,u(i(xe)(a.value.devtools.history.at(0).fetchTime.end-a.value.devtools.history.at(0).fetchTime.start)),1)])):_("",!0),e("p",et,[e("span",null,[t[13]||(t[13]=v("Observers: ")),e("span",tt,u(a.value.deps.length),1)])]),!a.value.active&&a.value.options?(l(),s("p",at,[typeof a.value.options.gcTime=="number"&&Number.isFinite(a.value.options.gcTime)?(l(),s(M,{key:0},[t[14]||(t[14]=e("span",null,[v("Will be "),e("i",null,"gced")],-1)),e("span",ot,u(i(q)(new Date(a.value.devtools.inactiveAt+a.value.options.gcTime),{...m,max:void 0})),1)],64)):_("",!0)])):_("",!0)])]}),_:1},8,["icon"]),r(k,{title:"Actions",icon:i(Ce)},{default:c(()=>{var p;return[e("div",lt,[r(w,{class:"theme-info",size:"sm",title:"Refetch this query",disabled:((p=a.value.options)==null?void 0:p.enabled)===!1,onClick:t[0]||(t[0]=f=>i(y).emit("queries:refetch",a.value.key))},{default:c(()=>[r(E,{class:"size-3.5"}),t[15]||(t[15]=v(" Refetch "))]),_:1,__:[15]},8,["disabled"]),r(w,{class:"theme-neutral",size:"sm",title:"Invalidate this query",onClick:t[1]||(t[1]=f=>i(y).emit("queries:invalidate",a.value.key))},{default:c(()=>[r(D),t[16]||(t[16]=v(" Invalidate "))]),_:1,__:[16]}),a.value.devtools.simulate!=="loading"?(l(),x(w,{key:0,class:"theme-purple",size:"sm",title:"Restore the previous state",onClick:t[2]||(t[2]=f=>i(y).emit("queries:simulate:loading",a.value.key))},{default:c(()=>[r(B),t[17]||(t[17]=v(" Simulate loading "))]),_:1,__:[17]})):(l(),x(w,{key:1,class:"theme-purple",size:"sm",title:"Simulate a loading state",onClick:t[3]||(t[3]=f=>i(y).emit("queries:simulate:loading:stop",a.value.key))},{default:c(()=>[r(B,{class:"animate-spin"}),t[18]||(t[18]=v(" Stop loading "))]),_:1,__:[18]})),a.value.devtools.simulate!=="error"?(l(),x(w,{key:2,class:"theme-error",size:"sm",title:"Simulate an Error state",onClick:t[4]||(t[4]=f=>i(y).emit("queries:simulate:error",a.value.key))},{default:c(()=>[r(I),t[19]||(t[19]=v(" Simulate error "))]),_:1,__:[19]})):(l(),x(w,{key:3,class:"theme-error",size:"sm",title:"Restore the previous state",onClick:t[5]||(t[5]=f=>i(y).emit("queries:simulate:error:stop",a.value.key))},{default:c(()=>[r(R),t[20]||(t[20]=v(" Remove error "))]),_:1,__:[20]})),r(w,{class:"theme-warning",size:"sm",title:"Reset this query to its initial (pending) state",onClick:t[6]||(t[6]=f=>i(y).emit("queries:reset",a.value.key))},{default:c(()=>[r(V),t[21]||(t[21]=v(" Reset "))]),_:1,__:[21]})])]}),_:1},8,["icon"]),r(k,{open:b.value,"onUpdate:open":t[7]||(t[7]=p=>b.value=p),title:"Data",icon:i(Be)},{default:c(()=>[e("div",st,[a.value.state.data!==void 0?(l(),s("pre",nt,u(a.value.state.data),1)):(l(),s("p",it," No data "))])]),_:1},8,["open","icon"]),r(k,{open:$.value,"onUpdate:open":t[8]||(t[8]=p=>$.value=p),title:`Error${a.value.state.status==="error"?" (!)":""}`,icon:i(Le)},{default:c(()=>[e("div",rt,[a.value.state.error?(l(),s("pre",ct,u(a.value.state.error),1)):(l(),s("p",ut," No error "))])]),_:1},8,["open","title","icon"]),r(k,{title:"Call count",icon:i(Qe),open:!1},{default:c(()=>[e("div",dt,[e("p",pt,[t[22]||(t[22]=e("span",null,"Calls:",-1)),e("span",null,[e("code",vt,u(a.value.devtools.count.total),1)]),t[23]||(t[23]=e("span",null,"Success:",-1)),e("span",null,[e("code",ht,u(a.value.devtools.count.succeed),1)]),t[24]||(t[24]=e("span",null,"Errors:",-1)),e("span",null,[e("code",mt,u(a.value.devtools.count.errored),1)]),t[25]||(t[25]=e("span",null,"Cancelled:",-1)),e("span",null,[e("code",ft,u(a.value.devtools.count.cancelled),1)])])])]),_:1},8,["icon"]),r(k,{title:`History (${a.value.devtools.history.length})`,icon:i(Ue),open:!1},{default:c(()=>[e("div",gt,[(l(!0),s(M,null,K(a.value.devtools.history,p=>(l(),x(k,{key:p.updatedAt,title:`Entry nÂº${p.id} (${i(q)(new Date(p.updatedAt),m)})`,open:!1},{default:c(()=>[e("pre",kt,u(p),1)]),_:2},1032,["title"]))),128))])]),_:1},8,["title","icon"]),r(k,{title:"Options",open:!1,icon:i(Ie)},{default:c(()=>[e("div",yt,[a.value.options?(l(),s("pre",wt,u(a.value.options),1)):(l(),s("p",bt,t[26]||(t[26]=[v(" This Query entry has no options. It might have been created from the server or manually set with "),e("code",null,"queryCache.setQueryData()",-1),v(" for prefetching. ")])))])]),_:1},8,["icon"])],64)):(l(),s("div",xt,[e("p",_t,[t[27]||(t[27]=v(" Select a Query to inspect ")),r(U)])]))])}}});export{Ht as default};
