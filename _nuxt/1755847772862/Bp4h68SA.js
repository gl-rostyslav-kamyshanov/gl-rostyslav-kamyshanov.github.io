import{W as P,c,a as i,i as t,d as A,J as B,u as z,a4 as V,B as O,s as _,t as a,m as v,H as N,z as L,_ as $,w as p,h as m,j as e,F as f,D as T,C as H,a5 as U,ad as q,M as J,P as K,e as I,ae as F,O as j,X as W,p as X,q as G}from"./D1PGu32k.js";import{_ as Q}from"./BvMw-6Xj.js";import{_ as Y}from"./DmgwwZ4c.js";import{f as Z}from"./BW4JKS41.js";import{a as tt,b as et,g as st}from"./BNB-q4Rn.js";const at={};function it(g,l){return i(),c("div",null,l[0]||(l[0]=[t("div",{class:"cardSubscriptionDetailSkeleton"},[t("div",{class:"cardSubscriptionDetailSkeleton__title text-heading-3 skeletonLoading"},[t("div",{class:"h-6 w-16"})]),t("div",{class:"p-4 text-body-medium text-secondary"},[t("div",{class:"skeletonLoading h-6 w-full"})]),t("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}}),t("div",{class:"cardSubscriptionDetailSkeleton__price text-heading-2 text-main"},[t("div",{class:"skeletonLoading h-8 w-12 mx-auto"})])],-1),t("div",{class:"cardSubscriptionDetailSkeleton mt-4"},[t("div",{class:"flex items-center justify-between"},[t("div",{class:"p-4 text-body-medium text-main"},[t("div",{class:"skeletonLoading h-6 w-24"})]),t("div",{class:"p-4 text-body-medium text-secondary"},[t("div",{class:"skeletonLoading h-6 w-20"})])]),t("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}}),t("div",{class:"flex items-center justify-between"},[t("div",{class:"p-4 text-body-medium text-main"},[t("div",{class:"skeletonLoading h-6 w-32"})]),t("div",{class:"p-4 text-body-medium text-secondary"},[t("div",{class:"skeletonLoading h-6 w-20"})])])],-1)]))}const ct=Object.assign(P(at,[["render",it]]),{__name:"CardSubscriptionDetailSkeleton"}),ot={key:0,width:"72",height:"64",viewBox:"0 0 72 64",xmlns:"http://www.w3.org/2000/svg"},nt={key:1,width:"72",height:"64",viewBox:"0 0 73 66",xmlns:"http://www.w3.org/2000/svg"},rt=A({__name:"SubscriptionDelete",props:{isDarkTheme:{type:Boolean,default:!0}},setup(g){const l=g;return(n,d)=>l.isDarkTheme?(i(),c("svg",ot,d[0]||(d[0]=[B('<g fill="none" fill-rule="evenodd"><g><circle fill="#2C374B" cx="32" cy="32" r="32"></circle><path d="M38.506 44H26.494a3.48 3.48 0 0 1-2.47-1.032A3.538 3.538 0 0 1 23 40.477V23.523c0-.934.368-1.83 1.023-2.491A3.48 3.48 0 0 1 26.494 20h12.012a3.48 3.48 0 0 1 2.47 1.032A3.538 3.538 0 0 1 42 23.523v16.954c0 .934-.368 1.83-1.023 2.491A3.48 3.48 0 0 1 38.506 44zM28.28 37.684c.236.238.555.371.888.37h3.313c.448 0 .863-.24 1.087-.632a1.275 1.275 0 0 0 0-1.266 1.254 1.254 0 0 0-1.087-.634h-3.313c-.333 0-.652.134-.888.372a1.273 1.273 0 0 0 0 1.79zm8.328-11.37a1.246 1.246 0 0 0-.888-.371h-6.553c-.448 0-.863.241-1.087.633a1.275 1.275 0 0 0 0 1.266c.224.392.639.633 1.087.633h6.553c.333 0 .653-.133.888-.371a1.272 1.272 0 0 0 0-1.79zm0 4.789a1.242 1.242 0 0 0-.888-.371h-6.553c-.448 0-.863.241-1.087.633a1.275 1.275 0 0 0 0 1.266c.224.392.639.633 1.087.633h6.553c.333 0 .653-.133.888-.37a1.271 1.271 0 0 0 0-1.791z" fill="#A9B7D1"></path></g><g transform="translate(48 40)"><circle fill="var(--base-error-color)" cx="12" cy="12" r="12"></circle><path d="M7.405 16.594a.622.622 0 0 0 .48.206.623.623 0 0 0 .48-.206L12 12.96l3.634 3.634a.74.74 0 0 0 .48.206.741.741 0 0 0 .48-.206.663.663 0 0 0 0-.96L12.96 12l3.634-3.634a.663.663 0 0 0 0-.96.663.663 0 0 0-.96 0L12 11.04 8.366 7.406a.663.663 0 0 0-.96 0 .663.663 0 0 0 0 .96L11.04 12l-3.634 3.634a.663.663 0 0 0 0 .96z" fill="#FFF"></path></g></g>',1)]))):(i(),c("svg",nt,d[1]||(d[1]=[B('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)"><circle stroke="#DFDFDF" cx="32" cy="32" r="32"></circle><path d="M38.506 44H26.494a3.48 3.48 0 0 1-2.47-1.032A3.538 3.538 0 0 1 23 40.477V23.523c0-.934.368-1.83 1.023-2.491A3.48 3.48 0 0 1 26.494 20h12.012a3.48 3.48 0 0 1 2.47 1.032A3.538 3.538 0 0 1 42 23.523v16.954c0 .934-.368 1.83-1.023 2.491A3.48 3.48 0 0 1 38.506 44zM28.28 37.684c.236.238.555.371.888.37h3.313c.448 0 .863-.24 1.087-.632a1.275 1.275 0 0 0 0-1.266 1.254 1.254 0 0 0-1.087-.634h-3.313c-.333 0-.652.134-.888.372a1.273 1.273 0 0 0 0 1.79zm8.328-11.37a1.246 1.246 0 0 0-.888-.371h-6.553c-.448 0-.863.241-1.087.633a1.275 1.275 0 0 0 0 1.266c.224.392.639.633 1.087.633h6.553c.333 0 .653-.133.888-.371a1.272 1.272 0 0 0 0-1.79zm0 4.789a1.242 1.242 0 0 0-.888-.371h-6.553c-.448 0-.863.241-1.087.633a1.275 1.275 0 0 0 0 1.266c.224.392.639.633 1.087.633h6.553c.333 0 .653-.133.888-.37a1.271 1.271 0 0 0 0-1.791z" fill="#8F959F"></path></g><g transform="translate(49 41)"><circle fill="var(--base-error-color)" cx="12" cy="12" r="12"></circle><path d="M7.405 16.594a.622.622 0 0 0 .48.206.623.623 0 0 0 .48-.206L12 12.96l3.634 3.634a.74.74 0 0 0 .48.206.741.741 0 0 0 .48-.206.663.663 0 0 0 0-.96L12.96 12l3.634-3.634a.663.663 0 0 0 0-.96.663.663 0 0 0-.96 0L12 11.04 8.366 7.406a.663.663 0 0 0-.96 0 .663.663 0 0 0 0 .96L11.04 12l-3.634 3.634a.663.663 0 0 0 0 .96z" fill="#FFF"></path></g></g>',1)])))}}),lt=Object.assign(rt,{__name:"IconSubscriptionDelete"}),dt={class:"cardSubscriptionDetail__title text-heading-3 text-main"},ut={key:0,class:"cardSubscriptionDetail__description text-secondary"},_t={class:"flex justify-between text-secondary text-xs px-4"},pt={key:0,class:"flex items-center gap-2 my-4"},mt={key:1,class:"flex items-center"},bt={class:"px-4"},xt={key:0,class:"w-full bg-[var(--base-subscriptionCard--bgColor)] rounded-[var(--base-border-radius)] p-3 mb-4"},vt={class:"text-secondary text-xs"},gt=["data-test-category-id"],yt={class:"cardSubscriptionDetail__price text-heading-2 text-main uppercase"},ht={class:"cardSubscriptionDetail mt-4"},ft={class:"flex items-center justify-between"},kt={class:"cardSubscriptionDetail__description text-main"},wt={class:"cardSubscriptionDetail__description text-secondary"},Dt={key:0,class:"flex items-center justify-between"},St={class:"cardSubscriptionDetail__description text-main"},Ct={class:"cardSubscriptionDetail__description text-secondary"},Lt={key:1,class:"p-4"},At={class:"mb-6 flex justify-center"},Bt={class:"mt-4 px-6 text-center text-secondary"},It={class:"mt-6 grid grid-cols-2 gap-4"},Ft={class:"flex items-center justify-between"},jt={class:"cardSubscriptionDetail__description text-body-medium text-main"},zt={class:"cardSubscriptionDetail__description text-body-medium text-secondary"},$t={class:"flex items-center justify-between"},Mt={class:"cardSubscriptionDetail__description text-body-medium text-main"},Rt={class:"cardSubscriptionDetail__description text-body-medium text-secondary"},Et=A({__name:"index",props:{title:{},description:{},price:{},expirationDate:{},lastPaymentDate:{},active:{type:Boolean},disabled:{type:Boolean},autoRenew:{type:Boolean},durationLabel:{},accessLabels:{},allowedAccessIdentityItems:{}},emits:["clickCancel"],setup(g,{emit:l}){const{t:n}=z(),d=V(),s=g,y=l,h=()=>y("clickCancel");return(o,u)=>{const k=Q,b=$,w=q,D=lt,S=Y,C=O("tooltip");return i(),c("div",null,[t("div",{class:H(["cardSubscriptionDetail",{cardSubscriptionDetailActive:s.active}])},[t("div",dt,a(s.title),1),s.description?(i(),c("div",ut,a(s.description),1)):_("",!0),t("div",_t,[s.accessLabels?(i(),c("div",pt,[v(a(s.accessLabels.title)+" ",1),N((i(),L(b,{tag:"div",name:s.accessLabels.description,type:"icon"},{default:p(()=>[m(k)]),_:1},8,["name"])),[[C,s.accessLabels.description]])])):_("",!0),!s.active&&s.durationLabel?(i(),c("div",mt,a(o.durationLabel),1)):_("",!0)]),t("div",bt,[s.allowedAccessIdentityItems?.length?(i(),c("ul",xt,[t("div",vt,a(e(n)("labels.access_time"))+": ",1),(i(!0),c(f,null,T(s.allowedAccessIdentityItems,r=>(i(),c("li",{key:r.id,"data-test-category-id":r.id,class:"text-main text-xs flex items-center gap-2 my-2"},[m(w,{height:12,width:12}),v(" "+a(r.title||"---"),1)],8,gt))),128))])):_("",!0)]),s.price?(i(),c(f,{key:1},[u[0]||(u[0]=t("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}},null,-1)),t("div",yt,a(s.price),1)],64)):_("",!0)],2),t("div",ht,[s.active?(i(),c(f,{key:0},[t("div",ft,[t("div",kt,a(e(n)("pages.account_subscription.subscription_due_date")),1),t("div",wt,a(s.expirationDate||"---"),1)]),u[1]||(u[1]=t("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}},null,-1)),s.autoRenew?(i(),c("div",Dt,[t("div",St,a(e(n)("pages.account_subscription.subscription_next_charge_date",0)),1),t("div",Ct,a(s.expirationDate||"---"),1)])):_("",!0),u[2]||(u[2]=t("div",{role:"separator",class:"hr",style:{background:"var(--base-background-color)"}},null,-1)),s.autoRenew?(i(),c("div",Lt,[m(S,{title:e(n)("pages.account_subscription.cancel_subscription_modal_title"),"root-class":"max-w-[430px] !px-7 !py-10"},{trigger:p(({openModal:r})=>[m(b,{class:"font-medium",type:"danger",name:"cancel-subscription","full-width":"",link:"",disabled:s.disabled,onClick:r},{default:p(()=>[v(a(e(n)("pages.account_subscription.button_subscription_cancel")),1)]),_:2},1032,["disabled","onClick"])]),"before-title":p(()=>[t("div",At,[m(D,{"is-dark-theme":e(d).value===e(U).DARK},null,8,["is-dark-theme"])])]),actions:p(({closeModal:r})=>[t("div",Bt,a(e(n)("pages.account_subscription.cancel_subscription_modal_subtitle",{date:s.expirationDate})),1),t("div",It,[m(b,{class:"text-button-bold !p-3",type:"secondary",name:"modalClose","full-width":"",onClick:x=>r()},{default:p(()=>[v(a(e(n)("pages.account_subscription.button_subscription_keep")),1)]),_:2},1032,["onClick"]),m(b,{type:"danger",name:"modalConfirm",class:"text-button-bold !p-3","full-width":"",onClick:x=>{h(),r()}},{default:p(()=>[v(a(e(n)("pages.account_subscription.button_subscription_cancel")),1)]),_:2},1032,["onClick"])])]),_:1},8,["title"])])):_("",!0)],64)):(i(),c(f,{key:1},[t("div",Ft,[t("div",jt,a(e(n)("pages.account_subscription.subscription_expiration_date")),1),t("div",zt,a(s.expirationDate||"---"),1)]),u[3]||(u[3]=t("div",{role:"separator",class:"hr"},null,-1)),t("div",$t,[t("div",Mt,a(e(n)("pages.account_subscription.subscription_last_payment_date")),1),t("div",Rt,a(s.lastPaymentDate||"---"),1)])],64))])])}}}),Pt=Object.assign(Et,{__name:"CardSubscriptionDetail"}),Vt={class:"mt-8 text-center"},Jt=A({__name:"[id]",setup(g){const{t:l,te:n}=z(),d=J(),s=K(),y=X(),h=r=>Z(r,"d.L.yyyy"),{data:o,loading:u,error:k,run:b}=I(()=>F.loadUserSubscriptionById(d.params.id)),w=()=>{y.success(l("pages.account_subscription.alert_subscription_cancel_success")),s.push("/account/subscription/")},D=r=>{const{message:x}=G(r.message,{t:l,te:n});return y.error(x)},{loading:S,run:C}=I(()=>F.cancelUserSubscription(d.params.id),{onSuccess:w,onError:D});return j(k,()=>W({statusCode:404,data:{context:"page"}})),j(()=>d.params.id,b,{immediate:!0}),(r,x)=>{const M=ct,R=Pt,E=$;return i(),c("div",null,[e(u)?(i(),L(M,{key:0})):e(o)?(i(),L(R,{key:1,title:e(o).title,description:e(o).description,price:e(st)(e(o).price,e(o).currency),"expiration-date":h(e(o).endDate),"last-payment-date":h(e(o).lastPayment),active:e(o).isActive&&!e(o).isCanceled,disabled:e(S),"auto-renew":e(o).autoRenew,"duration-label":e(et)(e(o)),"access-labels":e(tt)(e(o).type),"allowed-access-identity-items":e(o).allowedAccessIdentityItems,onClickCancel:x[0]||(x[0]=Ot=>e(C)())},null,8,["title","description","price","expiration-date","last-payment-date","active","disabled","auto-renew","duration-label","access-labels","allowed-access-identity-items"])):_("",!0),t("div",Vt,[m(E,{tag:"nuxt-link",to:"/account/subscription/",type:"secondary",name:"billing-tab",link:""},{default:p(()=>[v(a(e(l)("pages.account_subscription.button_back_to_my_subscription")),1)]),_:1})])])}}});export{Jt as default};
