import{d as B,u as N,b as U,N as P,f as k,e as C,z as I,a as $,w as d,i as A,h as t,j as e,_ as D,m,t as c,p as E,q as F}from"./ByLxOsXe.js";import{_ as J}from"./CY3sA2dh.js";import{_ as O,a as T,v as l}from"./B_FDucs5.js";import{P as j}from"./GTVTV4q2.js";import"./BdZHwLgx.js";import"./BKb62Ov2.js";import"./DekDvBmv.js";import"./B-DBQphj.js";const z={class:"flex flex-col gap-6"},Y=B({__name:"password",setup(G){const{t:s,te:f}=N(),w=E(),b=U(),a=P({password_old:"",password_new:"",password_new_repeat:""});function h(n){const o=[],r=e(n);return l.required(r.password_old)?l.min(r.password_old,{length:8})||o.push({path:"password_old",message:s("errors.invalid_password")}):o.push({path:"password_old",message:s("errors.field_is_required")}),l.required(r.password_new)?l.min(r.password_new,{length:8})||o.push({path:"password_new",message:s("errors.invalid_password")}):o.push({path:"password_new",message:s("errors.field_is_required")}),l.required(r.password_new_repeat)?l.min(r.password_new_repeat,{length:8})||o.push({path:"password_new_repeat",message:s("errors.invalid_password")}):o.push({path:"password_new_repeat",message:s("errors.field_is_required")}),o}const g=JSON.stringify(a),v=k(()=>JSON.stringify(a)!==g),x=()=>(a.password_new="",a.password_new_repeat="",a.password_old="",w.success(s("pages.account_password.alert_password_update_success"))),V=n=>{const{message:o}=F(n.message,{t:s,te:f});return w.error(o)},{loading:p,run:q}=C(j.change,{onSuccess:x,onError:V});async function S(){if(a.password_new!==a.password_new_repeat){w.error(s("errors.passwords_dont_match"));return}const n={current_password:a.password_old,new_password:a.password_new};return q(n)}return(n,o)=>{const r=D,i=J,u=O,y=T;return $(),I(y,{state:e(a),validate:h,onSubmit:S},{default:d(()=>[A("div",z,[t(u,{label:e(s)("labels.password_old"),name:"password_old",required:""},{default:d(()=>[t(i,{modelValue:e(a).password_old,"onUpdate:modelValue":o[0]||(o[0]=_=>e(a).password_old=_),disabled:e(p),name:"password",placeholder:e(s)("labels.enter_old_password"),autocomplete:"new-password",sensitive:""},{"label-suffix":d(()=>[t(r,{name:"forgot-password",class:"text-caption-medium",tag:"nuxt-link",to:{path:"/auth/password/forgot/",query:{email:e(b).user?.email}},disabled:e(p),link:""},{default:d(()=>[m(c(e(s)("labels.forgot_password"))+"? ",1)]),_:1},8,["to","disabled"])]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),t(u,{label:e(s)("labels.password_new"),name:"password_new",required:""},{default:d(()=>[t(i,{modelValue:e(a).password_new,"onUpdate:modelValue":o[1]||(o[1]=_=>e(a).password_new=_),disabled:e(p),placeholder:e(s)("labels.enter_new_password"),name:"new-password",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),t(u,{label:e(s)("labels.password_repeat"),name:"password_new_repeat",required:""},{default:d(()=>[t(i,{modelValue:e(a).password_new_repeat,"onUpdate:modelValue":o[2]||(o[2]=_=>e(a).password_new_repeat=_),disabled:e(p),placeholder:e(s)("labels.confirm_new_password"),name:"new-password-confirm",autocomplete:"new-password",sensitive:""},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),t(r,{class:"mt-10 font-bold",name:"submit-password",disabled:e(p)||!e(v),"full-width":""},{default:d(()=>[m(c(e(s)("labels.save")),1)]),_:1},8,["disabled"])]),_:1},8,["state"])}}});export{Y as default};
//# sourceMappingURL=D9KK3rH_.js.map
