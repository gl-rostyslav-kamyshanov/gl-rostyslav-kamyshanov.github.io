{"version":3,"file":"CZKpKQmd.js","sources":["../../../../app/pages/auth/sign-up/following/category/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useRouteQuery } from \"@vueuse/router\";\nimport useAsync from \"~/composables/use-async\";\nimport SearchAPI from \"~/services/search\";\nimport useUserStore from \"~/stores/user\";\nimport getErrorLocalePathMessage from \"~/utils/locale\";\n\nconst route = useRoute();\nconst router = useRouter();\nconst segment = useSegment();\nconst { t, te } = useI18n();\nconst appConfig = useRuntimeConfig().public;\nconst userStore = useUserStore();\nconst search = useRouteQuery<string>(\"q\", \"\", { route, router });\nconst hasFollowingItems = computed(() => Boolean(Object.keys(userStore.followed).length));\nconst hasSkipButton = appConfig.APP_CUSTOMER.enable_signup_onboarding_follow_skip;\nconst { y: windowY } = useWindowScroll();\nconst isHeaderSearchShown = computed(() => windowY.value > 160);\nconst {\n  data: mainCategories,\n  run: loadItems,\n  loading,\n  error,\n} = useAsync(SearchAPI.identitySubFacetsForMain);\nconst onSearchClear = () => {\n  search.value = \"\";\n  loadItems();\n};\n\nconst errorMessage = computed(() => error.value && getErrorLocalePathMessage(error.value, { t, te }).message);\nconst onSearchInput = () => loadItems({ searchString: search.value });\nconst noResultsFound = computed(() => mainCategories.value?.length === 0);\nconst showFollowedItems = computed(() => !search.value && hasFollowingItems.value && !noResultsFound.value);\n\nonMounted(() => {\n  segment.page(\"Manage Following\", {\n    previous_path: window.history.state?.back,\n  });\n  return loadItems({ searchString: search.value });\n});\nuseHead({ title: \"Following\" });\ndefinePageMeta({ middleware: \"auth\" });\n</script>\n\n<template>\n  <div>\n    <AuthHeader\n      :class=\"{ '!my-0': isHeaderSearchShown }\"\n      :transparent=\"!isHeaderSearchShown\"\n      fixed\n      with-locale\n    >\n      <template v-if=\"isHeaderSearchShown\" #append-center>\n        <div class=\"sm:w-[25rem] md:w-[30rem] lg:w-[40rem] lg:-mr-[6rem] rtl:lg:mr-[6rem]\">\n          <BaseInput\n            v-model=\"search\"\n            class=\"truncate\"\n            name=\"search\"\n            :disabled=\"loading\"\n            :placeholder=\"t('labels.search_input_placeholder')\"\n            search\n            @clear=\"onSearchClear()\"\n            @keyup.enter=\"onSearchInput\"\n          />\n        </div>\n      </template>\n      <template #append-end>\n        <BaseButton\n          v-if=\"hasFollowingItems\"\n          tag=\"nuxt-link\"\n          type=\"primary\"\n          name=\"next\"\n          size=\"small\"\n          :to=\"hasFollowingItems ? { path: '/' } : {}\"\n        >\n          {{ t(\"labels.next\") }}\n        </BaseButton>\n\n        <BaseButton\n          v-else-if=\"hasSkipButton\"\n          tag=\"nuxt-link\"\n          :to=\"{ path: '/' }\"\n          name=\"skip\"\n          size=\"small\"\n          outline\n        >\n          {{ t(\"labels.skip\") }}\n        </BaseButton>\n      </template>\n    </AuthHeader>\n\n    <BaseMain class=\"min-h-screen\">\n      <div class=\"pt-32 pb-12 form-column\">\n        <div class=\"w-[20rem] sm:w-[30rem] md:w-[35rem] lg:w-[40rem]\">\n          <h1 class=\"mb-10 text-3xl font-bold text-center max-sm:mx-8\">\n            {{ t(\"pages.auth_sign_up.follow_category_header\") }}\n          </h1>\n\n          <!-- TODO: sticky top-8 z-22  -->\n          <div class=\"px-2 mb-10 sm:px-0\">\n            <BaseInput\n              v-model=\"search\"\n              class=\"truncate\"\n              name=\"search\"\n              :disabled=\"loading\"\n              :placeholder=\"t('labels.search_input_placeholder')\"\n              search\n              @clear=\"onSearchClear()\"\n              @keyup.enter=\"onSearchInput\"\n            />\n          </div>\n\n          <BaseAlert v-if=\"errorMessage\" type=\"danger\" class=\"my-6\" :text=\"errorMessage\" />\n\n          <ListIdentityItems\n            v-if=\"userStore.followedItems && showFollowedItems\"\n            :items=\"userStore.followedItems\"\n            :title=\"t('labels.following')\"\n            grid-class=\"clubs-grid\"\n            :limit=\"8\"\n            hide-on-no-content\n            has-see-all-link\n            see-all-link=\"/auth/sign-up/following/category/followed\"\n          />\n\n          <template v-if=\"loading\">\n            <ListIdentityItems :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :limit=\"8\" class=\"mt-10\" />\n            <ListIdentityItems :title=\"t('labels.loading')\" loading grid-class=\"clubs-grid\" :limit=\"8\" class=\"mt-10\" />\n          </template>\n\n          <div v-else>\n            <ListIdentityItems\n              v-for=\"category in mainCategories\"\n              :key=\"category.identityId\"\n              :identity-id=\"category.identityId\"\n              :title=\"category.identityTitle\"\n              :loading=\"loading\"\n              :items=\"category.relatedIdentities\"\n              :limit=\"8\"\n              :see-all-link=\"`/auth/sign-up/following/category/${category.identityId}`\"\n              auth\n              link-list\n              class=\"px-2 mt-10 sm:px-0\"\n              :search-value=\"search\"\n              grid-class=\"clubs-grid\"\n              has-see-all-link\n              hide-on-no-content\n            />\n          </div>\n\n          <BaseNotFound v-if=\"noResultsFound\" :text=\"t('errors.could_not_find_results')\" />\n        </div>\n      </div>\n    </BaseMain>\n  </div>\n</template>\n"],"names":["route","useRoute","router","useRouter","segment","useSegment","t","te","useI18n","appConfig","useRuntimeConfig","userStore","useUserStore","search","useRouteQuery","hasFollowingItems","computed","hasSkipButton","windowY","useWindowScroll","isHeaderSearchShown","mainCategories","loadItems","loading","error","useAsync","SearchAPI","onSearchClear","errorMessage","getErrorLocalePathMessage","onSearchInput","noResultsFound","showFollowedItems","onMounted","useHead","_createElementBlock","_createVNode","_component_AuthHeader","_unref","_createBlock","_component_BaseButton","_createElementVNode","_hoisted_1","_component_BaseInput","$event","_component_BaseMain","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_component_BaseAlert","_component_ListIdentityItems","_Fragment","_hoisted_6","_renderList","category","_component_BaseNotFound"],"mappings":"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"}