{"version":3,"file":"CaITTFmf.js","sources":["../../../../app/composables/use-pagination.ts"],"sourcesContent":["interface IUsePaginationOptions<Item> {\n  /**\n   * If enabled, the `loadItems` function will be called during the `onMounted` lifecycle hook.\n   */\n  immediate?: boolean;\n  /**\n   * The default number of items per page.\n   * Default value is 10.\n   */\n  pageSize?: number;\n  /**\n   * An optional array of preloaded items.\n   */\n  preloadedItems?: Item[];\n  /**\n   * If enabled, the function will paginate existing items instead of loading more items.\n   */\n  paginateExistItems?: boolean;\n  /**\n   * A required function to load items, it should return a Promise of IPaginatedResponse<Item>.\n   * It receives the current page and page size as arguments.\n   */\n  loadItemsFn: (page: number, pageSize: number) => Promise<IPaginatedResponse<Item>>;\n  /**\n   * An optional function that is called when items are successfully loaded.\n   * It receives an array of loaded items as an argument.\n   */\n  onItemsLoadedFn?: (items: Item[]) => void;\n}\n\nexport default function usePagination<Item>(options: IUsePaginationOptions<Item>) {\n  const page = ref(0);\n  const items = ref<Item[]>([]) as Ref<Item[]>;\n  const itemsToPaginate = ref<Item[]>([]) as Ref<Item[]>;\n  const error = ref<string | null>(null);\n  const loading = ref(false);\n  const limit = options.pageSize || 10;\n  const canLoadMore = ref(false);\n\n  function loadMore() {\n    page.value += 1;\n    if (options.paginateExistItems) {\n      paginateItems();\n      return;\n    }\n    loadItems();\n  }\n\n  function paginateItems() {\n    loading.value = true;\n    items.value = items.value.concat(itemsToPaginate.value.slice(page.value * limit, limit * (page.value + 1)));\n    if (itemsToPaginate.value.length <= items.value.length)\n      canLoadMore.value = false;\n    loading.value = false;\n  }\n\n  function loadItems() {\n    loading.value = true;\n    error.value = null;\n\n    return options\n      .loadItemsFn(page.value, limit)\n      .then((response) => {\n        itemsToPaginate.value = response.content.entries;\n        items.value = options.paginateExistItems ? itemsToPaginate.value.slice(0, limit) : items.value.concat(response.content.entries);\n        canLoadMore.value = response.content.nextExists || (options.paginateExistItems ? items.value.length < response.content.entryCount : false);\n        loading.value = false;\n\n        if (options.onItemsLoadedFn)\n          options.onItemsLoadedFn(items.value);\n      })\n      .catch((err: Error) => {\n        error.value = err.message;\n        loading.value = false;\n      });\n  }\n\n  function reset() {\n    page.value = 0;\n    items.value = [];\n\n    if (Array.isArray(options.preloadedItems))\n      items.value = items.value.concat(options.preloadedItems);\n\n    loadItems();\n  }\n\n  onMounted(() => options.immediate && reset());\n\n  return { page, reset, loadMore, items, loading, error, canLoadMore };\n}\n"],"names":["usePagination","options","page","ref","items","itemsToPaginate","error","loading","limit","canLoadMore","loadMore","paginateItems","loadItems","response","err","reset","onMounted"],"mappings":"yCA8BA,SAAwBA,EAAoBC,EAAsC,CAChF,MAAMC,EAAOC,EAAI,CAAC,EACZC,EAAQD,EAAY,EAAE,EACtBE,EAAkBF,EAAY,EAAE,EAChCG,EAAQH,EAAmB,IAAI,EAC/BI,EAAUJ,EAAI,EAAK,EACnBK,EAAQP,EAAQ,UAAY,GAC5BQ,EAAcN,EAAI,EAAK,EAE7B,SAASO,GAAW,CAElB,GADAR,EAAK,OAAS,EACVD,EAAQ,mBAAoB,CAC9BU,EAAA,EACA,MACF,CACAC,EAAA,CACF,CAEA,SAASD,GAAgB,CACvBJ,EAAQ,MAAQ,GAChBH,EAAM,MAAQA,EAAM,MAAM,OAAOC,EAAgB,MAAM,MAAMH,EAAK,MAAQM,EAAOA,GAASN,EAAK,MAAQ,EAAE,CAAC,EACtGG,EAAgB,MAAM,QAAUD,EAAM,MAAM,SAC9CK,EAAY,MAAQ,IACtBF,EAAQ,MAAQ,EAClB,CAEA,SAASK,GAAY,CACnB,OAAAL,EAAQ,MAAQ,GAChBD,EAAM,MAAQ,KAEPL,EACJ,YAAYC,EAAK,MAAOM,CAAK,EAC7B,KAAMK,GAAa,CAClBR,EAAgB,MAAQQ,EAAS,QAAQ,QACzCT,EAAM,MAAQH,EAAQ,mBAAqBI,EAAgB,MAAM,MAAM,EAAGG,CAAK,EAAIJ,EAAM,MAAM,OAAOS,EAAS,QAAQ,OAAO,EAC9HJ,EAAY,MAAQI,EAAS,QAAQ,aAAeZ,EAAQ,mBAAqBG,EAAM,MAAM,OAASS,EAAS,QAAQ,WAAa,IACpIN,EAAQ,MAAQ,GAEZN,EAAQ,iBACVA,EAAQ,gBAAgBG,EAAM,KAAK,CACvC,CAAC,EACA,MAAOU,GAAe,CACrBR,EAAM,MAAQQ,EAAI,QAClBP,EAAQ,MAAQ,EAClB,CAAC,CACL,CAEA,SAASQ,GAAQ,CACfb,EAAK,MAAQ,EACbE,EAAM,MAAQ,CAAA,EAEV,MAAM,QAAQH,EAAQ,cAAc,IACtCG,EAAM,MAAQA,EAAM,MAAM,OAAOH,EAAQ,cAAc,GAEzDW,EAAA,CACF,CAEA,OAAAI,EAAU,IAAMf,EAAQ,WAAac,EAAA,CAAO,EAErC,CAAE,KAAAb,EAAM,MAAAa,EAAO,SAAAL,EAAU,MAAAN,EAAO,QAAAG,EAAS,MAAAD,EAAO,YAAAG,CAAA,CACzD"}